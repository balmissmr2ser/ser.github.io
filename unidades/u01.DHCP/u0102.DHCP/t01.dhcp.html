<!DOCTYPE html><html><head>
      <title>SER</title>
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      
      <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.22/dist/katex.min.css">
      
      
      
      
      
      <style>
      @import url(https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css);
code[class*=language-],pre[class*=language-]{color:#333;background:0 0;font-family:Consolas,"Liberation Mono",Menlo,Courier,monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.4;-moz-tab-size:8;-o-tab-size:8;tab-size:8;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none}pre[class*=language-]{padding:.8em;overflow:auto;border-radius:3px;background:#f5f5f5}:not(pre)>code[class*=language-]{padding:.1em;border-radius:.3em;white-space:normal;background:#f5f5f5}.token.blockquote,.token.comment{color:#969896}.token.cdata{color:#183691}.token.doctype,.token.macro.property,.token.punctuation,.token.variable{color:#333}.token.builtin,.token.important,.token.keyword,.token.operator,.token.rule{color:#a71d5d}.token.attr-value,.token.regex,.token.string,.token.url{color:#183691}.token.atrule,.token.boolean,.token.code,.token.command,.token.constant,.token.entity,.token.number,.token.property,.token.symbol{color:#0086b3}.token.prolog,.token.selector,.token.tag{color:#63a35c}.token.attr-name,.token.class,.token.class-name,.token.function,.token.id,.token.namespace,.token.pseudo-class,.token.pseudo-element,.token.url-reference .token.variable{color:#795da3}.token.entity{cursor:help}.token.title,.token.title .token.punctuation{font-weight:700;color:#1d3e81}.token.list{color:#ed6a43}.token.inserted{background-color:#eaffea;color:#55a532}.token.deleted{background-color:#ffecec;color:#bd2c00}.token.bold{font-weight:700}.token.italic{font-style:italic}.language-json .token.property{color:#183691}.language-markup .token.tag .token.punctuation{color:#333}.language-css .token.function,code.language-css{color:#0086b3}.language-yaml .token.atrule{color:#63a35c}code.language-yaml{color:#183691}.language-ruby .token.function{color:#333}.language-markdown .token.url{color:#795da3}.language-makefile .token.symbol{color:#795da3}.language-makefile .token.variable{color:#183691}.language-makefile .token.builtin{color:#0086b3}.language-bash .token.keyword{color:#0086b3}pre[data-line]{position:relative;padding:1em 0 1em 3em}pre[data-line] .line-highlight-wrapper{position:absolute;top:0;left:0;background-color:transparent;display:block;width:100%}pre[data-line] .line-highlight{position:absolute;left:0;right:0;padding:inherit 0;margin-top:1em;background:hsla(24,20%,50%,.08);background:linear-gradient(to right,hsla(24,20%,50%,.1) 70%,hsla(24,20%,50%,0));pointer-events:none;line-height:inherit;white-space:pre}pre[data-line] .line-highlight:before,pre[data-line] .line-highlight[data-end]:after{content:attr(data-start);position:absolute;top:.4em;left:.6em;min-width:1em;padding:0 .5em;background-color:hsla(24,20%,50%,.4);color:#f4f1ef;font:bold 65%/1.5 sans-serif;text-align:center;vertical-align:.3em;border-radius:999px;text-shadow:none;box-shadow:0 1px #fff}pre[data-line] .line-highlight[data-end]:after{content:attr(data-end);top:auto;bottom:.4em}html body{font-family:'Helvetica Neue',Helvetica,'Segoe UI',Arial,freesans,sans-serif;font-size:16px;line-height:1.6;color:#333;background-color:#fff;overflow:initial;box-sizing:border-box;word-wrap:break-word}html body>:first-child{margin-top:0}html body h1,html body h2,html body h3,html body h4,html body h5,html body h6{line-height:1.2;margin-top:1em;margin-bottom:16px;color:#000}html body h1{font-size:2.25em;font-weight:300;padding-bottom:.3em}html body h2{font-size:1.75em;font-weight:400;padding-bottom:.3em}html body h3{font-size:1.5em;font-weight:500}html body h4{font-size:1.25em;font-weight:600}html body h5{font-size:1.1em;font-weight:600}html body h6{font-size:1em;font-weight:600}html body h1,html body h2,html body h3,html body h4,html body h5{font-weight:600}html body h5{font-size:1em}html body h6{color:#5c5c5c}html body strong{color:#000}html body del{color:#5c5c5c}html body a:not([href]){color:inherit;text-decoration:none}html body a{color:#08c;text-decoration:none}html body a:hover{color:#00a3f5;text-decoration:none}html body img{max-width:100%}html body>p{margin-top:0;margin-bottom:16px;word-wrap:break-word}html body>ol,html body>ul{margin-bottom:16px}html body ol,html body ul{padding-left:2em}html body ol.no-list,html body ul.no-list{padding:0;list-style-type:none}html body ol ol,html body ol ul,html body ul ol,html body ul ul{margin-top:0;margin-bottom:0}html body li{margin-bottom:0}html body li.task-list-item{list-style:none}html body li>p{margin-top:0;margin-bottom:0}html body .task-list-item-checkbox{margin:0 .2em .25em -1.8em;vertical-align:middle}html body .task-list-item-checkbox:hover{cursor:pointer}html body blockquote{margin:16px 0;font-size:inherit;padding:0 15px;color:#5c5c5c;background-color:#f0f0f0;border-left:4px solid #d6d6d6}html body blockquote>:first-child{margin-top:0}html body blockquote>:last-child{margin-bottom:0}html body hr{height:4px;margin:32px 0;background-color:#d6d6d6;border:0 none}html body table{margin:10px 0 15px 0;border-collapse:collapse;border-spacing:0;display:block;width:100%;overflow:auto;word-break:normal;word-break:keep-all}html body table th{font-weight:700;color:#000}html body table td,html body table th{border:1px solid #d6d6d6;padding:6px 13px}html body dl{padding:0}html body dl dt{padding:0;margin-top:16px;font-size:1em;font-style:italic;font-weight:700}html body dl dd{padding:0 16px;margin-bottom:16px}html body code{font-family:Menlo,Monaco,Consolas,'Courier New',monospace;font-size:.85em;color:#000;background-color:#f0f0f0;border-radius:3px;padding:.2em 0}html body code::after,html body code::before{letter-spacing:-.2em;content:'\00a0'}html body pre>code{padding:0;margin:0;word-break:normal;white-space:pre;background:0 0;border:0}html body .highlight{margin-bottom:16px}html body .highlight pre,html body pre{padding:1em;overflow:auto;line-height:1.45;border:#d6d6d6;border-radius:3px}html body .highlight pre{margin-bottom:0;word-break:normal}html body pre code,html body pre tt{display:inline;max-width:initial;padding:0;margin:0;overflow:initial;line-height:inherit;word-wrap:normal;background-color:transparent;border:0}html body pre code:after,html body pre code:before,html body pre tt:after,html body pre tt:before{content:normal}html body blockquote,html body dl,html body ol,html body p,html body pre,html body ul{margin-top:0;margin-bottom:16px}html body kbd{color:#000;border:1px solid #d6d6d6;border-bottom:2px solid #c7c7c7;padding:2px 4px;background-color:#f0f0f0;border-radius:3px}@media print{html body{background-color:#fff}html body h1,html body h2,html body h3,html body h4,html body h5,html body h6{color:#000;page-break-after:avoid}html body blockquote{color:#5c5c5c}html body pre{page-break-inside:avoid}html body table{display:table}html body img{display:block;max-width:100%;max-height:100%}html body code,html body pre{word-wrap:break-word;white-space:pre}}.markdown-preview{width:100%;height:100%;box-sizing:border-box}.markdown-preview ul{list-style:disc}.markdown-preview ul ul{list-style:circle}.markdown-preview ul ul ul{list-style:square}.markdown-preview ol{list-style:decimal}.markdown-preview ol ol,.markdown-preview ul ol{list-style-type:lower-roman}.markdown-preview ol ol ol,.markdown-preview ol ul ol,.markdown-preview ul ol ol,.markdown-preview ul ul ol{list-style-type:lower-alpha}.markdown-preview .newpage,.markdown-preview .pagebreak{page-break-before:always}.markdown-preview pre.line-numbers{position:relative;padding-left:3.8em;counter-reset:linenumber}.markdown-preview pre.line-numbers>code{position:relative}.markdown-preview pre.line-numbers .line-numbers-rows{position:absolute;pointer-events:none;top:1em;font-size:100%;left:0;width:3em;letter-spacing:-1px;border-right:1px solid #999;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.markdown-preview pre.line-numbers .line-numbers-rows>span{pointer-events:none;display:block;counter-increment:linenumber}.markdown-preview pre.line-numbers .line-numbers-rows>span:before{content:counter(linenumber);color:#999;display:block;padding-right:.8em;text-align:right}.markdown-preview .mathjax-exps .MathJax_Display{text-align:center!important}.markdown-preview:not([data-for=preview]) .code-chunk .code-chunk-btn-group{display:none}.markdown-preview:not([data-for=preview]) .code-chunk .status{display:none}.markdown-preview:not([data-for=preview]) .code-chunk .output-div{margin-bottom:16px}.markdown-preview .md-toc{padding:0}.markdown-preview .md-toc .md-toc-link-wrapper .md-toc-link{display:inline;padding:.25rem 0}.markdown-preview .md-toc .md-toc-link-wrapper .md-toc-link div,.markdown-preview .md-toc .md-toc-link-wrapper .md-toc-link p{display:inline}.markdown-preview .md-toc .md-toc-link-wrapper.highlighted .md-toc-link{font-weight:800}.scrollbar-style::-webkit-scrollbar{width:8px}.scrollbar-style::-webkit-scrollbar-track{border-radius:10px;background-color:transparent}.scrollbar-style::-webkit-scrollbar-thumb{border-radius:5px;background-color:rgba(150,150,150,.66);border:4px solid rgba(150,150,150,.66);background-clip:content-box}html body[for=html-export]:not([data-presentation-mode]){position:relative;width:100%;height:100%;top:0;left:0;margin:0;padding:0;overflow:auto}html body[for=html-export]:not([data-presentation-mode]) .markdown-preview{position:relative;top:0;min-height:100vh}@media screen and (min-width:914px){html body[for=html-export]:not([data-presentation-mode]) .markdown-preview{padding:2em calc(50% - 457px + 2em)}}@media screen and (max-width:914px){html body[for=html-export]:not([data-presentation-mode]) .markdown-preview{padding:2em}}@media screen and (max-width:450px){html body[for=html-export]:not([data-presentation-mode]) .markdown-preview{font-size:14px!important;padding:1em}}@media print{html body[for=html-export]:not([data-presentation-mode]) #sidebar-toc-btn{display:none}}html body[for=html-export]:not([data-presentation-mode]) #sidebar-toc-btn{position:fixed;bottom:8px;left:8px;font-size:28px;cursor:pointer;color:inherit;z-index:99;width:32px;text-align:center;opacity:.4}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] #sidebar-toc-btn{opacity:1}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc{position:fixed;top:0;left:0;width:300px;height:100%;padding:32px 0 48px 0;font-size:14px;box-shadow:0 0 4px rgba(150,150,150,.33);box-sizing:border-box;overflow:auto;background-color:inherit}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc::-webkit-scrollbar{width:8px}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc::-webkit-scrollbar-track{border-radius:10px;background-color:transparent}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc::-webkit-scrollbar-thumb{border-radius:5px;background-color:rgba(150,150,150,.66);border:4px solid rgba(150,150,150,.66);background-clip:content-box}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc a{text-decoration:none}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc .md-toc{padding:0 16px}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc .md-toc .md-toc-link-wrapper .md-toc-link{display:inline;padding:.25rem 0}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc .md-toc .md-toc-link-wrapper .md-toc-link div,html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc .md-toc .md-toc-link-wrapper .md-toc-link p{display:inline}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc .md-toc .md-toc-link-wrapper.highlighted .md-toc-link{font-weight:800}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .markdown-preview{left:300px;width:calc(100% - 300px);padding:2em calc(50% - 457px - 300px / 2);margin:0;box-sizing:border-box}@media screen and (max-width:1274px){html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .markdown-preview{padding:2em}}@media screen and (max-width:450px){html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .markdown-preview{width:100%}}html body[for=html-export]:not([data-presentation-mode]):not([html-show-sidebar-toc]) .markdown-preview{left:50%;transform:translateX(-50%)}html body[for=html-export]:not([data-presentation-mode]):not([html-show-sidebar-toc]) .md-sidebar-toc{display:none}@font-face{font-family:"Material Icons";font-style:normal;font-weight:400;src:local("Material Icons"),local("MaterialIcons-Regular"),url("data:application/x-font-woff;charset=utf-8;base64,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") format("woff")}.admonition{box-shadow:0 2px 2px 0 rgba(0,0,0,.14),0 1px 5px 0 rgba(0,0,0,.12),0 3px 1px -2px rgba(0,0,0,.2);position:relative;margin:1.5625em 0;padding:0 1.2rem;border-left:.4rem solid rgba(68,138,255,.8);border-radius:.2rem;background-color:rgba(255,255,255,.05);overflow:auto}.admonition>p{margin-top:.8rem}.admonition>.admonition-title{margin:0 -1.2rem;padding:.8rem 1.2rem .8rem 3.6rem;border-bottom:1px solid rgba(68,138,255,.2);background-color:rgba(68,138,255,.1);font-weight:700}.admonition>.admonition-title:before{position:absolute;left:1.2rem;font-size:1.5rem;color:rgba(68,138,255,.8);content:"\E3C9"}.admonition>.admonition-title:before{font-family:Material Icons;font-style:normal;font-variant:normal;font-weight:400;line-height:2rem;text-transform:none;white-space:nowrap;speak:none;word-wrap:normal;direction:ltr}.admonition.abstract,.admonition.summary,.admonition.tldr{border-left-color:rgba(0,176,255,.8)}.admonition.abstract>.admonition-title,.admonition.summary>.admonition-title,.admonition.tldr>.admonition-title{background-color:rgba(0,176,255,.1);border-bottom-color:rgba(0,176,255,.2)}.admonition.abstract>.admonition-title:before,.admonition.summary>.admonition-title:before,.admonition.tldr>.admonition-title:before{color:#00b0ff;content:"\E8D2"}.admonition.hint,.admonition.tip{border-left-color:rgba(0,191,165,.8)}.admonition.hint>.admonition-title,.admonition.tip>.admonition-title{background-color:rgba(0,191,165,.1);border-bottom-color:rgba(0,191,165,.2)}.admonition.hint>.admonition-title:before,.admonition.tip>.admonition-title:before{color:#00bfa5;content:"\E80E"}.admonition.info,.admonition.todo{border-left-color:rgba(0,184,212,.8)}.admonition.info>.admonition-title,.admonition.todo>.admonition-title{background-color:rgba(0,184,212,.1);border-bottom-color:rgba(0,184,212,.2)}.admonition.info>.admonition-title:before,.admonition.todo>.admonition-title:before{color:#00b8d4;content:"\E88E"}.admonition.check,.admonition.done,.admonition.success{border-left-color:rgba(0,200,83,.8)}.admonition.check>.admonition-title,.admonition.done>.admonition-title,.admonition.success>.admonition-title{background-color:rgba(0,200,83,.1);border-bottom-color:rgba(0,200,83,.2)}.admonition.check>.admonition-title:before,.admonition.done>.admonition-title:before,.admonition.success>.admonition-title:before{color:#00c853;content:"\E876"}.admonition.faq,.admonition.help,.admonition.question{border-left-color:rgba(100,221,23,.8)}.admonition.faq>.admonition-title,.admonition.help>.admonition-title,.admonition.question>.admonition-title{background-color:rgba(100,221,23,.1);border-bottom-color:rgba(100,221,23,.2)}.admonition.faq>.admonition-title:before,.admonition.help>.admonition-title:before,.admonition.question>.admonition-title:before{color:#64dd17;content:"\E887"}.admonition.attention,.admonition.caution,.admonition.warning{border-left-color:rgba(255,145,0,.8)}.admonition.attention>.admonition-title,.admonition.caution>.admonition-title,.admonition.warning>.admonition-title{background-color:rgba(255,145,0,.1);border-bottom-color:rgba(255,145,0,.2)}.admonition.attention>.admonition-title:before{color:#ff9100;content:"\E417"}.admonition.caution>.admonition-title:before,.admonition.warning>.admonition-title:before{color:#ff9100;content:"\E002"}.admonition.fail,.admonition.failure,.admonition.missing{border-left-color:rgba(255,82,82,.8)}.admonition.fail>.admonition-title,.admonition.failure>.admonition-title,.admonition.missing>.admonition-title{background-color:rgba(255,82,82,.1);border-bottom-color:rgba(255,82,82,.2)}.admonition.fail>.admonition-title:before,.admonition.failure>.admonition-title:before,.admonition.missing>.admonition-title:before{color:#ff5252;content:"\E14C"}.admonition.bug,.admonition.danger,.admonition.error{border-left-color:rgba(255,23,68,.8)}.admonition.bug>.admonition-title,.admonition.danger>.admonition-title,.admonition.error>.admonition-title{background-color:rgba(255,23,68,.1);border-bottom-color:rgba(255,23,68,.2)}.admonition.danger>.admonition-title:before{color:#ff1744;content:"\E3E7"}.admonition.error>.admonition-title:before{color:#ff1744;content:"\E14C"}.admonition.bug>.admonition-title:before{color:#ff1744;content:"\E868"}.admonition.example,.admonition.snippet{border-left-color:rgba(0,184,212,.8)}.admonition.example>.admonition-title,.admonition.snippet>.admonition-title{background-color:rgba(0,184,212,.1);border-bottom-color:rgba(0,184,212,.2)}.admonition.example>.admonition-title:before,.admonition.snippet>.admonition-title:before{color:#00b8d4;content:"\E242"}.admonition.cite,.admonition.quote{border-left-color:rgba(158,158,158,.8)}.admonition.cite>.admonition-title,.admonition.quote>.admonition-title{background-color:rgba(158,158,158,.1);border-bottom-color:rgba(158,158,158,.2)}.admonition.cite>.admonition-title:before,.admonition.quote>.admonition-title:before{color:#9e9e9e;content:"\E244"}
/* Please visit the URL below for more information: */
/*   https://shd101wyy.github.io/markdown-preview-enhanced/#/customize-css */
/* Please visit the URL below for more information: */
/*   https://shd101wyy.github.io/markdown-preview-enhanced/#/customize-css */

@font-face {
  font-family: 'Catamaran';
  font-style: normal;
  font-weight: 400;
  src: url(https://fonts.gstatic.com/s/catamaran/v28/o-0bIpQoyXQa2RxT7-5B6Ryxs2E_6n1iPHjd5a7dvg.ttf) format('truetype');
}
.markdown-preview.markdown-preview {
  font-family: Verdana, Arial, "Times New Roman", sans-serif;
  font-size: 14px;
}
.markdown-preview.markdown-preview .box_bg_lightgray {
  background-color: #f5f5f5;
  border: 2px solid #969696;
  padding: 15px;
  margin-top: 15px;
  margin-bottom: 15px;
  border-radius: 5px;
  box-shadow: 0 0 7px 0 rgba(78, 120, 158, 0.1);
}
.markdown-preview.markdown-preview .box_bg_lightgreen {
  background-color: #f5faf5;
  border: 2px solid #969b96;
  padding-left: 15px;
  padding-right: 15px;
  margin-top: 15px;
  margin-bottom: 15px;
  border-radius: 5px;
  box-shadow: 0 0 7px 0 rgba(78, 120, 158, 0.1);
}
.markdown-preview.markdown-preview .contenedor {
  display: flex;
  justify-content: center;
  margin: 30px auto 30px auto;
}
.markdown-preview.markdown-preview .fondo {
  background: url(https://ser.smr2.iesdoctorbalmis.info/assets/fondo.png);
  background-size: cover;
  width: 75%;
  height: 160px;
  border-radius: 10px;
  position: relative;
}
.markdown-preview.markdown-preview .cita {
  font-family: Arial;
  font-style: italic;
  font-weight: 600;
  text-align: justify;
  line-height: 1.5rem;
  opacity: 0.6;
  color: white;
  padding: 5rem;
  position: relative;
  top: 50%;
  left: 50%;
  font-size: 1.3rem;
  transform: translate(-50%, -50%);
}
.markdown-preview.markdown-preview .abre_comilla {
  font-family: "Catamaran";
  font-weight: 600;
  color: white;
  padding-left: 30px;
  position: absolute;
  font-size: 6rem;
  transform: translate(0%, -15%);
}
.markdown-preview.markdown-preview .cierra_comilla {
  font-family: "Catamaran";
  font-weight: 600;
  color: white;
  padding-right: 30px;
  right: 0%;
  position: absolute;
  font-size: 6rem;
  transform: translate(0%, 55%);
}
.markdown-preview.markdown-preview .autor {
  font-family: Arial;
  color: white;
  margin: 0px;
  padding-left: 30px;
  position: absolute;
  top: 83%;
  font-size: 1rem;
}
.markdown-preview.markdown-preview .flotante {
  display: flex;
  margin-top: 15px;
  margin-bottom: 15px;
}
@media (max-width: 550px) {
  .markdown-preview.markdown-preview .flotante {
    justify-content: center;
  }
}
@media (min-width: 550px) {
  .markdown-preview.markdown-preview .flotante {
    justify-content: space-between;
  }
}
@media (max-width: 550px) {
  .markdown-preview.markdown-preview .flotante {
    flex-direction: column;
  }
}
@media (min-width: 550px) {
  .markdown-preview.markdown-preview .flotante {
    flex-direction: row;
  }
}
.markdown-preview.markdown-preview .flotante_izq {
  margin-right: 15px;
}
@media (max-width: 550px) {
  .markdown-preview.markdown-preview .flotante_izq {
    width: 100%;
  }
}
@media (min-width: 550px) {
  .markdown-preview.markdown-preview .flotante_izq {
    width: auto;
  }
}
@media (max-width: 550px) {
  .markdown-preview.markdown-preview .flotante_der {
    width: 100%;
  }
}
@media (min-width: 550px) {
  .markdown-preview.markdown-preview .flotante_der {
    width: auto;
  }
}
.markdown-preview.markdown-preview .galeria_imagenes {
  display: flex;
  justify-content: space-evenly;
  align-items: center;
  margin-top: 15px;
  margin-bottom: 15px;
}
@media (max-width: 550px) {
  .markdown-preview.markdown-preview .galeria_imagenes {
    flex-direction: column;
  }
}
@media (min-width: 550px) {
  .markdown-preview.markdown-preview .galeria_imagenes {
    flex-direction: row;
  }
}
.markdown-preview.markdown-preview table {
  table-layout: auto !important;
  width: fit-content !important;
  max-width: none !important;
  border-collapse: collapse !important;
}
.markdown-preview.markdown-preview .style-normal {
  text-indent: 0.5cm;
  text-align: justify;
}
.markdown-preview.markdown-preview .style-normal2 {
  text-align: justify;
}
.markdown-preview.markdown-preview .style-example {
  text-align: justify;
  font-size: small;
}
.markdown-preview.markdown-preview .style-title {
  text-indent: 0cm;
  text-align: center;
}
.markdown-preview.markdown-preview .style-list {
  text-indent: 0cm;
  text-align: justify;
}
.markdown-preview.markdown-preview .style-table-content {
  background-color: lightgrey;
}

      </style>
      <!-- The content below will be included at the end of the <head> element. --><script type="text/javascript">
  const configureMermaidIconPacks = () => {
    window["mermaid"].registerIconPacks([
      {
        name: "logos",
        loader: () =>
          fetch("https://unpkg.com/@iconify-json/logos@1/icons.json").then(
            (res) => res.json()
          ),
      },
    ]);
  };

  if (document.readyState !== 'loading') {
    configureMermaidIconPacks();
  } else {
    document.addEventListener("DOMContentLoaded", () => {
      configureMermaidIconPacks();
    });
  }
</script></head><body for="html-export">
    
    
      <div class="crossnote markdown-preview  ">
      
<p><img src="../../../assets/img-BalmisHeader.png" alt="LOGOBALMIS"></p>
<div class="style-title">
<h1 id="dhcp">DHCP </h1>
</div>
<p>📙<a href="./t01.dhcp.pdf">Descargar PDF</a></p>
<h2 id="índice">ÍNDICE </h2>
<div style="background-color: Lightgrey;">

<div class="md-toc">
<details style="padding:0;;padding-left:0px;" open="">
        <summary class="md-toc-link-wrapper">
          <a href="#definición" class="md-toc-link"><p>DEFINICIÓN</p>
</a>
          </summary>
        <div>
          <div class="md-toc-link-wrapper" style="padding:0;;display:list-item;list-style:square;margin-left:42px">
          <a href="#parametros-de-configuración" class="md-toc-link">
            <p>PARAMETROS DE CONFIGURACIÓN</p>

          </a></div><div class="md-toc-link-wrapper" style="padding:0;;display:list-item;list-style:square;margin-left:42px">
          <a href="#tipos-de-asignaciones" class="md-toc-link">
            <p>TIPOS DE ASIGNACIONES</p>

          </a></div><details style="padding:0;;padding-left:24px;" open="">
        <summary class="md-toc-link-wrapper">
          <a href="#mensajes" class="md-toc-link"><p>MENSAJES</p>
</a>
          </summary>
        <div>
          <div class="md-toc-link-wrapper" style="padding:0;;display:list-item;list-style:square;margin-left:42px">
          <a href="#formato" class="md-toc-link">
            <p>FORMATO</p>

          </a></div><div class="md-toc-link-wrapper" style="padding:0;;display:list-item;list-style:square;margin-left:42px">
          <a href="#tipos" class="md-toc-link">
            <p>TIPOS</p>

          </a></div>
        </div>
      </details>
    <div class="md-toc-link-wrapper" style="padding:0;;display:list-item;list-style:square;margin-left:42px">
          <a href="#ciclo-de-vida" class="md-toc-link">
            <p>CICLO DE VIDA</p>

          </a></div><div class="md-toc-link-wrapper" style="padding:0;;display:list-item;list-style:square;margin-left:42px">
          <a href="#dhcp-relay" class="md-toc-link">
            <p>DHCP RELAY</p>

          </a></div>
        </div>
      </details>
    
</div>
</div>
<div style="page-break-after:always;"></div>
<h2 id="introducción">INTRODUCCIÓN </h2>
<div class="style-normal">
<h1 id="definición">DEFINICIÓN </h1>
<p>El protocolo <strong>DHCP</strong> (<em>Dynamic Host Configuration Protocol</em>, <a href="https://www.rfc-editor.org/rfc/rfc2131">RFC 2131</a>), o protocolo de configuración dinámica de host, proporciona un mecanismo rápido de configuración de red mediante un <strong>modelo cliente-servidor</strong>. DHCP es una versión avanzada del protocolo <strong>BOOTP</strong> (<em>Bootstrap Protocol</em>, <a href="https://www.rfc-editor.org/rfc/rfc951">RFC 951</a>), el cual era utilizado por los clientes de la red para obtener también una dirección IP y la información del proceso de arranque en el nodo.</p>
<p>El protocolo DHCP utiliza los siguientes <strong>puertos UDP</strong> (<em>User Datagram Protocol</em>) :</p>
<div class="style-list">
<ul>
<li><strong>67</strong> (servidor)</li>
<li><strong>68</strong> (cliente)</li>
</ul>
</div>
<p>Los <strong>nodos clientes solicitan a</strong> uno o varios <strong>servidores DHCP</strong> de su red los <strong>parámetros de configuración</strong> para las interfaces de red configuradas en modo DHCP. De manera general, los servidores DHCP <strong>alquilan</strong> (<em>lease</em>) la configuración a los clientes durante un tiempo concesión determinado. Una vez finalizado el tiempo de concesión, los clientes deben: <strong>renovar</strong> o <strong>liberar</strong> la concesión.</p>
<p><strong>Ventajas</strong></p>
<div class="style-list">
<ul>
<li>Se reduce el trabajo de administración.</li>
<li>Se centraliza la configuración de red.</li>
<li>Se reducen los errores de configuración.</li>
<li>Se disminuyen los conflictos de direcciones IP en la red.</li>
<li>Los nodos clientes configurados como DHCP pueden cambiar a otra red sin necesidad de reconfigurar los adaptadores.</li>
</ul>
</div>
</div>
<h2 id="parametros-de-configuración">PARAMETROS DE CONFIGURACIÓN </h2>
<div class="style-normal">
<p>Un cliente DHCP puede recibir del servidor diversos parámetros de configuración de red. Algunos de estos parámetros son <strong>obligatorios</strong>, mientras que otros son <strong>opcionales</strong> y pueden ser configurados por el servidor si son solicitados por los clientes.</p>
<p><strong>Parámetros obligatorios</strong></p>
<dic class="style-list">
<ul>
<li>Dirección IP del cliente</li>
<li>Máscara de subred</li>
<li>Tiempo de concesión (<em>Allocation time</em>)</li>
<li>Tiempo de renovación (<em>Renewal time</em>)</li>
<li>Tiempo de reconexión (<em>Rebinding time</em>)</li>
</ul>
</dic></div>
<dic class="style-list">
<p><strong>Parámetros opcionales</strong></p>
<ul>
<li>Dirección IP de la puerta de enlace</li>
<li>Direcciones IP de los servidores DNS</li>
<li>Dirección IP de broadcast de la red</li>
<li>Nombre (sufijo) del dominio DNS</li>
<li>Tipo de nodo WINS/NBT y servidor WINS para nodos Windows</li>
<li>MTU de la interfaz de red</li>
</ul>


<h2 id="tipos-de-asignaciones">TIPOS DE ASIGNACIONES </h2>
<div class="style-normal">
<p>El tipo de asignación es el mecanismo mediante el cual un servidor DHCP decide qué configuración de red debe alquilar a un cliente y por cuánto tiempo. Normalmente, en el nodo servidor se definen uno o más <strong>ámbitos</strong> (redes), donde se configuran las direcciones y parámetros de red que el servidor puede alquilar. Por ejemplo, en cada ámbito se puede definir:</p>
<div class="style-list">
<ul>
<li><strong>Rango de asignación</strong><br>
Direcciones que pueden asignarse a los clientes.</li>
<li><strong>Rango de exclusión</strong><br>
Direcciones que no interesa asignar. Un uso habitual es reservarlas para servidores con direcciones estáticas.</li>
</ul>
</div>
<p>El protocolo DHCP permite a los servidores utilizar <strong>tres técnicas de asignación</strong>:</p>
<div class="style-list">
<ol>
<li>
<p><strong>Manual o estática</strong><br>
El servidor <strong>asigna una dirección IP de forma exclusiva para un cliente</strong>. De este modo, el cliente recibe siempre la misma configuración. Normalmente, el servidor asocia la configuración de red con la dirección física (<strong>MAC</strong>) del cliente. Por ejemplo, esta técnica se utiliza para asignar siempre la misma IP a un host (servidores, impresoras, equipos,...)</p>
</li>
<li>
<p><strong>Automática</strong><br>
El servidor <strong>asigna una dirección IP del rango de asignación de forma permanente a cualquier cliente</strong>. La IP no podrá reutilizarse hasta que el cliente envíe un mensaje de renuncia. La ventaja es que fideliza las IPs asignadas, el inconveniente es que si el cliente está apagado mucho tiempo su IP no puede reutilizarse.</p>
</li>
<li>
<p><strong>Dinámica</strong><br>
El servidor <strong>asigna una dirección IP del rango de asignación durante un determinado tiempo de concesión a cualquier cliente</strong>. Para mantener la configuración, el cliente debe renovar la concesión antes de que expire el tiempo. Si el tiempo de concesión se agota y no se ha renovado, entonces la IP vuelve a estar disponible en el rango de asignación del servidor para otros clientes.</p>
</li>
</ol>
</div>
</div>
<h2 id="mensajes">MENSAJES </h2>
<h3 id="formato">FORMATO </h3>
<div class="style-normal">
El formato de los mensajes DHCP es el siguiente:
<p><img src="./assets/img-dhcpmsg.png" alt="img" style="width: 70%; display: block; margin: auto; align:center; "></p>
<div class="style-list">
<ul>
<li><strong>Message Type</strong><br>
Tipo general del mensaje DHCP<br>
1- Request<br>
2- Reply</li>
<li><strong>Hardware Type</strong><br>
Tipo de dirección hardware que se utiliza en el nivel de enlace.</li>
</ul>
<div class="container">
    <div class="row">
        <div class="col-1">
        </div>
        <div class="col-5">
        1- Ethernet<br>
        6- IEEE 802 Networks<br>
        7- ARCNET<br>
        11-LocalTalk<br>
        12-LocalNet<br>
        14-SMDS
        </div>
        <div class="col-6">
        15-Frame Relay<br>
        16-ATM<br>
        17-HDLC<br>
        18-FiberChannel<br>
        19-ATM<br>
        20-Serial Line<br>
        </div>
    </div>
</div>
<ul>
<li><strong>Hardware Length</strong><br>
Longitud en bytes de la dirección hardware. Por ejemplo, para Ethernet o IEEE 802 el valor será 6 porque las direcciones MAC tienen 6 bytes.</li>
<li><strong>Hop Count</strong><br>
Numero de saltos (routers) hasta llegar al servidor DHCP. Los clientes ponen este valor a 0. Este campo es utilizado por los servidores DHCP de tipo RELAY.</li>
<li><strong>Transaction Identifier</strong><br>
Número de 32 bits generado por el nodo cliente para identificar las respuestas recibidas desde los servidores DHCP.</li>
<li><strong>Seconds</strong><br>
Número de segundos transcurridos desde que el cliente va iniciar el intento de adquirir o renovar la concesión de un alquiler.</li>
<li><strong>Flags</strong><br>
B R R R R R R R R R R R R R R R<br>
R-Reserved Flag<br>
Su valor siempre es 0.<br>
B-Broadcast Flag
<ul>
<li>1=Broadcast<br>
Los servidores deben contestar en modo broadcast a nivel de enlace.</li>
<li>0=Unicast<br>
Los servidores deben contestar en modo unicast a nivel de enlace.</li>
</ul>
</li>
<li><strong>Client IP address</strong><br>
IP del nodo cliente. Puede ser 0.0.0.0 si todavía no le han asignado nunca una IP o una IP alquilada con anterioridad.</li>
<li><strong>Your IP address</strong><br>
IP que el servidor quiere conceder al cliente</li>
<li><strong>Server IP address</strong><br>
IP del servidor DHCP. Puede ser 0.0.0.0 cuando el cliente no conoce todavía quien es el servidor.</li>
<li><strong>Gateway IP address</strong><br>
IP del router para hacer DHCP-Relay. No es la IP de la puerta de enlace, esta información se encuentra en un campo de opción.</li>
<li><strong>Cliente Hardware Address</strong><br>
Dirección de nivel de enlace del cliente. En IEEE 802 será la dirección MAC.</li>
<li><strong>Server Name</strong><br>
Nombre del servidor DHCP o en blanco.</li>
<li><strong>Boot file name</strong><br>
Nombre del fichero que se utilizará para el arranque de la maquina o en blanco.</li>
<li><strong>Options</strong><br>
Este campo se inicia con 4 bytes denominados <em>magic cookies</em> que indican el comienzo de las opciones. El valor de <em>magic cookies</em> es: 99(0x63),130(0x82),83(0x53),99(0x63)<br>
Formato campo opcion:<br>
<img src="./assets/img-dhcpoptions.png" alt="img" style="width: 60%; display: block; margin: auto; align:center; "><br>
Podemos obtener un listado completo de todas las opciones del protocolo DHCP en el siguiente enlace: <a href="https://www.iana.org/assignments/bootp-dhcp-parameters/bootp-dhcp-parameters.xhtml">options.</a><br>
Ejemplos:
<ul>
<li>Opción tipo de mensaje DHCP<br>
Option-Type=53<br>
Option-Length=1<br>
Option-Data<br>
1-DHCPDiscover<br>
2-DHCPOffer<br>
3-DHCPRequest<br>
4-DHCPDecline<br>
5-DHCPAck<br>
6-DHCPNack<br>
7-DHCPRelease<br>
8-DHCPInform</li>
<li>Opción máscara de red<br>
Option-Type=1<br>
Option-Length=4<br>
Option-Data=&lt;máscara IP&gt;</li>
<li>Opción Request IP<br>
Option-Type=50<br>
Option-Length=4<br>
Option-Data=IP que el cliente quiere alquilar</li>
<li>Opción End (indica fin de las opciones)<br>
Option-Type=255<br>
Option-Length=No existe el campo<br>
Option-Data=No existe el campo</li>
</ul>
</li>
</ul>
</div>
</div>
<h3 id="tipos">TIPOS </h3>
<div class="style-normal">
Los tipos de mensajes DHCP son:
</div>
<table>
<thead>
<tr>
<th>Mensaje</th>
<th>Descripción</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>DHCPDiscover</strong></td>
<td>Mensaje de un cliente que envia una solicitud para descubrir si hay algún servidor DHCP.</td>
</tr>
<tr>
<td><strong>DHCPOffer</strong></td>
<td>Mensaje de un servidor que ha recibido una solicitud respondiendo al cliente y proponiendole una configuración de red.</td>
</tr>
<tr>
<td><strong>DHCPRequest</strong></td>
<td>Mensaje de un cliente que acepta una de las configuraciones propuestas y se lo comunica al servidor que ha elegido.</td>
</tr>
<tr>
<td><strong>DHCPAck</strong></td>
<td>Mensaje de un servidor que responde al cliente con la configuración de red asignada y el tiempo de concesión de la misma.</td>
</tr>
<tr>
<td><strong>DHCPNack</strong></td>
<td>Mensaje de un servidor que responde al cliente denegandole la configuración de red asiganda. Este mensaje se puede dar por ejemplo durante la renovación de una concesión.</td>
</tr>
<tr>
<td><strong>DHCPDecline</strong></td>
<td>Mensaje de un cliente declinando la configuración asignada por el servidor,.Por ejemplo, porque la IP ya esta siendo utilizada en la red por otro nodo.</td>
</tr>
<tr>
<td><strong>DHCPRelease</strong></td>
<td>Mensaje de un cliente para indicar al servidor ue da por finalizada la concesión. Por ejemplo, se le ha acabado el tiempo de concesión</td>
</tr>
<tr>
<td><strong>DHCPInform</strong></td>
<td>Mensaje de un cliente para solicitar al servidor parametros adicionales de configuración</td>
</tr>
</tbody>
</table>
<h2 id="ciclo-de-vida">CICLO DE VIDA </h2>
<div class="style-normal">
El proceso de concesión DHCP sigue un ciclo de vida durante el que los nodos se pueden encontrar en alguna de estas fases:
</div>
<ul>
<li>
<p><strong>Concesión (<em>Allocation</em>)</strong><br>
Un cliente sin ninguna concesión activa. Por ejemplo, acaba de arrancar el nodo por primera vez en la red. El cliente adquiere una concesión a través de un proceso de asignación denominado <strong>D.O.R.A</strong> (Discover,Offer,Request,Ack)</p>
<div class="admonition example">
<p class="admonition-title">D.O.R.A</p>
<p><img src="./assets/img-dora.png" alt="img" style="width: 100%; display: block; margin: auto; align:center; "><br>
En los mensajes Offer y Ack la dirección MAC destino puede ser la MAC del cliente si en el mensaje original el flag B=0. Eso le indica que el cliente DHCP es capaz de recibir mensajes unicast a nivel de enlace.</p>
</div>
</li>
<li>
<p><strong>Reasignación (<em>Reallocation</em>)</strong><br>
Si el cliente ya tiene una concesión activa, cuando se vuelve a activar la interfaz (se ha reiniciado, se ha deshabilitado,..) se podrá en contacto con el servidor DHCP que le otorgó la concesión para confirmar de nuevo los parametros de configuración que ya disponia. A veces, se denomina redistribución, es similar al proceso de asignación pero más corto.</p>
</li>
<li>
<p><strong>Vinculación (<em>Bound</em>)</strong><br>
El cliente tiene una concesión activa y la está utilizando en la configuración de su interfaz de red.</p>
</li>
<li>
<p><strong>Renovación (<em>Renewal</em>)</strong><br>
El cliente durante el estado de vinculación, pasado un cierto tiempo de concesión (<em>renewal time</em>) y antes de que la concesión expire, trata de contactar con el servidor DHCP que le asignó la concesión para renovarla. Al renvocar la concesión se le asigna más tiempo de concesión y se pueden utilizar los parámetros iniciales. Esta fase se realiza solamente con mensajes Request y ACK.</p>
<div class="admonition example">
<p class="admonition-title">Renewal</p>
<p><img src="./assets/img-dhcprenewal.png" alt="img" style="width: 100%; display: block; margin: auto; align:center; "></p>
</div>
</li>
<li>
<p><strong>Reconexión (<em>Rebinding</em>)</strong><br>
El cliente durante el estado de vinculación si la renovación con el servidor DHCP no funciona y pasado el tiempo de reconexión (<em>rebinding time</em>) trata de vincularse con cualquier otro servidor DHCP que le permita extender su concesión.</p>
</li>
<li>
<p><strong>Liberación (<em>Release</em>)</strong><br>
El cliente puede decidir en cualquier momento que ya no quiere utilizar la configuración de red asignada, que quiere finalizar la concesión y liberar la IP asignada. Esto se realiza mediante un mensaje de tipo Release.</p>
</li>
</ul>
<div class="admonition note">
<p class="admonition-title">Ejemplo temporizadores</p>
<p><img src="./assets/img-temporizadores.png" alt="img" style="width: 80%; display: block; margin: auto; align:center; "></p>
</div>
<div class="style-normal" style="font-size: xx-small;">
<p>La figura ilustra el ciclo de vida de DHCP con un ejemplo que abarca tres contratos de arrendamiento. En este ejemplo, el contrato inicial tiene una duración (allocation) de 8 días y comienza en el día 0. Los temporizadores T1 (renovación) y T2 (reconexión) están establecidos en 4 días y 7 días respectivamente. Cuando el temporizador T1 expira, el cliente entra en el período de renovación (renewal), y con éxito se renueva en el día 5 con un nuevo contrato de arrendamiento de 8 días. Cuando el temporizador T1 vuelve a expirar después de 4 días, el cliente no puede renovar con el servidor original. Se entra en el período de reconexión (rebinding) cuando su temporizador T2 se apaga, y se concede una renovación (renewal) de 8 días de arrendamiento con un servidor diferente. Tras 3 días en este contrato de arrendamiento, el cliente se mueve a una red diferente y ya no necesita la dirección concedida, por lo que voluntariamente la libera (release).</p>
</div>
<p><strong>Esquema del Ciclo de Vida</strong></p>
<p><img src="./assets/img-ciclovida.png" alt="img" style="width: 80%; display: block; margin: auto; align:center; "></p>
<table>
<thead>
<tr>
<th>Estado</th>
<th>Descripción</th>
<th>Transición</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>INIT</strong></td>
<td>Estado de inicialización, el cliente comienza el proceso de adquisición de un arrendamiento. También regresa aquí cuando finaliza un contrato de arrendamiento o falla una negociación.</td>
<td>El cliente crea un mensaje DHCPDISCOVER y lo emite para intentar encontrar un servidor DHCP. Pasa al estado SELECTING.</td>
</tr>
<tr>
<td><strong>SELECTING</strong></td>
<td>El cliente espera recibir mensajes DHCPOFFER de uno o más servidores DHCP para poder elegir uno.</td>
<td>El cliente elige una de las ofertas recibidas y emite un mensaje DHCPREQUEST para notificar su elección. Pasa al estado REQUESTING.</td>
</tr>
<tr>
<td><strong>REQUESTING</strong></td>
<td>El cliente espera una respuesta del servidor al que envió su solicitud.</td>
<td>1. Recibe DHCPACK, verifica que la IP no esté en uso, registra parámetros y pasa a BOUND.<br> 2. Recibe DHCPACK pero la IP está en uso, envía DHCPDECLINE y vuelve a INIT.<br> 3. Recibe DHCPNAK, el servidor retira la oferta, vuelve a INIT.</td>
</tr>
<tr>
<td><strong>INIT-REBOOT</strong></td>
<td>Cuando un cliente con arrendamiento válido se reinicia, comienza aquí en lugar de INIT.</td>
<td>El cliente envía DHCPREQUEST para verificar su arrendamiento y pasa a REBOOTING.</td>
</tr>
<tr>
<td><strong>REBOOTING</strong></td>
<td>Cliente reiniciado con IP asignada espera confirmación del servidor.</td>
<td>1. Recibe DHCPACK, verifica IP libre, registra parámetros y pasa a BOUND.<br> 2. Recibe DHCPACK pero IP está en uso, envía DHCPDECLINE y vuelve a INIT.<br> 3. Recibe DHCPNAK, arrendamiento no válido, vuelve a INIT.</td>
</tr>
<tr>
<td><strong>BOUND</strong></td>
<td>Cliente con arrendamiento válido en estado normal.</td>
<td>1. Temporizador T1 expira, pasa a RENEWING.<br> 2. Cliente libera arrendamiento, envía DHCPRELEASE y vuelve a INIT.</td>
</tr>
<tr>
<td><strong>RENEWING</strong></td>
<td>Cliente intenta renovar su arrendamiento actual.</td>
<td>1. Recibe DHCPACK, renueva arrendamiento y vuelve a BOUND.<br> 2. Recibe DHCPNAK, servidor rechaza renovación, vuelve a INIT.<br> 3. Temporizador T2 expira, pasa a REBINDING.</td>
</tr>
<tr>
<td><strong>REBINDING</strong></td>
<td>Cliente no pudo renovar con el servidor original y solicita extensión a cualquier servidor disponible.</td>
<td>1. Otro servidor renueva arrendamiento, cliente reinicia temporizadores y vuelve a BOUND.<br> 2. Recibe DHCPNAK, servidor indica reiniciar proceso, vuelve a INIT.<br> 3. No recibe respuesta antes de expiración, vuelve a INIT.</td>
</tr>
</tbody>
</table>
<div class="style-normal">
En algunos sistemas cuando el proceso de concesión DHCP falla y para no dejar la interfaz sin IP (0.0.0.0) el sistema operativo le asigna a la interfaz una IP del rango APIPA 169.254.0.0/16 que tiene ámbito privado de enlace.
</div>
<h2 id="dhcp-relay">DHCP RELAY </h2>
<div class="style-normal">
<p>En las redes pequeñas normalmente se utilizan mensajes DHCP de tipo <strong>broadcast</strong>, concretamente en los <strong>DHCPDiscover</strong>. Los mensajes de broadcast (255.255.255.255) <strong>no son encaminados por los routers</strong>, por lo tanto, <strong>cada segmento de red necesita un servidor DHCP</strong> que proporcione servicio a ese segmento.</p>
<p>No obstante, en algunas circunstancias se puede utilizar la configuración denominada <strong>DHCP Relaying</strong> (<a href="https://www.rfc-editor.org/rfc/rfc1542">RFC 1542</a>), en la que un servidor DHCP puede dar servicio a varias subredes. Dicho de otra forma, las redes tienen un único servidor DHCP que ofrece direcciones IP para distintas subredes.</p>
<p><strong>¿Cómo funciona?</strong></p>
<p>La solución consiste en utilizar <strong>agentes DHCP Relay</strong> o de retransmisión. Un agente DHCP Relay es un servidor DHCP ligero en modo Relay que escucha las solicitudes DHCP que se producen y las <strong>encamina hacia otro servidor DHCP</strong> que se encuentra en otra red para que este las atienda. El servidor DHCP responderá con un mensaje que enviará al agente de retransmisión, y este lo <strong>trasladará al cliente</strong> que hizo la petición. En el agente DHCP Relay:</p>
</div>
<ul>
<li>La solicitud <strong>broadcast (DHCPDiscover)</strong> del cliente se convierte en una solicitud <strong>unicast</strong> dirigida a un servidor DHCP específico.</li>
<li>El campo <strong>“gateway IP Address”</strong> se utiliza para identificar al agente DHCP Relay ante el servidor DHCP.</li>
</ul>
<div class="style-normal">
<p>Finalmente, el servidor DHCP responde con un mensaje <strong>DHCPOffer</strong> de tipo <strong>unicast</strong> al agente DHCP Relay, que lo reenvía a su red. Este mismo proceso se aplica a los mensajes <strong>DHCPRequest</strong>, <strong>DHCPAck</strong> y el resto de mensajes DHCP.</p>
<p><img src="./assets/img-relay.png" alt="img" style="width: 80%; display: block; margin: auto; align:center; "></p>
</div>
</dic>
      </div>
      
      
    
    
    
    
    
    
  
    </body></html>