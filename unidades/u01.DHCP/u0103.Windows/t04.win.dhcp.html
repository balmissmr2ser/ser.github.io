<!DOCTYPE html><html><head>
      <title>SER - Windows DHCP Server</title>
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      
      <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.22/dist/katex.min.css">
      
      
      
      
      
      <style>
      @import url(https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css);
code[class*=language-],pre[class*=language-]{color:#333;background:0 0;font-family:Consolas,"Liberation Mono",Menlo,Courier,monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.4;-moz-tab-size:8;-o-tab-size:8;tab-size:8;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none}pre[class*=language-]{padding:.8em;overflow:auto;border-radius:3px;background:#f5f5f5}:not(pre)>code[class*=language-]{padding:.1em;border-radius:.3em;white-space:normal;background:#f5f5f5}.token.blockquote,.token.comment{color:#969896}.token.cdata{color:#183691}.token.doctype,.token.macro.property,.token.punctuation,.token.variable{color:#333}.token.builtin,.token.important,.token.keyword,.token.operator,.token.rule{color:#a71d5d}.token.attr-value,.token.regex,.token.string,.token.url{color:#183691}.token.atrule,.token.boolean,.token.code,.token.command,.token.constant,.token.entity,.token.number,.token.property,.token.symbol{color:#0086b3}.token.prolog,.token.selector,.token.tag{color:#63a35c}.token.attr-name,.token.class,.token.class-name,.token.function,.token.id,.token.namespace,.token.pseudo-class,.token.pseudo-element,.token.url-reference .token.variable{color:#795da3}.token.entity{cursor:help}.token.title,.token.title .token.punctuation{font-weight:700;color:#1d3e81}.token.list{color:#ed6a43}.token.inserted{background-color:#eaffea;color:#55a532}.token.deleted{background-color:#ffecec;color:#bd2c00}.token.bold{font-weight:700}.token.italic{font-style:italic}.language-json .token.property{color:#183691}.language-markup .token.tag .token.punctuation{color:#333}.language-css .token.function,code.language-css{color:#0086b3}.language-yaml .token.atrule{color:#63a35c}code.language-yaml{color:#183691}.language-ruby .token.function{color:#333}.language-markdown .token.url{color:#795da3}.language-makefile .token.symbol{color:#795da3}.language-makefile .token.variable{color:#183691}.language-makefile .token.builtin{color:#0086b3}.language-bash .token.keyword{color:#0086b3}pre[data-line]{position:relative;padding:1em 0 1em 3em}pre[data-line] .line-highlight-wrapper{position:absolute;top:0;left:0;background-color:transparent;display:block;width:100%}pre[data-line] .line-highlight{position:absolute;left:0;right:0;padding:inherit 0;margin-top:1em;background:hsla(24,20%,50%,.08);background:linear-gradient(to right,hsla(24,20%,50%,.1) 70%,hsla(24,20%,50%,0));pointer-events:none;line-height:inherit;white-space:pre}pre[data-line] .line-highlight:before,pre[data-line] .line-highlight[data-end]:after{content:attr(data-start);position:absolute;top:.4em;left:.6em;min-width:1em;padding:0 .5em;background-color:hsla(24,20%,50%,.4);color:#f4f1ef;font:bold 65%/1.5 sans-serif;text-align:center;vertical-align:.3em;border-radius:999px;text-shadow:none;box-shadow:0 1px #fff}pre[data-line] .line-highlight[data-end]:after{content:attr(data-end);top:auto;bottom:.4em}html body{font-family:'Helvetica Neue',Helvetica,'Segoe UI',Arial,freesans,sans-serif;font-size:16px;line-height:1.6;color:#333;background-color:#fff;overflow:initial;box-sizing:border-box;word-wrap:break-word}html body>:first-child{margin-top:0}html body h1,html body h2,html body h3,html body h4,html body h5,html body h6{line-height:1.2;margin-top:1em;margin-bottom:16px;color:#000}html body h1{font-size:2.25em;font-weight:300;padding-bottom:.3em}html body h2{font-size:1.75em;font-weight:400;padding-bottom:.3em}html body h3{font-size:1.5em;font-weight:500}html body h4{font-size:1.25em;font-weight:600}html body h5{font-size:1.1em;font-weight:600}html body h6{font-size:1em;font-weight:600}html body h1,html body h2,html body h3,html body h4,html body h5{font-weight:600}html body h5{font-size:1em}html body h6{color:#5c5c5c}html body strong{color:#000}html body del{color:#5c5c5c}html body a:not([href]){color:inherit;text-decoration:none}html body a{color:#08c;text-decoration:none}html body a:hover{color:#00a3f5;text-decoration:none}html body img{max-width:100%}html body>p{margin-top:0;margin-bottom:16px;word-wrap:break-word}html body>ol,html body>ul{margin-bottom:16px}html body ol,html body ul{padding-left:2em}html body ol.no-list,html body ul.no-list{padding:0;list-style-type:none}html body ol ol,html body ol ul,html body ul ol,html body ul ul{margin-top:0;margin-bottom:0}html body li{margin-bottom:0}html body li.task-list-item{list-style:none}html body li>p{margin-top:0;margin-bottom:0}html body .task-list-item-checkbox{margin:0 .2em .25em -1.8em;vertical-align:middle}html body .task-list-item-checkbox:hover{cursor:pointer}html body blockquote{margin:16px 0;font-size:inherit;padding:0 15px;color:#5c5c5c;background-color:#f0f0f0;border-left:4px solid #d6d6d6}html body blockquote>:first-child{margin-top:0}html body blockquote>:last-child{margin-bottom:0}html body hr{height:4px;margin:32px 0;background-color:#d6d6d6;border:0 none}html body table{margin:10px 0 15px 0;border-collapse:collapse;border-spacing:0;display:block;width:100%;overflow:auto;word-break:normal;word-break:keep-all}html body table th{font-weight:700;color:#000}html body table td,html body table th{border:1px solid #d6d6d6;padding:6px 13px}html body dl{padding:0}html body dl dt{padding:0;margin-top:16px;font-size:1em;font-style:italic;font-weight:700}html body dl dd{padding:0 16px;margin-bottom:16px}html body code{font-family:Menlo,Monaco,Consolas,'Courier New',monospace;font-size:.85em;color:#000;background-color:#f0f0f0;border-radius:3px;padding:.2em 0}html body code::after,html body code::before{letter-spacing:-.2em;content:'\00a0'}html body pre>code{padding:0;margin:0;word-break:normal;white-space:pre;background:0 0;border:0}html body .highlight{margin-bottom:16px}html body .highlight pre,html body pre{padding:1em;overflow:auto;line-height:1.45;border:#d6d6d6;border-radius:3px}html body .highlight pre{margin-bottom:0;word-break:normal}html body pre code,html body pre tt{display:inline;max-width:initial;padding:0;margin:0;overflow:initial;line-height:inherit;word-wrap:normal;background-color:transparent;border:0}html body pre code:after,html body pre code:before,html body pre tt:after,html body pre tt:before{content:normal}html body blockquote,html body dl,html body ol,html body p,html body pre,html body ul{margin-top:0;margin-bottom:16px}html body kbd{color:#000;border:1px solid #d6d6d6;border-bottom:2px solid #c7c7c7;padding:2px 4px;background-color:#f0f0f0;border-radius:3px}@media print{html body{background-color:#fff}html body h1,html body h2,html body h3,html body h4,html body h5,html body h6{color:#000;page-break-after:avoid}html body blockquote{color:#5c5c5c}html body pre{page-break-inside:avoid}html body table{display:table}html body img{display:block;max-width:100%;max-height:100%}html body code,html body pre{word-wrap:break-word;white-space:pre}}.markdown-preview{width:100%;height:100%;box-sizing:border-box}.markdown-preview ul{list-style:disc}.markdown-preview ul ul{list-style:circle}.markdown-preview ul ul ul{list-style:square}.markdown-preview ol{list-style:decimal}.markdown-preview ol ol,.markdown-preview ul ol{list-style-type:lower-roman}.markdown-preview ol ol ol,.markdown-preview ol ul ol,.markdown-preview ul ol ol,.markdown-preview ul ul ol{list-style-type:lower-alpha}.markdown-preview .newpage,.markdown-preview .pagebreak{page-break-before:always}.markdown-preview pre.line-numbers{position:relative;padding-left:3.8em;counter-reset:linenumber}.markdown-preview pre.line-numbers>code{position:relative}.markdown-preview pre.line-numbers .line-numbers-rows{position:absolute;pointer-events:none;top:1em;font-size:100%;left:0;width:3em;letter-spacing:-1px;border-right:1px solid #999;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.markdown-preview pre.line-numbers .line-numbers-rows>span{pointer-events:none;display:block;counter-increment:linenumber}.markdown-preview pre.line-numbers .line-numbers-rows>span:before{content:counter(linenumber);color:#999;display:block;padding-right:.8em;text-align:right}.markdown-preview .mathjax-exps .MathJax_Display{text-align:center!important}.markdown-preview:not([data-for=preview]) .code-chunk .code-chunk-btn-group{display:none}.markdown-preview:not([data-for=preview]) .code-chunk .status{display:none}.markdown-preview:not([data-for=preview]) .code-chunk .output-div{margin-bottom:16px}.markdown-preview .md-toc{padding:0}.markdown-preview .md-toc .md-toc-link-wrapper .md-toc-link{display:inline;padding:.25rem 0}.markdown-preview .md-toc .md-toc-link-wrapper .md-toc-link div,.markdown-preview .md-toc .md-toc-link-wrapper .md-toc-link p{display:inline}.markdown-preview .md-toc .md-toc-link-wrapper.highlighted .md-toc-link{font-weight:800}.scrollbar-style::-webkit-scrollbar{width:8px}.scrollbar-style::-webkit-scrollbar-track{border-radius:10px;background-color:transparent}.scrollbar-style::-webkit-scrollbar-thumb{border-radius:5px;background-color:rgba(150,150,150,.66);border:4px solid rgba(150,150,150,.66);background-clip:content-box}html body[for=html-export]:not([data-presentation-mode]){position:relative;width:100%;height:100%;top:0;left:0;margin:0;padding:0;overflow:auto}html body[for=html-export]:not([data-presentation-mode]) .markdown-preview{position:relative;top:0;min-height:100vh}@media screen and (min-width:914px){html body[for=html-export]:not([data-presentation-mode]) .markdown-preview{padding:2em calc(50% - 457px + 2em)}}@media screen and (max-width:914px){html body[for=html-export]:not([data-presentation-mode]) .markdown-preview{padding:2em}}@media screen and (max-width:450px){html body[for=html-export]:not([data-presentation-mode]) .markdown-preview{font-size:14px!important;padding:1em}}@media print{html body[for=html-export]:not([data-presentation-mode]) #sidebar-toc-btn{display:none}}html body[for=html-export]:not([data-presentation-mode]) #sidebar-toc-btn{position:fixed;bottom:8px;left:8px;font-size:28px;cursor:pointer;color:inherit;z-index:99;width:32px;text-align:center;opacity:.4}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] #sidebar-toc-btn{opacity:1}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc{position:fixed;top:0;left:0;width:300px;height:100%;padding:32px 0 48px 0;font-size:14px;box-shadow:0 0 4px rgba(150,150,150,.33);box-sizing:border-box;overflow:auto;background-color:inherit}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc::-webkit-scrollbar{width:8px}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc::-webkit-scrollbar-track{border-radius:10px;background-color:transparent}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc::-webkit-scrollbar-thumb{border-radius:5px;background-color:rgba(150,150,150,.66);border:4px solid rgba(150,150,150,.66);background-clip:content-box}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc a{text-decoration:none}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc .md-toc{padding:0 16px}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc .md-toc .md-toc-link-wrapper .md-toc-link{display:inline;padding:.25rem 0}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc .md-toc .md-toc-link-wrapper .md-toc-link div,html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc .md-toc .md-toc-link-wrapper .md-toc-link p{display:inline}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc .md-toc .md-toc-link-wrapper.highlighted .md-toc-link{font-weight:800}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .markdown-preview{left:300px;width:calc(100% - 300px);padding:2em calc(50% - 457px - 300px / 2);margin:0;box-sizing:border-box}@media screen and (max-width:1274px){html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .markdown-preview{padding:2em}}@media screen and (max-width:450px){html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .markdown-preview{width:100%}}html body[for=html-export]:not([data-presentation-mode]):not([html-show-sidebar-toc]) .markdown-preview{left:50%;transform:translateX(-50%)}html body[for=html-export]:not([data-presentation-mode]):not([html-show-sidebar-toc]) .md-sidebar-toc{display:none}@font-face{font-family:"Material Icons";font-style:normal;font-weight:400;src:local("Material Icons"),local("MaterialIcons-Regular"),url("data:application/x-font-woff;charset=utf-8;base64,d09GRgABAAAAAAfIAAsAAAAADDAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAABHU1VCAAABCAAAADMAAABCsP6z7U9TLzIAAAE8AAAARAAAAFZW7kosY21hcAAAAYAAAADTAAACjtP6ytBnbHlmAAACVAAAAxgAAAQ4zRtvlGhlYWQAAAVsAAAALwAAADYRwZsnaGhlYQAABZwAAAAcAAAAJAeKAzxobXR4AAAFuAAAABIAAAA8OGQAAGxvY2EAAAXMAAAAIAAAACAG5AfwbWF4cAAABewAAAAfAAAAIAEfAERuYW1lAAAGDAAAAVcAAAKFkAhoC3Bvc3QAAAdkAAAAYgAAAK2vz7wkeJxjYGRgYOBikGPQYWB0cfMJYeBgYGGAAJAMY05meiJQDMoDyrGAaQ4gZoOIAgCKIwNPAHicY2BkPsQ4gYGVgYOpk+kMAwNDP4RmfM1gxMjBwMDEwMrMgBUEpLmmMDgwVLy4xKzzX4chhrmK4QpQmBEkBwAZygyweJzFkr0NwjAQhZ+TEP6CRUfHBEwRUWaQTICyQbpMwRCskA5RUIONxG0RnnNpKAIV4qzPku/8c353ACYAYrIjCWCuMAh2ptf0/hiL3p/gyPUWa3osqlt0L1zu9r71z8dGrJRykFoauXQd932Lj5vhG+MjxGeYI8MKETObMpslf5EyP8tg+vHun5r539PvlvXzaVhRFVQDTPEWKVQR90KhnnC5Ek67vUKN4VuFasM/ldARj43CCkCsEjpJSoVVgRyU0GVSK6wUpFFCx8lFgX0BiXpRPQB4nE2TTWjcRhTH3xttpDhxN7uxPlp3u/FK7moRPixafRijNosxSw/LUsIwNcaEHPZggo/FmEKMCKWU4kNOOftQSlhE8alnH0Ix9BqWnHooPRrTQ0+mnu2bXTu2pPdGM9LM/6c3fwECTM4gBBMYQNqxzLrZAjqYSlqu2TAHZQA0/DQJH6FtzqGDnvbt4Ggwvzw/nL8EfH8kW0fsuRqhgWXZnY7M1picaUL7Du5BHeDzMIl83dAt016wH1qmvtSMo5R6YRJHTR//FXsff/nj/tc/5K9P5d+nP22+fFK5u7v3K39SW3y+OtDKO3L85vD09PD9z5X17a2N1g4tqk01RlqX7gyoEmnsWQtVr4rtZMmukEaFBZxzefkCn11cyKMLZgshRwgTYNoLNXCBz2ja7HvZG7hDpPSNfoo5vs0knK/9hb+rNpu+8kHPgk/Ao4kK3tWtTpSEtvkA9c+wE6UaUdwieNkaHg55tBEtRiEPw1s0+FtrtTcc9two2lhMknV7PZF/cs6+uUFTmpTGbEx7sQCPSLOttHS3GRltqp7SNzVSKzl6aWnZT/CX5k6/v9N3Hh8fHBwffJVjhrC6OgH5dkIt/tPsq+d/PD5Qz7G7efzq1THFjdZVPe/N6ulQ3JnDWSE5junsFsVIiFwL/htf1S5gJ3BfOcUxfHKLnzqpFpyfZ9cX+/5WB6a+Y0pHpzkNrYNVDwMsikK+y7WuLCRg/oFHkA8VT3rDg5ZnU6ktzzINymV0m74Xd5pfIGXyFeVEQSShkzqG7TBBa2OxVRKitLXv7h3uuftXnXq7lz2tZ/WnWa9dx9dCjDhHzmuVQATlmljr9dZErUydSo2Hbi/b1vXtrOeGCk2/8s3ZlO8+ueJT8BVlw5pGw2oYccdSiHHqx0RlabHqdNR9jAETl6PreJcPBnnfpTLnOQ8C3OV8AmQGzouV1iZdeb5SSIoVc8W8/kcDtksUH5FrU6/aqBqNWcMEzxG4DAQ14qRQhi9mWU0rzepKezbjfgCwQKxVYq5ajRgpRqy45CqwkJydcEkbTkvRz8P5/2ZpDTN4nGNgZGBgAOKb6v+/xvPbfGXgZmEAgeuB2kkI+v8bFgbmKiCXg4EJJAoAPyAKhQB4nGNgZGBg1vmvwxDDwgACQJKRARXwAwAzZQHQeJxjYQCCFAYGFgbSMQAcWACdAAAAAAAAAAwALgBgAIQAmADSAQgBIgE8AVABoAHeAfwCHHicY2BkYGDgZ7BgYGMAASYg5gJCBob/YD4DAA/hAWQAeJxlkbtuwkAURMc88gApQomUJoq0TdIQzEOpUDokKCNR0BuzBiO/tF6QSJcPyHflE9Klyyekz2CuG8cr7547M3d9JQO4xjccnJ57vid2cMHqxDWc40G4Tv1JuEF+Fm6ijRfhM+oz4Ra6eBVu4wZvvMFpXLIa40PYQQefwjVc4Uu4Tv1HuEH+FW7i1mkKn6Hj3Am3sHC6wm08Ou8tpSZGe1av1PKggjSxPd8zJtSGTuinyVGa6/Uu8kxZludCmzxMEzV0B6U004k25W35fj2yNlCBSWM1paujKFWZSbfat+7G2mzc7weiu34aczzFNYGBhgfLfcV6iQP3ACkSaj349AxXSN9IT0j16JepOb01doiKbNWt1ovippz6sVYYwsXgX2rGVFIkq7Pl2PNrI6qW6eOshj0xaSq9mpNEZIWs8LZUfOouNkVXxp/d5woqebeYIf4D2J1ywQB4nG3LOw6AIBAE0B384B+PAkgEa+QwNnYmHt+EpXSal5lkSBBnoP8oCFSo0aCFRIceA0ZMmLFAYSW88rmvtMUjG3RiQ9HvpfusM6zWNmtc5H/iPewha50tOt5PS/QBx2IeSwAA") format("woff")}.admonition{box-shadow:0 2px 2px 0 rgba(0,0,0,.14),0 1px 5px 0 rgba(0,0,0,.12),0 3px 1px -2px rgba(0,0,0,.2);position:relative;margin:1.5625em 0;padding:0 1.2rem;border-left:.4rem solid rgba(68,138,255,.8);border-radius:.2rem;background-color:rgba(255,255,255,.05);overflow:auto}.admonition>p{margin-top:.8rem}.admonition>.admonition-title{margin:0 -1.2rem;padding:.8rem 1.2rem .8rem 3.6rem;border-bottom:1px solid rgba(68,138,255,.2);background-color:rgba(68,138,255,.1);font-weight:700}.admonition>.admonition-title:before{position:absolute;left:1.2rem;font-size:1.5rem;color:rgba(68,138,255,.8);content:"\E3C9"}.admonition>.admonition-title:before{font-family:Material Icons;font-style:normal;font-variant:normal;font-weight:400;line-height:2rem;text-transform:none;white-space:nowrap;speak:none;word-wrap:normal;direction:ltr}.admonition.abstract,.admonition.summary,.admonition.tldr{border-left-color:rgba(0,176,255,.8)}.admonition.abstract>.admonition-title,.admonition.summary>.admonition-title,.admonition.tldr>.admonition-title{background-color:rgba(0,176,255,.1);border-bottom-color:rgba(0,176,255,.2)}.admonition.abstract>.admonition-title:before,.admonition.summary>.admonition-title:before,.admonition.tldr>.admonition-title:before{color:#00b0ff;content:"\E8D2"}.admonition.hint,.admonition.tip{border-left-color:rgba(0,191,165,.8)}.admonition.hint>.admonition-title,.admonition.tip>.admonition-title{background-color:rgba(0,191,165,.1);border-bottom-color:rgba(0,191,165,.2)}.admonition.hint>.admonition-title:before,.admonition.tip>.admonition-title:before{color:#00bfa5;content:"\E80E"}.admonition.info,.admonition.todo{border-left-color:rgba(0,184,212,.8)}.admonition.info>.admonition-title,.admonition.todo>.admonition-title{background-color:rgba(0,184,212,.1);border-bottom-color:rgba(0,184,212,.2)}.admonition.info>.admonition-title:before,.admonition.todo>.admonition-title:before{color:#00b8d4;content:"\E88E"}.admonition.check,.admonition.done,.admonition.success{border-left-color:rgba(0,200,83,.8)}.admonition.check>.admonition-title,.admonition.done>.admonition-title,.admonition.success>.admonition-title{background-color:rgba(0,200,83,.1);border-bottom-color:rgba(0,200,83,.2)}.admonition.check>.admonition-title:before,.admonition.done>.admonition-title:before,.admonition.success>.admonition-title:before{color:#00c853;content:"\E876"}.admonition.faq,.admonition.help,.admonition.question{border-left-color:rgba(100,221,23,.8)}.admonition.faq>.admonition-title,.admonition.help>.admonition-title,.admonition.question>.admonition-title{background-color:rgba(100,221,23,.1);border-bottom-color:rgba(100,221,23,.2)}.admonition.faq>.admonition-title:before,.admonition.help>.admonition-title:before,.admonition.question>.admonition-title:before{color:#64dd17;content:"\E887"}.admonition.attention,.admonition.caution,.admonition.warning{border-left-color:rgba(255,145,0,.8)}.admonition.attention>.admonition-title,.admonition.caution>.admonition-title,.admonition.warning>.admonition-title{background-color:rgba(255,145,0,.1);border-bottom-color:rgba(255,145,0,.2)}.admonition.attention>.admonition-title:before{color:#ff9100;content:"\E417"}.admonition.caution>.admonition-title:before,.admonition.warning>.admonition-title:before{color:#ff9100;content:"\E002"}.admonition.fail,.admonition.failure,.admonition.missing{border-left-color:rgba(255,82,82,.8)}.admonition.fail>.admonition-title,.admonition.failure>.admonition-title,.admonition.missing>.admonition-title{background-color:rgba(255,82,82,.1);border-bottom-color:rgba(255,82,82,.2)}.admonition.fail>.admonition-title:before,.admonition.failure>.admonition-title:before,.admonition.missing>.admonition-title:before{color:#ff5252;content:"\E14C"}.admonition.bug,.admonition.danger,.admonition.error{border-left-color:rgba(255,23,68,.8)}.admonition.bug>.admonition-title,.admonition.danger>.admonition-title,.admonition.error>.admonition-title{background-color:rgba(255,23,68,.1);border-bottom-color:rgba(255,23,68,.2)}.admonition.danger>.admonition-title:before{color:#ff1744;content:"\E3E7"}.admonition.error>.admonition-title:before{color:#ff1744;content:"\E14C"}.admonition.bug>.admonition-title:before{color:#ff1744;content:"\E868"}.admonition.example,.admonition.snippet{border-left-color:rgba(0,184,212,.8)}.admonition.example>.admonition-title,.admonition.snippet>.admonition-title{background-color:rgba(0,184,212,.1);border-bottom-color:rgba(0,184,212,.2)}.admonition.example>.admonition-title:before,.admonition.snippet>.admonition-title:before{color:#00b8d4;content:"\E242"}.admonition.cite,.admonition.quote{border-left-color:rgba(158,158,158,.8)}.admonition.cite>.admonition-title,.admonition.quote>.admonition-title{background-color:rgba(158,158,158,.1);border-bottom-color:rgba(158,158,158,.2)}.admonition.cite>.admonition-title:before,.admonition.quote>.admonition-title:before{color:#9e9e9e;content:"\E244"}
/* Please visit the URL below for more information: */
/*   https://shd101wyy.github.io/markdown-preview-enhanced/#/customize-css */
/* Please visit the URL below for more information: */
/*   https://shd101wyy.github.io/markdown-preview-enhanced/#/customize-css */

@font-face {
  font-family: 'Catamaran';
  font-style: normal;
  font-weight: 400;
  src: url(https://fonts.gstatic.com/s/catamaran/v28/o-0bIpQoyXQa2RxT7-5B6Ryxs2E_6n1iPHjd5a7dvg.ttf) format('truetype');
}
.markdown-preview.markdown-preview {
  font-family: Verdana, Arial, "Times New Roman", sans-serif;
  font-size: 14px;
}
.markdown-preview.markdown-preview .box_bg_lightgray {
  background-color: #f5f5f5;
  border: 2px solid #969696;
  padding: 15px;
  margin-top: 15px;
  margin-bottom: 15px;
  border-radius: 5px;
  box-shadow: 0 0 7px 0 rgba(78, 120, 158, 0.1);
}
.markdown-preview.markdown-preview .box_bg_lightgreen {
  background-color: #f5faf5;
  border: 2px solid #969b96;
  padding-left: 15px;
  padding-right: 15px;
  margin-top: 15px;
  margin-bottom: 15px;
  border-radius: 5px;
  box-shadow: 0 0 7px 0 rgba(78, 120, 158, 0.1);
}
.markdown-preview.markdown-preview .contenedor {
  display: flex;
  justify-content: center;
  margin: 30px auto 30px auto;
}
.markdown-preview.markdown-preview .fondo {
  background: url(https://ser.smr2.iesdoctorbalmis.info/assets/fondo.png);
  background-size: cover;
  width: 75%;
  height: 160px;
  border-radius: 10px;
  position: relative;
}
.markdown-preview.markdown-preview .cita {
  font-family: Arial;
  font-style: italic;
  font-weight: 600;
  text-align: justify;
  line-height: 1.5rem;
  opacity: 0.6;
  color: white;
  padding: 5rem;
  position: relative;
  top: 50%;
  left: 50%;
  font-size: 1.3rem;
  transform: translate(-50%, -50%);
}
.markdown-preview.markdown-preview .abre_comilla {
  font-family: "Catamaran";
  font-weight: 600;
  color: white;
  padding-left: 30px;
  position: absolute;
  font-size: 6rem;
  transform: translate(0%, -15%);
}
.markdown-preview.markdown-preview .cierra_comilla {
  font-family: "Catamaran";
  font-weight: 600;
  color: white;
  padding-right: 30px;
  right: 0%;
  position: absolute;
  font-size: 6rem;
  transform: translate(0%, 55%);
}
.markdown-preview.markdown-preview .autor {
  font-family: Arial;
  color: white;
  margin: 0px;
  padding-left: 30px;
  position: absolute;
  top: 83%;
  font-size: 1rem;
}
.markdown-preview.markdown-preview .flotante {
  display: flex;
  margin-top: 15px;
  margin-bottom: 15px;
}
@media (max-width: 550px) {
  .markdown-preview.markdown-preview .flotante {
    justify-content: center;
  }
}
@media (min-width: 550px) {
  .markdown-preview.markdown-preview .flotante {
    justify-content: space-between;
  }
}
@media (max-width: 550px) {
  .markdown-preview.markdown-preview .flotante {
    flex-direction: column;
  }
}
@media (min-width: 550px) {
  .markdown-preview.markdown-preview .flotante {
    flex-direction: row;
  }
}
.markdown-preview.markdown-preview .flotante_izq {
  margin-right: 15px;
}
@media (max-width: 550px) {
  .markdown-preview.markdown-preview .flotante_izq {
    width: 100%;
  }
}
@media (min-width: 550px) {
  .markdown-preview.markdown-preview .flotante_izq {
    width: auto;
  }
}
@media (max-width: 550px) {
  .markdown-preview.markdown-preview .flotante_der {
    width: 100%;
  }
}
@media (min-width: 550px) {
  .markdown-preview.markdown-preview .flotante_der {
    width: auto;
  }
}
.markdown-preview.markdown-preview .galeria_imagenes {
  display: flex;
  justify-content: space-evenly;
  align-items: center;
  margin-top: 15px;
  margin-bottom: 15px;
}
@media (max-width: 550px) {
  .markdown-preview.markdown-preview .galeria_imagenes {
    flex-direction: column;
  }
}
@media (min-width: 550px) {
  .markdown-preview.markdown-preview .galeria_imagenes {
    flex-direction: row;
  }
}
.markdown-preview.markdown-preview table {
  table-layout: auto !important;
  width: fit-content !important;
  max-width: none !important;
  border-collapse: collapse;
}
.markdown-preview.markdown-preview .style-normal {
  text-indent: 0.5cm;
  text-align: justify;
}
.markdown-preview.markdown-preview .style-example {
  text-indent: 0.5cm;
  text-align: justify;
  text-size: small;
}
.markdown-preview.markdown-preview .style-title {
  text-indent: 0cm;
  text-align: center;
}
.markdown-preview.markdown-preview .style-list {
  text-indent: 0cm;
  text-align: justify;
}
.markdown-preview.markdown-preview .style-table-content {
  background-color: lightgrey;
}

      </style>
      <!-- The content below will be included at the end of the <head> element. --><script type="text/javascript">
  const configureMermaidIconPacks = () => {
    window["mermaid"].registerIconPacks([
      {
        name: "logos",
        loader: () =>
          fetch("https://unpkg.com/@iconify-json/logos@1/icons.json").then(
            (res) => res.json()
          ),
      },
    ]);
  };

  if (document.readyState !== 'loading') {
    configureMermaidIconPacks();
  } else {
    document.addEventListener("DOMContentLoaded", () => {
      configureMermaidIconPacks();
    });
  }
</script></head><body for="html-export">
    
    
      <div class="crossnote markdown-preview  ">
      
<p><img src="../../../assets/img-BalmisHeader.png" alt="BALMIS"></p>
<div class="style-title">
<h1 id="dhcp-server-br-windows">DHCP SERVER <br> WINDOWS </h1>
</div>
<p>📙<a href="./t04.win.dhcp.pdf">Descargar PDF</a></p>
<h2 id="índice">ÍNDICE </h2>
<div style="background-color: Lightgrey;">

<div class="md-toc">
<details style="padding:0;;padding-left:0px;" open="">
        <summary class="md-toc-link-wrapper">
          <a href="#servidor-dhcp-con-windows-powershell" class="md-toc-link"><p>SERVIDOR DHCP CON WINDOWS POWERSHELL</p>
</a>
          </summary>
        <div>
          <div class="md-toc-link-wrapper" style="padding:0;;display:list-item;list-style:square;margin-left:42px">
          <a href="#comandos-de-instalación-y-configuración" class="md-toc-link">
            <p>COMANDOS DE INSTALACIÓN Y CONFIGURACIÓN</p>

          </a></div><div class="md-toc-link-wrapper" style="padding:0;;display:list-item;list-style:square;margin-left:42px">
          <a href="#comandos-para-mostrar-la-configuración" class="md-toc-link">
            <p>COMANDOS PARA MOSTRAR LA CONFIGURACIÓN</p>

          </a></div><div class="md-toc-link-wrapper" style="padding:0;;display:list-item;list-style:square;margin-left:42px">
          <a href="#comandos-para-cambiar-la-configuración" class="md-toc-link">
            <p>COMANDOS PARA CAMBIAR LA CONFIGURACIÓN</p>

          </a></div><div class="md-toc-link-wrapper" style="padding:0;;display:list-item;list-style:square;margin-left:42px">
          <a href="#comandos-para-eliminar-la-configuración" class="md-toc-link">
            <p>Comandos para eliminar la configuración</p>

          </a></div>
        </div>
      </details>
    <details style="padding:0;;padding-left:0px;" open="">
        <summary class="md-toc-link-wrapper">
          <a href="#clientes-dhcp-en-sistemas-windows" class="md-toc-link"><p>CLIENTES DHCP EN SISTEMAS WINDOWS</p>
</a>
          </summary>
        <div>
          <div class="md-toc-link-wrapper" style="padding:0;;display:list-item;list-style:square;margin-left:42px">
          <a href="#ipconfig" class="md-toc-link">
            <p>IPCONFIG</p>

          </a></div>
        </div>
      </details>
    <div class="md-toc-link-wrapper" style="padding:0;;display:list-item;list-style:square;margin-left:18px">
          <a href="#reenvío-de-peticiones-dhcp-dhcp-relay" class="md-toc-link">
            <p>REENVÍO DE PETICIONES DHCP: DHCP RELAY</p>

          </a></div>
</div>
</div>
<div style="page-break-after:always;"></div>
<h2 id="servidor-dhcp-con-windows-powershell">SERVIDOR DHCP CON WINDOWS POWERSHELL </h2>
<div class="style-normal">
<p>Como ya sabemos, un servidor DHCP proporciona IP a los equipos de una red que están configurados para ello. El servidor DHCP, además de proporcionar una IP, ofrece otros parámetros necesarios para garantizar la conectividad interna y externa de los equipos de la red.<br>
A continuación se muestran una serie de comandos relativos a la administración del servidor DHCP.</p>
</div>
<h3 id="comandos-de-instalación-y-configuración">COMANDOS DE INSTALACIÓN Y CONFIGURACIÓN </h3>
<div class="style-normal">
<p><strong><code>Install-WindowsFeature DHCP [-IncludeManagementTools]</code></strong></p>
<p>Instalar la característica o rol de servidor DHCP. Con la opción IncludeManagementTools se instalan herramientas adicionales como la consola de administración de Microsoft para el servicio DHCP (dhcpmgmt.msc) que nos permite administrar el servicio gráficamente de manera muy intuitiva.</p>
</div>
<div class="admonition example">
<p class="admonition-title">Instalación del servidor DHCP</p>
<p>Instalar el rol de servidor DHCP sin herramientas de administración.</p>
<pre data-role="codeBlock" data-info="powershell" class="language-powershell powershell"><code><span class="token function">PS</span> C:\&gt; <span class="token function">Install-WindowsFeature</span> DHCP <span class="token operator">-</span>IncludeManagementTools
</code></pre></div>
<div class="style-normal">
<p><strong><code>Add-DhcpServerv4Scope [-&lt;opcio1&gt; &lt;valor1&gt;] [-&lt;opcio2&gt; &lt;valor2&gt;] ...</code></strong></p>
<p>Agrega un ámbito IPv4 al servidor DHCP con las opciones especificadas. Las opciones habituales son las siguientes:</p>
</div>
<div class="style-list">
<ul>
<li><strong>Name</strong>: Nombre del ámbito.</li>
<li><strong>Description</strong>: Breve descripción del ámbito.</li>
<li><strong>StartRange</strong>: Especifica la dirección IP inicial del rango en la red desde la cual el servidor DHCP debe conceder las direcciones IP.</li>
<li><strong>EndRange</strong>: Especifica la dirección IP final del rango en la red desde la cual el servidor DHCP debe conceder las direcciones IP.</li>
<li><strong>Subnetmask</strong>: Máscara de red en notación decimal separada por puntos.</li>
<li><strong>LeaseDuration</strong>: Es el tiempo de concesión de una dirección IP. Especifica el intervalo de tiempo durante el cual se debe conceder una dirección IP a un cliente en este ámbito. Esto debe especificarse con el formato días.<em>horas:minutos:segundos</em>.</li>
<li><strong>State</strong>: Especifica el estado del ámbito cuando se crea. Los valores aceptables para este parámetro son: <em>Active</em> (activo) e <em>Inactive</em> (inactivo). Solo un ámbito activo responde a las solicitudes de los clientes. El valor predeterminado es <em>Active</em>.</li>
</ul>
</div>
<div class="admonition example">
<p class="admonition-title">Creación de ámbito DHCP</p>
<p>Crear un ámbito para un servidor DHCP con las siguientes características:</p>
<ul>
<li><strong>Nombre</strong>: Ámbito 1</li>
<li><strong>Descripción</strong>: Ámbito DHCP correspondiente a la red 192.168.1.0/24.</li>
<li><strong>Rango de IPs</strong>: Se asignarán IPs entre la 192.168.1.128 y la 192.168.1.254.</li>
<li><strong>Tiempo de concesión</strong>: 6 horas.</li>
</ul>
<pre data-role="codeBlock" data-info="powershell" class="language-powershell powershell"><code><span class="token function">PS</span> C:\&gt; Add-DhcpServerv4Scope `
<span class="token operator">-</span>Name <span class="token string">"Ámbito 1"</span> `
<span class="token operator">-</span>Description <span class="token string">"Ámbito DHCP correspondiente a la red 192.168.1.0/24."</span> `
<span class="token operator">-</span>StartRange 192<span class="token punctuation">.</span>168<span class="token punctuation">.</span>1<span class="token punctuation">.</span>128 `
<span class="token operator">-</span>EndRange 192<span class="token punctuation">.</span>168<span class="token punctuation">.</span>1<span class="token punctuation">.</span>254 `
<span class="token operator">-</span>SubnetMask 255<span class="token punctuation">.</span>255<span class="token punctuation">.</span>255<span class="token punctuation">.</span>0 `
<span class="token operator">-</span>LeaseDuration 0<span class="token punctuation">.</span>06:00:00
</code></pre></div>
<div class="style-normal">
<p><strong><code>Add-DhcpServerv4ExclusionRange -ScopeId &lt;id de ámbito&gt; -StartRange &lt;ipinicial&gt; -EndRange &lt;ipfinal&gt;</code></strong></p>
<p>Agrega un rango de exclusión de direcciones IP para un ámbito IPv4. Las direcciones IP excluidas no son asignadas por el servidor DHCP a ningún cliente que solicite una IP. La única excepción a esto es la reserva. Si se reserva una dirección IP, la misma dirección IP se concede al cliente designado incluso si se encuentra en el rango de exclusión. El parámetro <em>ScopeId</em> es el identificador del ámbito y <em>StartRange</em> y <em>EndRange</em> son las IP donde comienza y termina el rango de exclusión respectivamente.</p>
</div>
<div class="admonition example">
<p class="admonition-title">Rangos de exclusión</p>
<p>Agregar un rango de exclusión para el ámbito del ejemplo anterior que va desde la IP 192.168.1.192 hasta la 192.168.1.224.</p>
<pre data-role="codeBlock" data-info="powershell" class="language-powershell powershell"><code><span class="token function">PS</span> C:\&gt; Add-DhcpServerv4ExclusionRange <span class="token operator">-</span>ScopeId 192<span class="token punctuation">.</span>168<span class="token punctuation">.</span>1<span class="token punctuation">.</span>0 `
<span class="token operator">-</span>StartRange 192<span class="token punctuation">.</span>168<span class="token punctuation">.</span>1<span class="token punctuation">.</span>192 <span class="token operator">-</span>EndRange 192<span class="token punctuation">.</span>168<span class="token punctuation">.</span>1<span class="token punctuation">.</span>224
</code></pre></div>
<div class="style-normal">
<p><strong><code>Add-DhcpServerv4Reservation -ScopeId &lt;id-ambito&gt; [-&lt;opcion1&gt; valor1] [-&lt;opcion2&gt; valor2] ...</code></strong></p>
<p>Agrega una reserva de IP para un equipo en un ámbito dado. Se debe especificar la dirección MAC del equipo del que queremos hacer la reserva y la IP que queremos asignarle. Las opciones más habituales son:</p>
</div>
<div class="style-list">
<ul>
<li><strong>Name</strong>: Nombre que le damos a la reserva.</li>
<li><strong>IPAddress</strong>: Dirección IP que le asignaremos al equipo.</li>
<li><strong>ClientId</strong>: Dirección MAC del equipo al que queremos hacer la reserva.</li>
<li><strong>Description</strong>: Texto descriptivo relativo a la reserva que estamos creando.</li>
</ul>
</div>
<div class="admonition example">
<p class="admonition-title">Reserva de direcciones IP</p>
<p>Agregar una reserva para la impresora cuya dirección MAC es 08-00-27-13-31-75. La impresora siempre recibirá la IP 192.168.1.191, el nombre será "Reserva impresora" y la descripción "Reserva de IP para la impresora de la red 192.168.1.0/24".</p>
<pre data-role="codeBlock" data-info="powershell" class="language-powershell powershell"><code><span class="token function">PS</span> C:\&gt; Add-DhcpServerv4Reservation <span class="token operator">-</span>ScopeId 192<span class="token punctuation">.</span>168<span class="token punctuation">.</span>1<span class="token punctuation">.</span>0 <span class="token operator">-</span>IPAddress 192<span class="token punctuation">.</span>168<span class="token punctuation">.</span>1<span class="token punctuation">.</span>191 `
<span class="token operator">-</span>ClientId <span class="token string">"08-00-27-13-31-75"</span> <span class="token operator">-</span>Name <span class="token string">"Reserva impresora"</span> `
<span class="token operator">-</span>Description <span class="token string">"Reserva de IP para la impresora de la red 192.168.1.0/24"</span>
</code></pre></div>
<h3 id="comandos-para-mostrar-la-configuración">COMANDOS PARA MOSTRAR LA CONFIGURACIÓN </h3>
<div class="style-normal">
<p><strong><code>Get-DhcpServerv4Scope [-ScopeId &lt;id-ambito&gt;]</code></strong></p>
<p>Muestra la configuración del ámbito dado. Si no se especifica el parámetro <em>ScopeId</em>, se devuelven todos los ámbitos configurados en el servidor DHCP.</p>
</div>
<div class="admonition example">
<p class="admonition-title">Mostrar configuración de un ámbito (lista)</p>
<p>Muestra la configuración del ámbito con id 192.168.1.0 en formato de lista.</p>
<pre data-role="codeBlock" data-info="powershell" class="language-powershell powershell"><code><span class="token function">PS</span> C:\&gt; Get-DhcpServerv4Scope <span class="token operator">-</span>ScopeId 192<span class="token punctuation">.</span>168<span class="token punctuation">.</span>1<span class="token punctuation">.</span>0 <span class="token punctuation">|</span> <span class="token function">Format-List</span>
ScopeId          : 192<span class="token punctuation">.</span>168<span class="token punctuation">.</span>1<span class="token punctuation">.</span>0
Name             : Ámbito 1
Description      : Ámbito DHCP correspondiente a la red 192<span class="token punctuation">.</span>168<span class="token punctuation">.</span>1<span class="token punctuation">.</span>0/24
SuperscopeName   : 
SubnetMask       : 255<span class="token punctuation">.</span>255<span class="token punctuation">.</span>255<span class="token punctuation">.</span>0
StartRange       : 192<span class="token punctuation">.</span>168<span class="token punctuation">.</span>1<span class="token punctuation">.</span>128
EndRange         : 192<span class="token punctuation">.</span>168<span class="token punctuation">.</span>1<span class="token punctuation">.</span>254
LeaseDuration    : 06:00:00
NapProfile       : 
NapEnable        : False
Delay<span class="token punctuation">(</span>ms<span class="token punctuation">)</span>        : 0
State            : Active
<span class="token function">Type</span>             : Dhcp
MaxBootpClients  : 4294967295
ActivatePolicies : True
</code></pre></div>
<div class="admonition example">
<p class="admonition-title">Mostrar configuración de un ámbito (tabla)</p>
<p>Muestra la configuración del ámbito con id 192.168.1.0 en formato de tabla. La opción <em>Autosize</em> ajusta los valores para que no se recorten en pantalla.</p>
<pre data-role="codeBlock" data-info="powershell" class="language-powershell powershell"><code><span class="token function">PS</span> C:\&gt; Get-DhcpServerv4Scope <span class="token operator">-</span>ScopeId 192<span class="token punctuation">.</span>168<span class="token punctuation">.</span>1<span class="token punctuation">.</span>0 <span class="token punctuation">|</span> <span class="token function">Format-Table</span> <span class="token operator">-</span>AutoSize
ScopeId      SubnetMask    Name     State  StartRange    EndRange      LeaseDuration
<span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span>      <span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span>    <span class="token operator">--</span><span class="token operator">--</span>     <span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span>  <span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span>    <span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span>      <span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span>
192<span class="token punctuation">.</span>168<span class="token punctuation">.</span>1<span class="token punctuation">.</span>0  255<span class="token punctuation">.</span>255<span class="token punctuation">.</span>255<span class="token punctuation">.</span>0 Ámbito 1 Active 192<span class="token punctuation">.</span>168<span class="token punctuation">.</span>1<span class="token punctuation">.</span>128 192<span class="token punctuation">.</span>168<span class="token punctuation">.</span>1<span class="token punctuation">.</span>254 06:00:00     
</code></pre></div>
<div class="style-normal">
<p><strong><code>Get-DhcpServerv4OptionValue [-ScopeId &lt;id-ambito&gt; | -ReservedIP &lt;ip-reserva&gt;]</code></strong></p>
<p>Devuelve los valores opcionales que se proporcionan a los clientes DHCP para un ámbito dado cuando se proporciona el parámetro <em>ScopeId</em>. Si no se especifica el parámetro <em>ScopeId</em> el comando devuelve los valores opcionales para todos los ámbitos definidos y si se especifica el parámetro <em>ReservedIP</em> se proporcionan los valores opcionales para la reserva indicada. Cada opción tiene un identificador asociado, por ejemplo la opción <em>Router</em> tiene el identificador de valor 3.</p>
</div>
<div class="admonition example">
<p class="admonition-title">Parámetros opcionales</p>
<p>Muestra todos los parámetros opcionales dados a los clientes DHCP para el ámbito 192.168.1.0.</p>
<pre data-role="codeBlock" data-info="powershell" class="language-powershell powershell"><code><span class="token function">PS</span> C:\&gt; Get-DhcpServerv4OptionValue <span class="token operator">-</span>ScopeId 192<span class="token punctuation">.</span>168<span class="token punctuation">.</span>1<span class="token punctuation">.</span>0 <span class="token punctuation">|</span> <span class="token function">Format-Table</span> <span class="token operator">-</span>AutoSize
OptionId Name           <span class="token function">Type</span>        Value                 VendorClass UserClass PolicyName
<span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span> <span class="token operator">--</span><span class="token operator">--</span>           <span class="token operator">--</span><span class="token operator">--</span>        <span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span>                 <span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span> <span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span> <span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span>
3        Enrutador      IPv4Address <span class="token punctuation">{</span>192<span class="token punctuation">.</span>168<span class="token punctuation">.</span>1<span class="token punctuation">.</span>254<span class="token punctuation">}</span>                                      
6        Servidores DNS IPv4Address <span class="token punctuation">{</span>10<span class="token punctuation">.</span>100<span class="token punctuation">.</span>1<span class="token punctuation">.</span>3<span class="token punctuation">,</span> 8<span class="token punctuation">.</span>8<span class="token punctuation">.</span>8<span class="token punctuation">.</span>8<span class="token punctuation">}</span>                                 
51       Concesión      DWord       <span class="token punctuation">{</span>43200<span class="token punctuation">}</span>
</code></pre></div>
<div class="style-normal">
<p><strong><code>Get-DhcpServerv4Lease [-ScopeId &lt;id-ambito&gt;]</code></strong></p>
<p>Devuelve el tiempo de todas las concesiones en un ámbito dado. Si no se especifica el ámbito se devuelve el tiempo de todas las concesiones de todos los ámbitos definidos en el servidor.</p>
</div>
<div class="admonition example">
<p class="admonition-title">Concesiones</p>
<p>Mostrar todas las concesiones hechas en el ámbito 192.168.1.0.</p>
<pre data-role="codeBlock" data-info="powershell" class="language-powershell powershell"><code><span class="token function">PS</span> C:\&gt; Get-DhcpServerv4Lease <span class="token operator">-</span>ScopeId 192<span class="token punctuation">.</span>168<span class="token punctuation">.</span>1<span class="token punctuation">.</span>0
IPAddress      ScopeId      ClientId          HostName           AddressState        LeaseExpiryTime   
<span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span>      <span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span>      <span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span>          <span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span>           <span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span>        <span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span>   
192<span class="token punctuation">.</span>168<span class="token punctuation">.</span>1<span class="token punctuation">.</span>128  192<span class="token punctuation">.</span>168<span class="token punctuation">.</span>1<span class="token punctuation">.</span>0  08-00-27-c7-0d-23 X1-W10             Active              02/11/2023 3:28:30
192<span class="token punctuation">.</span>168<span class="token punctuation">.</span>1<span class="token punctuation">.</span>191  192<span class="token punctuation">.</span>168<span class="token punctuation">.</span>1<span class="token punctuation">.</span>0  08-00-27-13-31-75 Reserva impresora  InactiveReservation
</code></pre><p>Aparece la concesión hecha por un cliente Windows 10 donde se indica que está activa y que expira en la fecha y hora indicada en el campo <em>LeaseExpiryTime</em>.<br>
Por otro lado, aparece una concesión relativa a una reserva. No hay tiempo de expiración porque las reservas nunca caducan.</p>
</div>
<div class="style-normal">
<p><strong><code>Get-DhcpServerv4ExclusionRange [-ScopeId &lt;id-ambito&gt;]</code></strong></p>
<p>Devuelve los rangos de exclusión de un ámbito dado. Si no se especifica el ámbito se devuelven los rangos de exclusión de todas las concesiones de todos los ámbitos definidos en el servidor.</p>
</div>
<div class="admonition example">
<p class="admonition-title">Rangos de exclusión</p>
<p>Mostrar todos los rangos de exclusión definidos en el ámbito 192.168.1.0.</p>
<pre data-role="codeBlock" data-info="powershell" class="language-powershell powershell"><code><span class="token function">PS</span> C:&gt; Get-DhcpServerv4ExclusionRange <span class="token operator">-</span>ScopeId 192<span class="token punctuation">.</span>168<span class="token punctuation">.</span>1<span class="token punctuation">.</span>0
ScopeId              StartRange           EndRange
<span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span>              <span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span>           <span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span>
192<span class="token punctuation">.</span>168<span class="token punctuation">.</span>1<span class="token punctuation">.</span>0          192<span class="token punctuation">.</span>168<span class="token punctuation">.</span>1<span class="token punctuation">.</span>192        192<span class="token punctuation">.</span>168<span class="token punctuation">.</span>1<span class="token punctuation">.</span>224
</code></pre></div>
<div class="style-normal">
<p><strong><code>Get-DhcpServerv4Binding</code></strong></p>
<p>Devuelve las IP de todos los adaptadores de red del servidor por los que sirve direcciones IP.</p>
<p><strong><code>Get-DhcpServerv4Reservation [-&lt;opcion1&gt; &lt;valor1&gt;] [-&lt;opcion2&gt; &lt;valor2&gt;]...</code></strong></p>
<p>Permite consultar las reservas por varios criterios. Algunas de las posibles opciones son:</p>
</div>
<div class="style-list">
<ul>
<li><strong>ScopeId</strong>: Especificamos el identificador de ámbito (es la IP de una de las interfaces de red del servidor).</li>
<li><strong>IPAddress</strong>: La IP de la que queremos consultar las reservas.</li>
<li><strong>ClientId</strong>: La MAC asociada a la reserva.</li>
</ul>
</div>
<div class="style-normal">
<p>Si no se especifica ninguna opción devuelve todas las reservas hechas en todos los ámbitos.</p>
</div>
<div class="admonition example">
<p class="admonition-title">Reservas</p>
<p>Mostrar todas las reservas hechas en el ámbito 192.168.1.0.</p>
<pre data-role="codeBlock" data-info="powershell" class="language-powershell powershell"><code><span class="token function">PS</span> C:\&gt; Get-DhcpServerv4Reservation <span class="token operator">-</span>ScopeId 192<span class="token punctuation">.</span>168<span class="token punctuation">.</span>1<span class="token punctuation">.</span>0
IPAddress            ScopeId              ClientId             Name                 <span class="token function">Type</span>           
<span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span>            <span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span>              <span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span>             <span class="token operator">--</span><span class="token operator">--</span>                 <span class="token operator">--</span><span class="token operator">--</span>           
192<span class="token punctuation">.</span>168<span class="token punctuation">.</span>1<span class="token punctuation">.</span>191        192<span class="token punctuation">.</span>168<span class="token punctuation">.</span>1<span class="token punctuation">.</span>0          08-00-27-13-31-75    Reserva impresora    Both 
</code></pre><p>Se puede mostrar la información como lista ya que así aparece también el campo con la descripción.</p>
<pre data-role="codeBlock" data-info="powershell" class="language-powershell powershell"><code><span class="token function">PS</span> C:\&gt; Get-DhcpServerv4Reservation <span class="token operator">-</span>ScopeId 192<span class="token punctuation">.</span>168<span class="token punctuation">.</span>1<span class="token punctuation">.</span>0 <span class="token punctuation">|</span> <span class="token function">Format-List</span>
IPAddress   : 192<span class="token punctuation">.</span>168<span class="token punctuation">.</span>1<span class="token punctuation">.</span>191
ClientId    : 08-00-27-13-31-75
ScopeId     : 192<span class="token punctuation">.</span>168<span class="token punctuation">.</span>1<span class="token punctuation">.</span>0
Name        : Reserva impresora
<span class="token function">Type</span>        : Both
Description : Reserva de IP para la impresora de la red 192<span class="token punctuation">.</span>168<span class="token punctuation">.</span>1<span class="token punctuation">.</span>0/24
</code></pre></div>
<h3 id="comandos-para-cambiar-la-configuración">COMANDOS PARA CAMBIAR LA CONFIGURACIÓN </h3>
<div class="style-normal">
<p><strong><code>Set-DhcpServerv4Scope -ScopeId &lt;id-ambito&gt; [-&lt;opcion1&gt; &lt;valor1&gt;] [-&lt;opcion2&gt; &lt;valor2&gt;]...</code></strong></p>
<p>Establece las propiedades de un ámbito IPv4 existente en el servidor DHCP. Las opciones son las mismas que las del comando <code>Add-DhcpServerv4Scope</code>. Utilizando la opción <em>State</em> podemos activar o desactivar el ámbito con los valores <em>Active</em> e <em>Inactive</em> respectivamente.</p>
</div>
<div class="admonition example">
<p class="admonition-title">Desactivar un ámbito</p>
<p>Desactivar el ámbito con id 192.168.1.0.</p>
<pre data-role="codeBlock" data-info="powershell" class="language-powershell powershell"><code><span class="token function">PS</span> C:\&gt; <span class="token function">Set</span><span class="token operator">-</span>DhcpServerv4Scope <span class="token operator">-</span>ScopeId 192<span class="token punctuation">.</span>168<span class="token punctuation">.</span>1<span class="token punctuation">.</span>0 <span class="token operator">-</span>State Inactive
</code></pre></div>
<div class="style-normal">
<p><strong><code>Set-DhcpServerv4OptionValue -ScopeId &lt;id-ambito&gt; [-&lt;opcion1&gt; valor1] [-&lt;opcion2&gt; valor2] ...</code></strong></p>
<p>Cambia las propiedades opcionales de un ámbito IPv4 existente en el servidor DHCP. Las opciones son las mismas que las del comando <code>Add-DhcpServerv4OptionValue</code>. Este comando permite configurar una serie de opciones que el servidor DHCP proporcionará a los clientes. Entre las opciones posibles, las más habituales son:</p>
</div>
<div class="style-list">
<ul>
<li><strong>Router</strong>: Puerta de enlace proporcionada.</li>
<li><strong>DnsServer</strong>: Lista de servidores DNS (separados por comas) proporcionados.</li>
<li><strong>DnsDomain</strong>: Nombre de dominio DNS.</li>
<li><strong>WinsServer</strong>: Servidor WINS (resolución de nombres NetBios).</li>
</ul>
</div>
<div class="admonition example">
<p class="admonition-title">Configurar opciones de un ámbito</p>
<p>Configurar el ámbito 192.168.1.0 de un servidor DHCP para que se asigne a los clientes la puerta de enlace 192.168.1.1 y los DNS 192.168.1.3 y 8.8.8.8.</p>
<pre data-role="codeBlock" data-info="powershell" class="language-powershell powershell"><code><span class="token function">PS</span> C:\&gt; <span class="token function">Set</span><span class="token operator">-</span>DhcpServerv4OptionValue <span class="token operator">-</span>ScopeId 192<span class="token punctuation">.</span>168<span class="token punctuation">.</span>1<span class="token punctuation">.</span>0 `
<span class="token operator">-</span>Router 192<span class="token punctuation">.</span>168<span class="token punctuation">.</span>1<span class="token punctuation">.</span>1 <span class="token operator">-</span>DnsServer 192<span class="token punctuation">.</span>168<span class="token punctuation">.</span>1<span class="token punctuation">.</span>3<span class="token punctuation">,</span>8<span class="token punctuation">.</span>8<span class="token punctuation">.</span>8<span class="token punctuation">.</span>8
</code></pre></div>
<div class="style-normal">
<p><strong><code>Set-DhcpServerv4OptionValue -ComputerName &lt;ip-o-nombreDns&gt; [-&lt;opcion1&gt; valor1] [-&lt;opcion2&gt; valor2] ...</code></strong></p>
<p>En un servidor DHCP se puede definir más de un ámbito, con esta opción configuraremos las opciones que se aplicarán a todos los ámbitos definidos.</p>
</div>
<div class="style-normal">
<p><strong><code>Set-DhcpServerv4OptionValue -ReservedIP &lt;ip&gt; [-&lt;opcion1&gt; valor1] [-&lt;opcion2&gt; valor2] ...</code></strong></p>
<p>En este caso las opciones solo se aplican al equipo especificado del que hemos hecho una reserva.</p>
</div>
<div class="style-normal">
<p><strong><code>Set-DhcpServerv4Reservation -IPAddress &lt;ip-reserva&gt; -ClientId &lt;MAC-reserva&gt; [-&lt;opcion1&gt; &lt;valor1&gt;] ...</code></strong></p>
<p>Modifica la configuración de una reserva dada.</p>
<p><strong><code>Set-DhcpServerv4Binding -BindingState &lt;$true|$false&gt; -InterfaceAlias &lt;adaptador-red&gt;</code></strong></p>
<p>En el equipo donde tenemos el servidor DHCP podemos tener más de un adaptador de red. Con este comando especificamos si queremos que el servidor conceda direcciones a las peticiones que le llegan por un adaptador de red dado.</p>
</div>
<div class="admonition example">
<p class="admonition-title">Desactivar concesión de direcciones en un adaptador</p>
<p>Desactivar la concesión de direcciones IP para el adaptador de red llamado “Ethernet 2”.</p>
<pre data-role="codeBlock" data-info="powershell" class="language-powershell powershell"><code><span class="token function">PS</span> C:\&gt; <span class="token function">Set</span><span class="token operator">-</span>DhcpServerv4Binding <span class="token operator">-</span>BindingState <span class="token boolean">$false</span> <span class="token operator">-</span>InterfaceAlias <span class="token string">"Ethernet 2"</span>
</code></pre></div>
<h3 id="comandos-para-eliminar-la-configuración">Comandos para eliminar la configuración </h3>
<div class="style-normal">
<p><strong><code>Remove-DhcpServerv4Scope -ScopeId &lt;id-ambito&gt;</code></strong></p>
<p>Elimina un ámbito del servidor DHCP.</p>
<p><strong><code>Remove-DhcpServerv4ExclusionRange -ScopeId &lt;id-ambito&gt; [-StartRange &lt;inicio-rango&gt; -EndRange &lt;fin-rango&gt;]</code></strong></p>
<p>Elimina un rango de exclusión de un ámbito en el servidor DHCP. Si no se especifican los valores inicial y final del rango, entonces se eliminan todos los rangos de exclusión definidos en el ámbito.</p>
</div>
<div class="admonition example">
<p class="admonition-title">Eliminar todos los rangos de exclusión</p>
<p>Eliminar todos los rangos de exclusión definidos en el ámbito 192.168.1.0.</p>
<pre data-role="codeBlock" data-info="powershell" class="language-powershell powershell"><code><span class="token function">PS</span> C:\&gt; Remove-DhcpServerv4ExclusionRange <span class="token operator">-</span>ScopeId 192<span class="token punctuation">.</span>168<span class="token punctuation">.</span>1<span class="token punctuation">.</span>0
</code></pre></div>
<div class="style-normal">
<p><strong><code>Remove-DhcpServerv4OptionValue [-&lt;nivel&gt; &lt;valor-nivel&gt;] -OptionId &lt;lista-identificadores-opcion&gt;</code></strong></p>
<p>Elimina las propiedades opcionales a nivel de ámbito (<em>ScopeId</em>), reserva (<em>ReservedIP</em>) o general. En la opción <em>OptionId</em> se proporciona una lista separada por comas con los identificadores de las propiedades opcionales.</p>
<p><strong><code>Remove-DhcpServerv4Lease -ScopeId &lt;id-ambito&gt;</code></strong></p>
<p>Elimina todas las concesiones hechas en un ámbito.</p>
<p><strong><code>Remove-DhcpServerv4Lease -IPAddress &lt;lista-ip&gt;</code></strong></p>
<p>Elimina todas las concesiones hechas para cada una de las IP's de la lista.</p>
<p><strong><code>Remove-DhcpServerv4Reservation [-ScopeId &lt;id-ambito&gt; [-ClientId &lt;MAC-cliente&gt;] | -IPAddress &lt;lista-ip&gt;]</code></strong></p>
<p>Este comando elimina la reserva IPv4 del ámbito especificado. Si se especifica el parámetro <em>ScopeId</em>, se eliminan todas las reservas del ámbito. Si se especifica el parámetro <em>IPAddress</em> o <em>ClientId</em>, se eliminan una o más reservas específicas identificadas por direcciones IP o identificadores de cliente.</p>
</div>
<div class="admonition example">
<p class="admonition-title">Eliminar una reserva</p>
<p>Eliminar la reserva de la impresora con MAC 08-00-27-13-31-75.</p>
<pre data-role="codeBlock" data-info="powershell" class="language-powershell powershell"><code><span class="token function">PS</span> C:\&gt; Remove-DhcpServerv4Reservation <span class="token operator">-</span>ScopeId 192<span class="token punctuation">.</span>168<span class="token punctuation">.</span>1<span class="token punctuation">.</span>0 <span class="token operator">-</span>ClientId <span class="token string">"08-00-27-13-31-75"</span>
</code></pre></div>
<div class="style-normal">
<p>Hay mucha más información sobre la administración de un servidor DHCP con Powershell en la documentación oficial de Microsoft.<br>
URL: <a href="https://learn.microsoft.com/es-es/powershell/module/dhcpserver/?view=windowsserver2019-ps">https://learn.microsoft.com/es-es/powershell/module/dhcpserver/?view=windowsserver2019-ps</a></p>
</div>
<h2 id="clientes-dhcp-en-sistemas-windows">CLIENTES DHCP EN SISTEMAS WINDOWS </h2>
<div class="style-normal">
<p>En los sistemas Windows, el cliente DHCP funciona como un servicio del sistema operativo. Podemos gestionarlo desde la consola de administración de servicios (<em>services.msc</em>), donde aparece con el nombre corto <strong>Dhcp</strong> y el nombre completo <strong>Cliente DHCP</strong>.</p>
<p><img src="./assets/services-consola.png" alt="Consola services"></p>
<p>Además, es posible consultar información sobre este servicio utilizando PowerShell o el comando <strong><code>sc</code></strong> en la consola <em>cmd</em> de Windows.</p>
</div>
<h3 id="ipconfig">IPCONFIG </h3>
<div class="style-normal">
<p>Para interactuar con el cliente DHCP y realizar acciones habituales, utilizaremos el comando <strong><code>ipconfig</code></strong> desde la línea de comandos (<em>cmd</em>). A continuación se muestran las principales acciones que se pueden realizar con este comando.</p>
</div>
<p><strong><code>ipconfig /?</code></strong></p>
<div class="style-normal">
<p>Muestra la ayuda del comando.</p>
</div>
<p><strong><code>ipconfig /all</code></strong></p>
<div class="style-normal">
<p>Muestra información detallada sobre todas las conexiones de red. Para cada adaptador, indica si la configuración dinámica mediante DHCP está activada y, en caso afirmativo, muestra la dirección IP del servidor DHCP, la fecha en que se concedió la dirección y la fecha de expiración de la concesión.</p>
</div>
<div class="admonition example">
<p class="admonition-title">ipconfig /all</p>
<p>Mostrar los parámetros de la configuración IP de un cliente Windows 10, destacando aquellos relacionados con la asignación dinámica mediante DHCP.</p>
<pre data-role="codeBlock" data-info="cmd" class="language-cmd cmd"><code>C:\&gt; ipconfig /all
Configuración IP de Windows

   Nombre de host. . . . . . . . . : X1-W10
   Sufijo DNS principal  . . . . . : 
   Tipo de nodo. . . . . . . . . . : híbrido
   Enrutamiento IP habilitado. . . : no
   Proxy WINS habilitado . . . . . : no

Adaptador de Ethernet Ethernet:

   Sufijo DNS específico para la conexión. . : 
   Descripción . . . . . . . . . . . . . . . : Intel(R) PRO/1000 MT Desktop Adapter
   Dirección física. . . . . . . . . . . . . : 08-00-27-C7-0D-23
   DHCP habilitado . . . . . . . . . . . . . : sí
   Configuración automática habilitada . . . : sí
   Vínculo: dirección IPv6 local . . . . . . : fe80::3ca9:1ae3:be0a:2cce%4(Preferido) 
   Dirección IPv4. . . . . . . . . . . . . . : 192.168.1.128(Preferido) 
   Máscara de subred . . . . . . . . . . . . : 255.255.255.0
   Concesión obtenida. . . . . . . . . . . . : miércoles, 1 de noviembre de 2023 21:28:30
   La concesión expira . . . . . . . . . . . : jueves, 2 de noviembre de 2023 3:28:30
   Puerta de enlace predeterminada . . . . . : 192.168.1.1
   Servidor DHCP . . . . . . . . . . . . . . : 192.168.1.2
   IAID DHCPv6 . . . . . . . . . . . . . . . : 101187623
   DUID de cliente DHCPv6. . . . . . . . . . : 00-01-00-01-2C-D1-9A-E1-08-00-27-C7-0D-23
   Servidores DNS. . . . . . . . . . . . . . : 192.168.1.3
                                       8.8.8.8
   NetBIOS sobre TCP/IP. . . . . . . . . . . : habilitado
</code></pre></div>
<div class="style-normal">
<p><strong><code>ipconfig /release [adaptador-red]</code></strong></p>
<p>Libera la dirección IP asignada dinámicamente a un adaptador de red específico. Si no se indica ningún adaptador, se liberan las direcciones IP de todos los adaptadores de red que hayan recibido una IP de un servidor DHCP.</p>
</div>
<div class="admonition example">
<p class="admonition-title">Liberar IP asignada dinámicamente</p>
<pre data-role="codeBlock" data-info="cmd" class="language-cmd cmd"><code>C:\&gt; ipconfig /release
Configuración IP de Windows

Adaptador de Ethernet Ethernet:

   Sufijo DNS específico para la conexión. . : 
   Vínculo: dirección IPv6 local . . . . . . : fe80::3ca9:1ae3:be0a:2cce%4
   Puerta de enlace predeterminada . . . . . : 
</code></pre></div>
<div class="style-normal">
<p><strong><code>ipconfig /renew [adaptador-xarxa]</code></strong></p>
<p>Renueva la dirección IP obtenida dinámicamente para un adaptador de red concreto. Si no se indica ningún adaptador, se renuevan las direcciones IP de todos los adaptadores de red que hayan recibido una IP dinámicamente. Solo se actualiza el tiempo de expiración de la concesión.</p>
</div>
<div class="admonition example">
<p class="admonition-title">Renovación de IP</p>
<p>Muestra la información de la concesión en un equipo con Windows 10.<br>
Espera unos 5 minutos, renueva la concesión y vuelve a mostrar la información de la concesión.</p>
<p>Información inicial de la concesión</p>
<pre data-role="codeBlock" data-info="cmd" class="language-cmd cmd"><code>C:\&gt; ipconfig /all
Configuración IP de Windows

   Nombre de host. . . . . . . . . : X1-W10
   Sufijo DNS principal  . . . . . : 
   Tipo de nodo. . . . . . . . . . : híbrido
   Enrutamiento IP habilitado. . . : no
   Proxy WINS habilitado . . . . . : no

Adaptador de Ethernet Ethernet:

   Sufijo DNS específico para la conexión. . : 
   Descripción . . . . . . . . . . . . . . . : Intel(R) PRO/1000 MT Desktop Adapter
   Dirección física. . . . . . . . . . . . . : 08-00-27-C7-0D-23
   DHCP habilitado . . . . . . . . . . . . . : sí
   Configuración automática habilitada . . . : sí
   Vínculo: dirección IPv6 local . . . . . . : fe80::3ca9:1ae3:be0a:2cce%4(Preferido) 
   Dirección IPv4. . . . . . . . . . . . . . : 192.168.1.128(Preferido) 
   Máscara de subred . . . . . . . . . . . . : 255.255.255.0
   Concesión obtenida. . . . . . . . . . . . : miércoles, 1 de noviembre de 2023 21:32:23
   La concesión expira . . . . . . . . . . . : jueves, 2 de noviembre de 2023 3:32:23
   Puerta de enlace predeterminada . . . . . : 192.168.1.1
   Servidor DHCP . . . . . . . . . . . . . . : 192.168.1.2
   IAID DHCPv6 . . . . . . . . . . . . . . . : 101187623
   DUID de cliente DHCPv6. . . . . . . . . . : 00-01-00-01-2C-D1-9A-E1-08-00-27-C7-0D-23
   Servidores DNS. . . . . . . . . . . . . . : 192.168.1.3
                                       8.8.8.8
   NetBIOS sobre TCP/IP. . . . . . . . . . . : habilitado    
</code></pre><p>Renovación de IP tras esperar unos 5 minutos aproximadamente</p>
<pre data-role="codeBlock" data-info="cmd" class="language-cmd cmd"><code>C:\&gt; ipconfig /renew
Configuración IP de Windows

   Sufijo DNS específico para la conexión. . : 
   Vínculo: dirección IPv6 local . . . . . . : fe80::3ca9:1ae3:be0a:2cce%4
   Dirección IPv4. . . . . . . . . . . . . . : 192.168.1.128
   Máscara de subred . . . . . . . . . . . . : 255.255.255.0
   Puerta de enlace predeterminada . . . . . : 192.168.1.1
</code></pre><p>Volver a mostrar la información de la concesión</p>
<pre data-role="codeBlock" data-info="cmd" class="language-cmd cmd"><code>C:\&gt; ipconfig /all
Configuración IP de Windows

   Nombre de host. . . . . . . . . : X1-W10
   Sufijo DNS principal  . . . . . : 
   Tipo de nodo. . . . . . . . . . : híbrido
   Enrutamiento IP habilitado. . . : no
   Proxy WINS habilitado . . . . . : no

Adaptador de Ethernet Ethernet:

   Sufijo DNS específico para la conexión. . : 
   Descripción . . . . . . . . . . . . . . . : Intel(R) PRO/1000 MT Desktop Adapter
   Dirección física. . . . . . . . . . . . . : 08-00-27-C7-0D-23
   DHCP habilitado . . . . . . . . . . . . . : sí
   Configuración automática habilitada . . . : sí
   Vínculo: dirección IPv6 local . . . . . . : fe80::3ca9:1ae3:be0a:2cce%4(Preferido) 
   Dirección IPv4. . . . . . . . . . . . . . : 192.168.1.128(Preferido) 
   Máscara de subred . . . . . . . . . . . . : 255.255.255.0
   Concesión obtenida. . . . . . . . . . . . : miércoles, 1 de noviembre de 2023 21:32:23
   La concesión expira . . . . . . . . . . . : jueves, 2 de noviembre de 2023 3:38:00
   Puerta de enlace predeterminada . . . . . : 192.168.1.1
   Servidor DHCP . . . . . . . . . . . . . . : 192.168.1.2
   IAID DHCPv6 . . . . . . . . . . . . . . . : 101187623
   DUID de cliente DHCPv6. . . . . . . . . . : 00-01-00-01-2C-D1-9A-E1-08-00-27-C7-0D-23
   Servidores DNS. . . . . . . . . . . . . . : 192.168.1.3
                                       8.8.8.8
   NetBIOS sobre TCP/IP. . . . . . . . . . . : habilitado
</code></pre><p>Observa que la fecha y hora en que se obtuvo la concesión no cambia tras realizar la renovación. Lo que sí varía es la fecha de expiración de la concesión, que se actualiza y ahora es unos 5 minutos posterior a la fecha de expiración que teníamos antes de renovar la IP.</p>
</div>
<h2 id="reenvío-de-peticiones-dhcp-dhcp-relay">REENVÍO DE PETICIONES DHCP: DHCP RELAY </h2>
<div class="style-normal>
<p>Un servidor DHCP puede asignar direcciones IP a equipos de distintas redes si está conectado directamente a cada una de ellas, pero esta solución no es la más habitual ni la más recomendable. Existen dos métodos principales para que los equipos de varias redes obtengan direcciones IP de forma dinámica:</p>
</div>
<div class=" style-list"="">
<ul>
<li>Instalar un servidor DHCP independiente en cada red donde se necesite el servicio.</li>
<li>Instalar un único servidor DHCP en una red y, en las demás, configurar un agente reenviador DHCP (DHCP Relay Agent). Este agente se encarga de reenviar las solicitudes de dirección IP de los clientes de su red al servidor DHCP situado en otra red.</li>
</ul>
</div>
<div class="style-normal">
<p>Por ejemplo, si disponemos de dos redes, con el servidor DHCP en la primera y el reenviador en la segunda, cuando un equipo de la segunda red solicita una dirección IP, la petición llega primero al reenviador. Este la reenvía, mediante un mensaje unicast, al servidor DHCP de la primera red, incluyendo la dirección MAC del cliente. El servidor DHCP asigna una dirección IP para ese equipo y la respuesta vuelve al reenviador, que finalmente la entrega al cliente. De este modo, el cliente recibe la respuesta como si hubiera sido atendido directamente por el servidor DHCP, sin saber que ha intervenido un agente reenviador.</p>
</div>
<p align="center" style="zoom:1" class="puml"><svg width="438pt" height="150pt" viewBox="0.00 0.00 437.87 150.00" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 146)">
<title>DHCPRelay</title>
<polygon fill="white" stroke="transparent" points="-4,4 -4,-146 433.87,-146 433.87,4 -4,4"></polygon>
<g id="clust1" class="cluster">
<title>cluster2_red1</title>
<polygon fill="none" stroke="lightgrey" points="8,-8 8,-91 88.21,-91 88.21,-8 8,-8"></polygon>
<text text-anchor="middle" x="48.1" y="-74.4" font-family="Times New Roman,serif" font-size="14.00">Red 1</text>
</g>
<g id="clust2" class="cluster">
<title>cluster2_red2</title>
<polygon fill="none" stroke="lightgrey" points="198.78,-18 198.78,-134 421.87,-134 421.87,-18 198.78,-18"></polygon>
<text text-anchor="middle" x="310.32" y="-117.4" font-family="Times New Roman,serif" font-size="14.00">Red 2</text>
</g>
<!-- S1 -->
<g id="node1" class="node">
<title>S1</title>
<polygon fill="#b3e6b3" stroke="black" points="80.31,-57.6 15.9,-57.6 15.9,-16.4 80.31,-16.4 80.31,-57.6"></polygon>
<text text-anchor="middle" x="48.1" y="-41.2" font-family="Times New Roman,serif" font-size="14.00">Servidor</text>
<text text-anchor="middle" x="48.1" y="-24.4" font-family="Times New Roman,serif" font-size="14.00">DHCP</text>
</g>
<!-- S2 -->
<g id="node2" class="node">
<title>S2</title>
<polygon fill="#ffd580" stroke="black" points="260.78,-82.6 206.78,-82.6 206.78,-41.4 260.78,-41.4 260.78,-82.6"></polygon>
<text text-anchor="middle" x="233.78" y="-66.2" font-family="Times New Roman,serif" font-size="14.00">DHCP</text>
<text text-anchor="middle" x="233.78" y="-49.4" font-family="Times New Roman,serif" font-size="14.00">Relay</text>
</g>
<!-- S1&#45;&gt;S2 -->
<g id="edge3" class="edge">
<title>S1-&gt;S2</title>
<path fill="none" stroke="black" d="M80.46,-43.82C86.34,-44.98 92.45,-46.09 98.21,-47 131.32,-52.21 169.29,-56.27 196.43,-58.84"></path>
<polygon fill="black" stroke="black" points="196.36,-62.35 206.64,-59.79 197,-55.38 196.36,-62.35"></polygon>
<text text-anchor="middle" x="143.49" y="-62.2" font-family="Times New Roman,serif" font-size="14.00">3 - Resp. (u)</text>
</g>
<!-- S2&#45;&gt;S1 -->
<g id="edge2" class="edge">
<title>S2-&gt;S1</title>
<path fill="none" stroke="black" d="M209.62,-41.2C203.29,-36.7 196.13,-32.58 188.78,-30.2 156.89,-19.88 118.78,-22.67 90.43,-27.43"></path>
<polygon fill="black" stroke="black" points="89.66,-24.01 80.45,-29.25 90.92,-30.9 89.66,-24.01"></polygon>
<text text-anchor="middle" x="143.49" y="-34.2" font-family="Times New Roman,serif" font-size="14.00">2 - Reenvío (u)</text>
</g>
<!-- C -->
<g id="node3" class="node">
<title>C</title>
<polygon fill="#e6f2ff" stroke="black" points="414.09,-81 357.21,-81 357.21,-45 414.09,-45 414.09,-81"></polygon>
<text text-anchor="middle" x="385.65" y="-58.8" font-family="Times New Roman,serif" font-size="14.00">Cliente</text>
</g>
<!-- S2&#45;&gt;C -->
<g id="edge4" class="edge">
<title>S2-&gt;C</title>
<path fill="none" stroke="black" d="M261.09,-47.28C266.76,-44.76 272.84,-42.53 278.78,-41.2 305.08,-35.3 313.15,-35.2 339.43,-41.2 342.22,-41.84 345.04,-42.67 347.83,-43.63"></path>
<polygon fill="black" stroke="black" points="346.56,-46.9 357.15,-47.35 349.15,-40.4 346.56,-46.9"></polygon>
<text text-anchor="middle" x="309.11" y="-45.2" font-family="Times New Roman,serif" font-size="14.00">4 - Resp.</text>
</g>
<!-- C&#45;&gt;S2 -->
<g id="edge1" class="edge">
<title>C-&gt;S2</title>
<path fill="none" stroke="black" d="M357.33,-62.82C333.1,-62.66 297.53,-62.42 270.95,-62.24"></path>
<polygon fill="black" stroke="black" points="270.91,-58.74 260.88,-62.17 270.86,-65.74 270.91,-58.74"></polygon>
<text text-anchor="middle" x="309.11" y="-66.2" font-family="Times New Roman,serif" font-size="14.00">1 - Sol. (b)</text>
</g>
</g>
</svg></p><div class="style-normal">
<p>Al igual que los servidores DHCP, el agente reenviador debe configurarse para funcionar en un adaptador de red concreto. Si el reenviador dispone de varios adaptadores, es necesario habilitar el reenvío en cada uno de los que conectan con redes desde las que se quieran reenviar peticiones DHCP.</p>
<p>Para instalar y configurar un reenviador de peticiones DHCP en un entorno sin interfaz gráfica, debes seguir dos pasos principales:</p>
</div>
<ul>
<li>
<p><strong>Instalar la característica de encaminamiento de Windows mediante PowerShell</strong></p>
<p>Los pasos a seguir son:</p>
<ul>
<li>Instalar la característica de encaminamiento de Windows:</li>
</ul>
<pre data-role="codeBlock" data-info="powershell" class="language-powershell powershell"><code><span class="token function">Install-WindowsFeature</span> Routing <span class="token punctuation">[</span><span class="token operator">-</span>IncludeManagementTools<span class="token punctuation">]</span>
</code></pre><ul>
<li>Instalar el componente de acceso remoto necesario para el encaminamiento:</li>
</ul>
<pre data-role="codeBlock" data-info="powershell" class="language-powershell powershell"><code><span class="token function">Install-RemoteAccess</span> <span class="token operator">-</span>VpnType RoutingOnly
</code></pre></li>
<li>
<p><strong>Configurar el DHCP Relay utilizando la utilidad <code>netsh</code></strong></p>
<p>Los pasos a seguir son:</p>
<ul>
<li>Acceder al intérprete de comandos <code>netsh</code> en el contexto adecuado:</li>
</ul>
<pre data-role="codeBlock" data-info="cmd" class="language-cmd cmd"><code>netsh -c "routing ip relay"
</code></pre><ul>
<li>Instalar el software necesario para el reenviador:</li>
</ul>
<pre data-role="codeBlock" data-info="cmd" class="language-cmd cmd"><code>install
</code></pre><ul>
<li>Añadir el adaptador de red desde el que se reenviarán las peticiones DHCP:</li>
</ul>
<pre data-role="codeBlock" data-info="cmd" class="language-cmd cmd"><code>add interface name=&lt;adaptador-red&gt;
</code></pre><ul>
<li>Especificar la dirección IP del servidor DHCP al que se reenviarán las peticiones:</li>
</ul>
<pre data-role="codeBlock" data-info="cmd" class="language-cmd cmd"><code>add dhcpserver server=&lt;ip-servidor-DHCP&gt;
</code></pre></li>
</ul>
<div class="style-normal">
<p>Los dos últimos pasos deben repetirse para cada adaptador de red que se desee configurar para reenviar solicitudes DHCP.</p>
</div>
<div class="admonition example">
<p class="admonition-title">Instalación y configuración DHCP Relay</p>
<p>Supongamos que ya tenemos un servidor DHCP correctamente configurado, con una única tarjeta de red conectada a la red <code>192.168.1.0/24</code> y con la dirección IP <code>192.168.1.2</code>. Este servidor DHCP dispone de dos ámbitos configurados: uno para la red <code>192.168.1.0/24</code> y otro para la red <code>192.168.2.0/24</code> (los identificadores de ámbito coinciden con las direcciones de red).</p>
<p>Ahora, en la segunda red, debemos configurar un agente reenviador DHCP (DHCP Relay) con la dirección IP <code>192.168.2.2</code>, de modo que los clientes de la red <code>192.168.2.0/24</code> puedan obtener una dirección IP del servidor DHCP. El DHCP Relay será una máquina con Windows Server 2019 y debe estar configurada con la dirección IP estática <code>192.168.2.2</code> (es obligatorio que la dirección sea estática).</p>
<p><strong>Solución</strong><br>
Una vez configurada la IP estática, el primer paso es instalar el software de encaminamiento utilizando PowerShell.</p>
<pre data-role="codeBlock" data-info="powershell" class="language-powershell powershell"><code><span class="token function">PS</span> C:\&gt; <span class="token function">Install-WindowsFeature</span> Routing
<span class="token function">PS</span> C:\&gt; <span class="token function">Install-RemoteAccess</span> <span class="token operator">-</span>VpnType RoutingOnly    
</code></pre><p>A continuación se configura el DHCP Relay con la utilidad <code>netsh</code>.</p>
<pre data-role="codeBlock" data-info="cmd" class="language-cmd cmd"><code>C:\&gt; netsh -c “routing ip relay”
netsh routing ip relay&gt; install
netsh routing ip relay&gt; add interface “Ethernet”
netsh routing ip relay&gt; add dhcpserver 192.168.1.2
netsh routing ip relay&gt; quit    
</code></pre></div>
<div class="style-normal">
<p>Para la máquina que actuará como DHCP Relay, se puede optar por utilizar la edición <em>Nano Server de Windows Server</em>. Las ediciones Nano Server de Windows Server consumen muy pocos recursos. La edición Nano Server de Windows Server 2016 puede instalarse tanto en un disco físico como en una máquina virtual. En versiones posteriores de Windows Server, Microsoft ya no proporciona documentación oficial para instalar Nano Server en discos físicos ni en máquinas virtuales que no sean Hyper-V. Sin embargo, es posible disponer de Nano Server en Windows Server 2019 y 2022 siguiendo los mismos pasos que para la instalación en Windows Server 2016.</p>
<p>Una máquina con Windows Server 2016 Nano Server puede funcionar con tan solo 192 MB de RAM. El acceso a estas máquinas solo puede realizarse de forma remota mediante PowerShell. Desde la propia máquina únicamente es posible realizar algunas tareas básicas, como la configuración de los adaptadores de red, a través de un asistente muy sencillo.</p>
</div>

      </div>
      
      
    
    
    
    
    
    
  
    </body></html>