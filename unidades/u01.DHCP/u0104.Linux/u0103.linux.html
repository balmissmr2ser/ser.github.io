<!DOCTYPE html><html><head>
      <title>SER - Unidad 01 DHCP</title>
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      
      <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.21/dist/katex.min.css">
      
      
      
      
      
      <style>
      @import url(https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css);
code[class*=language-],pre[class*=language-]{color:#333;background:0 0;font-family:Consolas,"Liberation Mono",Menlo,Courier,monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.4;-moz-tab-size:8;-o-tab-size:8;tab-size:8;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none}pre[class*=language-]{padding:.8em;overflow:auto;border-radius:3px;background:#f5f5f5}:not(pre)>code[class*=language-]{padding:.1em;border-radius:.3em;white-space:normal;background:#f5f5f5}.token.blockquote,.token.comment{color:#969896}.token.cdata{color:#183691}.token.doctype,.token.macro.property,.token.punctuation,.token.variable{color:#333}.token.builtin,.token.important,.token.keyword,.token.operator,.token.rule{color:#a71d5d}.token.attr-value,.token.regex,.token.string,.token.url{color:#183691}.token.atrule,.token.boolean,.token.code,.token.command,.token.constant,.token.entity,.token.number,.token.property,.token.symbol{color:#0086b3}.token.prolog,.token.selector,.token.tag{color:#63a35c}.token.attr-name,.token.class,.token.class-name,.token.function,.token.id,.token.namespace,.token.pseudo-class,.token.pseudo-element,.token.url-reference .token.variable{color:#795da3}.token.entity{cursor:help}.token.title,.token.title .token.punctuation{font-weight:700;color:#1d3e81}.token.list{color:#ed6a43}.token.inserted{background-color:#eaffea;color:#55a532}.token.deleted{background-color:#ffecec;color:#bd2c00}.token.bold{font-weight:700}.token.italic{font-style:italic}.language-json .token.property{color:#183691}.language-markup .token.tag .token.punctuation{color:#333}.language-css .token.function,code.language-css{color:#0086b3}.language-yaml .token.atrule{color:#63a35c}code.language-yaml{color:#183691}.language-ruby .token.function{color:#333}.language-markdown .token.url{color:#795da3}.language-makefile .token.symbol{color:#795da3}.language-makefile .token.variable{color:#183691}.language-makefile .token.builtin{color:#0086b3}.language-bash .token.keyword{color:#0086b3}pre[data-line]{position:relative;padding:1em 0 1em 3em}pre[data-line] .line-highlight-wrapper{position:absolute;top:0;left:0;background-color:transparent;display:block;width:100%}pre[data-line] .line-highlight{position:absolute;left:0;right:0;padding:inherit 0;margin-top:1em;background:hsla(24,20%,50%,.08);background:linear-gradient(to right,hsla(24,20%,50%,.1) 70%,hsla(24,20%,50%,0));pointer-events:none;line-height:inherit;white-space:pre}pre[data-line] .line-highlight:before,pre[data-line] .line-highlight[data-end]:after{content:attr(data-start);position:absolute;top:.4em;left:.6em;min-width:1em;padding:0 .5em;background-color:hsla(24,20%,50%,.4);color:#f4f1ef;font:bold 65%/1.5 sans-serif;text-align:center;vertical-align:.3em;border-radius:999px;text-shadow:none;box-shadow:0 1px #fff}pre[data-line] .line-highlight[data-end]:after{content:attr(data-end);top:auto;bottom:.4em}html body{font-family:'Helvetica Neue',Helvetica,'Segoe UI',Arial,freesans,sans-serif;font-size:16px;line-height:1.6;color:#333;background-color:#fff;overflow:initial;box-sizing:border-box;word-wrap:break-word}html body>:first-child{margin-top:0}html body h1,html body h2,html body h3,html body h4,html body h5,html body h6{line-height:1.2;margin-top:1em;margin-bottom:16px;color:#000}html body h1{font-size:2.25em;font-weight:300;padding-bottom:.3em}html body h2{font-size:1.75em;font-weight:400;padding-bottom:.3em}html body h3{font-size:1.5em;font-weight:500}html body h4{font-size:1.25em;font-weight:600}html body h5{font-size:1.1em;font-weight:600}html body h6{font-size:1em;font-weight:600}html body h1,html body h2,html body h3,html body h4,html body h5{font-weight:600}html body h5{font-size:1em}html body h6{color:#5c5c5c}html body strong{color:#000}html body del{color:#5c5c5c}html body a:not([href]){color:inherit;text-decoration:none}html body a{color:#08c;text-decoration:none}html body a:hover{color:#00a3f5;text-decoration:none}html body img{max-width:100%}html body>p{margin-top:0;margin-bottom:16px;word-wrap:break-word}html body>ol,html body>ul{margin-bottom:16px}html body ol,html body ul{padding-left:2em}html body ol.no-list,html body ul.no-list{padding:0;list-style-type:none}html body ol ol,html body ol ul,html body ul ol,html body ul ul{margin-top:0;margin-bottom:0}html body li{margin-bottom:0}html body li.task-list-item{list-style:none}html body li>p{margin-top:0;margin-bottom:0}html body .task-list-item-checkbox{margin:0 .2em .25em -1.8em;vertical-align:middle}html body .task-list-item-checkbox:hover{cursor:pointer}html body blockquote{margin:16px 0;font-size:inherit;padding:0 15px;color:#5c5c5c;background-color:#f0f0f0;border-left:4px solid #d6d6d6}html body blockquote>:first-child{margin-top:0}html body blockquote>:last-child{margin-bottom:0}html body hr{height:4px;margin:32px 0;background-color:#d6d6d6;border:0 none}html body table{margin:10px 0 15px 0;border-collapse:collapse;border-spacing:0;display:block;width:100%;overflow:auto;word-break:normal;word-break:keep-all}html body table th{font-weight:700;color:#000}html body table td,html body table th{border:1px solid #d6d6d6;padding:6px 13px}html body dl{padding:0}html body dl dt{padding:0;margin-top:16px;font-size:1em;font-style:italic;font-weight:700}html body dl dd{padding:0 16px;margin-bottom:16px}html body code{font-family:Menlo,Monaco,Consolas,'Courier New',monospace;font-size:.85em;color:#000;background-color:#f0f0f0;border-radius:3px;padding:.2em 0}html body code::after,html body code::before{letter-spacing:-.2em;content:'\00a0'}html body pre>code{padding:0;margin:0;word-break:normal;white-space:pre;background:0 0;border:0}html body .highlight{margin-bottom:16px}html body .highlight pre,html body pre{padding:1em;overflow:auto;line-height:1.45;border:#d6d6d6;border-radius:3px}html body .highlight pre{margin-bottom:0;word-break:normal}html body pre code,html body pre tt{display:inline;max-width:initial;padding:0;margin:0;overflow:initial;line-height:inherit;word-wrap:normal;background-color:transparent;border:0}html body pre code:after,html body pre code:before,html body pre tt:after,html body pre tt:before{content:normal}html body blockquote,html body dl,html body ol,html body p,html body pre,html body ul{margin-top:0;margin-bottom:16px}html body kbd{color:#000;border:1px solid #d6d6d6;border-bottom:2px solid #c7c7c7;padding:2px 4px;background-color:#f0f0f0;border-radius:3px}@media print{html body{background-color:#fff}html body h1,html body h2,html body h3,html body h4,html body h5,html body h6{color:#000;page-break-after:avoid}html body blockquote{color:#5c5c5c}html body pre{page-break-inside:avoid}html body table{display:table}html body img{display:block;max-width:100%;max-height:100%}html body code,html body pre{word-wrap:break-word;white-space:pre}}.markdown-preview{width:100%;height:100%;box-sizing:border-box}.markdown-preview ul{list-style:disc}.markdown-preview ul ul{list-style:circle}.markdown-preview ul ul ul{list-style:square}.markdown-preview ol{list-style:decimal}.markdown-preview ol ol,.markdown-preview ul ol{list-style-type:lower-roman}.markdown-preview ol ol ol,.markdown-preview ol ul ol,.markdown-preview ul ol ol,.markdown-preview ul ul ol{list-style-type:lower-alpha}.markdown-preview .newpage,.markdown-preview .pagebreak{page-break-before:always}.markdown-preview pre.line-numbers{position:relative;padding-left:3.8em;counter-reset:linenumber}.markdown-preview pre.line-numbers>code{position:relative}.markdown-preview pre.line-numbers .line-numbers-rows{position:absolute;pointer-events:none;top:1em;font-size:100%;left:0;width:3em;letter-spacing:-1px;border-right:1px solid #999;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.markdown-preview pre.line-numbers .line-numbers-rows>span{pointer-events:none;display:block;counter-increment:linenumber}.markdown-preview pre.line-numbers .line-numbers-rows>span:before{content:counter(linenumber);color:#999;display:block;padding-right:.8em;text-align:right}.markdown-preview .mathjax-exps .MathJax_Display{text-align:center!important}.markdown-preview:not([data-for=preview]) .code-chunk .code-chunk-btn-group{display:none}.markdown-preview:not([data-for=preview]) .code-chunk .status{display:none}.markdown-preview:not([data-for=preview]) .code-chunk .output-div{margin-bottom:16px}.markdown-preview .md-toc{padding:0}.markdown-preview .md-toc .md-toc-link-wrapper .md-toc-link{display:inline;padding:.25rem 0}.markdown-preview .md-toc .md-toc-link-wrapper .md-toc-link div,.markdown-preview .md-toc .md-toc-link-wrapper .md-toc-link p{display:inline}.markdown-preview .md-toc .md-toc-link-wrapper.highlighted .md-toc-link{font-weight:800}.scrollbar-style::-webkit-scrollbar{width:8px}.scrollbar-style::-webkit-scrollbar-track{border-radius:10px;background-color:transparent}.scrollbar-style::-webkit-scrollbar-thumb{border-radius:5px;background-color:rgba(150,150,150,.66);border:4px solid rgba(150,150,150,.66);background-clip:content-box}html body[for=html-export]:not([data-presentation-mode]){position:relative;width:100%;height:100%;top:0;left:0;margin:0;padding:0;overflow:auto}html body[for=html-export]:not([data-presentation-mode]) .markdown-preview{position:relative;top:0;min-height:100vh}@media screen and (min-width:914px){html body[for=html-export]:not([data-presentation-mode]) .markdown-preview{padding:2em calc(50% - 457px + 2em)}}@media screen and (max-width:914px){html body[for=html-export]:not([data-presentation-mode]) .markdown-preview{padding:2em}}@media screen and (max-width:450px){html body[for=html-export]:not([data-presentation-mode]) .markdown-preview{font-size:14px!important;padding:1em}}@media print{html body[for=html-export]:not([data-presentation-mode]) #sidebar-toc-btn{display:none}}html body[for=html-export]:not([data-presentation-mode]) #sidebar-toc-btn{position:fixed;bottom:8px;left:8px;font-size:28px;cursor:pointer;color:inherit;z-index:99;width:32px;text-align:center;opacity:.4}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] #sidebar-toc-btn{opacity:1}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc{position:fixed;top:0;left:0;width:300px;height:100%;padding:32px 0 48px 0;font-size:14px;box-shadow:0 0 4px rgba(150,150,150,.33);box-sizing:border-box;overflow:auto;background-color:inherit}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc::-webkit-scrollbar{width:8px}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc::-webkit-scrollbar-track{border-radius:10px;background-color:transparent}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc::-webkit-scrollbar-thumb{border-radius:5px;background-color:rgba(150,150,150,.66);border:4px solid rgba(150,150,150,.66);background-clip:content-box}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc a{text-decoration:none}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc .md-toc{padding:0 16px}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc .md-toc .md-toc-link-wrapper .md-toc-link{display:inline;padding:.25rem 0}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc .md-toc .md-toc-link-wrapper .md-toc-link div,html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc .md-toc .md-toc-link-wrapper .md-toc-link p{display:inline}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc .md-toc .md-toc-link-wrapper.highlighted .md-toc-link{font-weight:800}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .markdown-preview{left:300px;width:calc(100% - 300px);padding:2em calc(50% - 457px - 300px / 2);margin:0;box-sizing:border-box}@media screen and (max-width:1274px){html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .markdown-preview{padding:2em}}@media screen and (max-width:450px){html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .markdown-preview{width:100%}}html body[for=html-export]:not([data-presentation-mode]):not([html-show-sidebar-toc]) .markdown-preview{left:50%;transform:translateX(-50%)}html body[for=html-export]:not([data-presentation-mode]):not([html-show-sidebar-toc]) .md-sidebar-toc{display:none}@font-face{font-family:"Material Icons";font-style:normal;font-weight:400;src:local("Material Icons"),local("MaterialIcons-Regular"),url("data:application/x-font-woff;charset=utf-8;base64,d09GRgABAAAAAAfIAAsAAAAADDAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAABHU1VCAAABCAAAADMAAABCsP6z7U9TLzIAAAE8AAAARAAAAFZW7kosY21hcAAAAYAAAADTAAACjtP6ytBnbHlmAAACVAAAAxgAAAQ4zRtvlGhlYWQAAAVsAAAALwAAADYRwZsnaGhlYQAABZwAAAAcAAAAJAeKAzxobXR4AAAFuAAAABIAAAA8OGQAAGxvY2EAAAXMAAAAIAAAACAG5AfwbWF4cAAABewAAAAfAAAAIAEfAERuYW1lAAAGDAAAAVcAAAKFkAhoC3Bvc3QAAAdkAAAAYgAAAK2vz7wkeJxjYGRgYOBikGPQYWB0cfMJYeBgYGGAAJAMY05meiJQDMoDyrGAaQ4gZoOIAgCKIwNPAHicY2BkPsQ4gYGVgYOpk+kMAwNDP4RmfM1gxMjBwMDEwMrMgBUEpLmmMDgwVLy4xKzzX4chhrmK4QpQmBEkBwAZygyweJzFkr0NwjAQhZ+TEP6CRUfHBEwRUWaQTICyQbpMwRCskA5RUIONxG0RnnNpKAIV4qzPku/8c353ACYAYrIjCWCuMAh2ptf0/hiL3p/gyPUWa3osqlt0L1zu9r71z8dGrJRykFoauXQd932Lj5vhG+MjxGeYI8MKETObMpslf5EyP8tg+vHun5r539PvlvXzaVhRFVQDTPEWKVQR90KhnnC5Ek67vUKN4VuFasM/ldARj43CCkCsEjpJSoVVgRyU0GVSK6wUpFFCx8lFgX0BiXpRPQB4nE2TTWjcRhTH3xttpDhxN7uxPlp3u/FK7moRPixafRijNosxSw/LUsIwNcaEHPZggo/FmEKMCKWU4kNOOftQSlhE8alnH0Ix9BqWnHooPRrTQ0+mnu2bXTu2pPdGM9LM/6c3fwECTM4gBBMYQNqxzLrZAjqYSlqu2TAHZQA0/DQJH6FtzqGDnvbt4Ggwvzw/nL8EfH8kW0fsuRqhgWXZnY7M1picaUL7Du5BHeDzMIl83dAt016wH1qmvtSMo5R6YRJHTR//FXsff/nj/tc/5K9P5d+nP22+fFK5u7v3K39SW3y+OtDKO3L85vD09PD9z5X17a2N1g4tqk01RlqX7gyoEmnsWQtVr4rtZMmukEaFBZxzefkCn11cyKMLZgshRwgTYNoLNXCBz2ja7HvZG7hDpPSNfoo5vs0knK/9hb+rNpu+8kHPgk/Ao4kK3tWtTpSEtvkA9c+wE6UaUdwieNkaHg55tBEtRiEPw1s0+FtrtTcc9two2lhMknV7PZF/cs6+uUFTmpTGbEx7sQCPSLOttHS3GRltqp7SNzVSKzl6aWnZT/CX5k6/v9N3Hh8fHBwffJVjhrC6OgH5dkIt/tPsq+d/PD5Qz7G7efzq1THFjdZVPe/N6ulQ3JnDWSE5junsFsVIiFwL/htf1S5gJ3BfOcUxfHKLnzqpFpyfZ9cX+/5WB6a+Y0pHpzkNrYNVDwMsikK+y7WuLCRg/oFHkA8VT3rDg5ZnU6ktzzINymV0m74Xd5pfIGXyFeVEQSShkzqG7TBBa2OxVRKitLXv7h3uuftXnXq7lz2tZ/WnWa9dx9dCjDhHzmuVQATlmljr9dZErUydSo2Hbi/b1vXtrOeGCk2/8s3ZlO8+ueJT8BVlw5pGw2oYccdSiHHqx0RlabHqdNR9jAETl6PreJcPBnnfpTLnOQ8C3OV8AmQGzouV1iZdeb5SSIoVc8W8/kcDtksUH5FrU6/aqBqNWcMEzxG4DAQ14qRQhi9mWU0rzepKezbjfgCwQKxVYq5ajRgpRqy45CqwkJydcEkbTkvRz8P5/2ZpDTN4nGNgZGBgAOKb6v+/xvPbfGXgZmEAgeuB2kkI+v8bFgbmKiCXg4EJJAoAPyAKhQB4nGNgZGBg1vmvwxDDwgACQJKRARXwAwAzZQHQeJxjYQCCFAYGFgbSMQAcWACdAAAAAAAAAAwALgBgAIQAmADSAQgBIgE8AVABoAHeAfwCHHicY2BkYGDgZ7BgYGMAASYg5gJCBob/YD4DAA/hAWQAeJxlkbtuwkAURMc88gApQomUJoq0TdIQzEOpUDokKCNR0BuzBiO/tF6QSJcPyHflE9Klyyekz2CuG8cr7547M3d9JQO4xjccnJ57vid2cMHqxDWc40G4Tv1JuEF+Fm6ijRfhM+oz4Ra6eBVu4wZvvMFpXLIa40PYQQefwjVc4Uu4Tv1HuEH+FW7i1mkKn6Hj3Am3sHC6wm08Ou8tpSZGe1av1PKggjSxPd8zJtSGTuinyVGa6/Uu8kxZludCmzxMEzV0B6U004k25W35fj2yNlCBSWM1paujKFWZSbfat+7G2mzc7weiu34aczzFNYGBhgfLfcV6iQP3ACkSaj349AxXSN9IT0j16JepOb01doiKbNWt1ovippz6sVYYwsXgX2rGVFIkq7Pl2PNrI6qW6eOshj0xaSq9mpNEZIWs8LZUfOouNkVXxp/d5woqebeYIf4D2J1ywQB4nG3LOw6AIBAE0B384B+PAkgEa+QwNnYmHt+EpXSal5lkSBBnoP8oCFSo0aCFRIceA0ZMmLFAYSW88rmvtMUjG3RiQ9HvpfusM6zWNmtc5H/iPewha50tOt5PS/QBx2IeSwAA") format("woff")}.admonition{box-shadow:0 2px 2px 0 rgba(0,0,0,.14),0 1px 5px 0 rgba(0,0,0,.12),0 3px 1px -2px rgba(0,0,0,.2);position:relative;margin:1.5625em 0;padding:0 1.2rem;border-left:.4rem solid rgba(68,138,255,.8);border-radius:.2rem;background-color:rgba(255,255,255,.05);overflow:auto}.admonition>p{margin-top:.8rem}.admonition>.admonition-title{margin:0 -1.2rem;padding:.8rem 1.2rem .8rem 3.6rem;border-bottom:1px solid rgba(68,138,255,.2);background-color:rgba(68,138,255,.1);font-weight:700}.admonition>.admonition-title:before{position:absolute;left:1.2rem;font-size:1.5rem;color:rgba(68,138,255,.8);content:"\E3C9"}.admonition>.admonition-title:before{font-family:Material Icons;font-style:normal;font-variant:normal;font-weight:400;line-height:2rem;text-transform:none;white-space:nowrap;speak:none;word-wrap:normal;direction:ltr}.admonition.abstract,.admonition.summary,.admonition.tldr{border-left-color:rgba(0,176,255,.8)}.admonition.abstract>.admonition-title,.admonition.summary>.admonition-title,.admonition.tldr>.admonition-title{background-color:rgba(0,176,255,.1);border-bottom-color:rgba(0,176,255,.2)}.admonition.abstract>.admonition-title:before,.admonition.summary>.admonition-title:before,.admonition.tldr>.admonition-title:before{color:#00b0ff;content:"\E8D2"}.admonition.hint,.admonition.tip{border-left-color:rgba(0,191,165,.8)}.admonition.hint>.admonition-title,.admonition.tip>.admonition-title{background-color:rgba(0,191,165,.1);border-bottom-color:rgba(0,191,165,.2)}.admonition.hint>.admonition-title:before,.admonition.tip>.admonition-title:before{color:#00bfa5;content:"\E80E"}.admonition.info,.admonition.todo{border-left-color:rgba(0,184,212,.8)}.admonition.info>.admonition-title,.admonition.todo>.admonition-title{background-color:rgba(0,184,212,.1);border-bottom-color:rgba(0,184,212,.2)}.admonition.info>.admonition-title:before,.admonition.todo>.admonition-title:before{color:#00b8d4;content:"\E88E"}.admonition.check,.admonition.done,.admonition.success{border-left-color:rgba(0,200,83,.8)}.admonition.check>.admonition-title,.admonition.done>.admonition-title,.admonition.success>.admonition-title{background-color:rgba(0,200,83,.1);border-bottom-color:rgba(0,200,83,.2)}.admonition.check>.admonition-title:before,.admonition.done>.admonition-title:before,.admonition.success>.admonition-title:before{color:#00c853;content:"\E876"}.admonition.faq,.admonition.help,.admonition.question{border-left-color:rgba(100,221,23,.8)}.admonition.faq>.admonition-title,.admonition.help>.admonition-title,.admonition.question>.admonition-title{background-color:rgba(100,221,23,.1);border-bottom-color:rgba(100,221,23,.2)}.admonition.faq>.admonition-title:before,.admonition.help>.admonition-title:before,.admonition.question>.admonition-title:before{color:#64dd17;content:"\E887"}.admonition.attention,.admonition.caution,.admonition.warning{border-left-color:rgba(255,145,0,.8)}.admonition.attention>.admonition-title,.admonition.caution>.admonition-title,.admonition.warning>.admonition-title{background-color:rgba(255,145,0,.1);border-bottom-color:rgba(255,145,0,.2)}.admonition.attention>.admonition-title:before{color:#ff9100;content:"\E417"}.admonition.caution>.admonition-title:before,.admonition.warning>.admonition-title:before{color:#ff9100;content:"\E002"}.admonition.fail,.admonition.failure,.admonition.missing{border-left-color:rgba(255,82,82,.8)}.admonition.fail>.admonition-title,.admonition.failure>.admonition-title,.admonition.missing>.admonition-title{background-color:rgba(255,82,82,.1);border-bottom-color:rgba(255,82,82,.2)}.admonition.fail>.admonition-title:before,.admonition.failure>.admonition-title:before,.admonition.missing>.admonition-title:before{color:#ff5252;content:"\E14C"}.admonition.bug,.admonition.danger,.admonition.error{border-left-color:rgba(255,23,68,.8)}.admonition.bug>.admonition-title,.admonition.danger>.admonition-title,.admonition.error>.admonition-title{background-color:rgba(255,23,68,.1);border-bottom-color:rgba(255,23,68,.2)}.admonition.danger>.admonition-title:before{color:#ff1744;content:"\E3E7"}.admonition.error>.admonition-title:before{color:#ff1744;content:"\E14C"}.admonition.bug>.admonition-title:before{color:#ff1744;content:"\E868"}.admonition.example,.admonition.snippet{border-left-color:rgba(0,184,212,.8)}.admonition.example>.admonition-title,.admonition.snippet>.admonition-title{background-color:rgba(0,184,212,.1);border-bottom-color:rgba(0,184,212,.2)}.admonition.example>.admonition-title:before,.admonition.snippet>.admonition-title:before{color:#00b8d4;content:"\E242"}.admonition.cite,.admonition.quote{border-left-color:rgba(158,158,158,.8)}.admonition.cite>.admonition-title,.admonition.quote>.admonition-title{background-color:rgba(158,158,158,.1);border-bottom-color:rgba(158,158,158,.2)}.admonition.cite>.admonition-title:before,.admonition.quote>.admonition-title:before{color:#9e9e9e;content:"\E244"}
/* Please visit the URL below for more information: */
/*   https://shd101wyy.github.io/markdown-preview-enhanced/#/customize-css */
/* Please visit the URL below for more information: */
/*   https://shd101wyy.github.io/markdown-preview-enhanced/#/customize-css */

@font-face {
  font-family: 'Catamaran';
  font-style: normal;
  font-weight: 400;
  src: url(https://fonts.gstatic.com/s/catamaran/v27/o-0bIpQoyXQa2RxT7-5B6Ryxs2E_6n1iPHjd5a7dvg.ttf) format('truetype');
}
.markdown-preview.markdown-preview .box_bg_lightgray {
  background-color: #f5f5f5;
  border: 2px solid #969696;
  padding: 15px;
  margin-top: 15px;
  margin-bottom: 15px;
  border-radius: 5px;
  box-shadow: 0 0 7px 0 rgba(78, 120, 158, 0.1);
}
.markdown-preview.markdown-preview .box_bg_lightgreen {
  background-color: #f5faf5;
  border: 2px solid #969b96;
  padding-left: 15px;
  padding-right: 15px;
  margin-top: 15px;
  margin-bottom: 15px;
  border-radius: 5px;
  box-shadow: 0 0 7px 0 rgba(78, 120, 158, 0.1);
}
.markdown-preview.markdown-preview .contenedor {
  display: flex;
  justify-content: center;
  margin: 30px auto 30px auto;
}
.markdown-preview.markdown-preview .fondo {
  background: url(https://balmisdigigs.github.io/digitalizacion.github.io/imagenes/fondos/quote.png);
  background-size: cover;
  width: 75%;
  height: 160px;
  border-radius: 10px;
  position: relative;
}
.markdown-preview.markdown-preview .cita {
  font-family: Arial;
  font-style: italic;
  font-weight: 600;
  text-align: justify;
  line-height: 1.5rem;
  opacity: 0.6;
  color: white;
  padding: 5rem;
  position: relative;
  top: 50%;
  left: 50%;
  font-size: 1.3rem;
  transform: translate(-50%, -50%);
}
.markdown-preview.markdown-preview .abre_comilla {
  font-family: "Catamaran";
  font-weight: 600;
  color: white;
  padding-left: 30px;
  position: absolute;
  font-size: 6rem;
  transform: translate(0%, -15%);
}
.markdown-preview.markdown-preview .cierra_comilla {
  font-family: "Catamaran";
  font-weight: 600;
  color: white;
  padding-right: 30px;
  right: 0%;
  position: absolute;
  font-size: 6rem;
  transform: translate(0%, 55%);
}
.markdown-preview.markdown-preview .autor {
  font-family: Arial;
  color: white;
  margin: 0px;
  padding-left: 30px;
  position: absolute;
  top: 83%;
  font-size: 1rem;
}
.markdown-preview.markdown-preview .flotante {
  display: flex;
  margin-top: 15px;
  margin-bottom: 15px;
}
@media (max-width: 550px) {
  .markdown-preview.markdown-preview .flotante {
    justify-content: center;
  }
}
@media (min-width: 550px) {
  .markdown-preview.markdown-preview .flotante {
    justify-content: space-between;
  }
}
@media (max-width: 550px) {
  .markdown-preview.markdown-preview .flotante {
    flex-direction: column;
  }
}
@media (min-width: 550px) {
  .markdown-preview.markdown-preview .flotante {
    flex-direction: row;
  }
}
.markdown-preview.markdown-preview .flotante_izq {
  margin-right: 15px;
}
@media (max-width: 550px) {
  .markdown-preview.markdown-preview .flotante_izq {
    width: 100%;
  }
}
@media (min-width: 550px) {
  .markdown-preview.markdown-preview .flotante_izq {
    width: auto;
  }
}
@media (max-width: 550px) {
  .markdown-preview.markdown-preview .flotante_der {
    width: 100%;
  }
}
@media (min-width: 550px) {
  .markdown-preview.markdown-preview .flotante_der {
    width: auto;
  }
}
.markdown-preview.markdown-preview .galeria_imagenes {
  display: flex;
  justify-content: space-evenly;
  align-items: center;
  margin-top: 15px;
  margin-bottom: 15px;
}
@media (max-width: 550px) {
  .markdown-preview.markdown-preview .galeria_imagenes {
    flex-direction: column;
  }
}
@media (min-width: 550px) {
  .markdown-preview.markdown-preview .galeria_imagenes {
    flex-direction: row;
  }
}

      </style>
      <!-- The content below will be included at the end of the <head> element. --><script type="text/javascript">
  const configureMermaidIconPacks = () => {
    window["mermaid"].registerIconPacks([
      {
        name: "logos",
        loader: () =>
          fetch("https://unpkg.com/@iconify-json/logos@1/icons.json").then(
            (res) => res.json()
          ),
      },
    ]);
  };

  if (document.readyState !== 'loading') {
    configureMermaidIconPacks();
  } else {
    document.addEventListener("DOMContentLoaded", () => {
      configureMermaidIconPacks();
    });
  }
</script></head><body for="html-export">
    
    
      <div class="crossnote markdown-preview  ">
      
<style type="text/css">
.style-normal {
    text-indent: 0.5cm;
    text-align: justify;
}
.style-example {
    text-indent: 0.5cm;
    text-align: justify;
    text-size: small    
}
.style-title {
    text-indent: 0cm;
    text-align: center;    
}
table {
    table-layout: auto !important;
    width: fit-content !important;
    max-width: none !important;
    border-collapse: collapse;
}
</style>
<p><img src="../../../assets/img-BalmisHeader.png" alt="ONU"></p>
<div class="style-title">
<h1 id="unidad-01-dhcp">Unidad 01 DHCP </h1>
</div>
<p>📙<a href="./u0101.teoria.pdf">Descargar PDF</a></p>
<h2 id="índice">ÍNDICE </h2>
<div style="background-color: Lightgrey;">

<div class="md-toc">
<div class="md-toc-link-wrapper" style="padding:0;;display:list-item;list-style:square;margin-left:18px">
          <a href="#instalación-y-configuración-de-un-servidor-dhcp" class="md-toc-link">
            <p>INSTALACIÓN Y CONFIGURACIÓN DE UN SERVIDOR DHCP</p>

          </a></div><details style="padding:0;;padding-left:0px;" open="">
        <summary class="md-toc-link-wrapper">
          <a href="#el-servidor-isc-dhcp-server" class="md-toc-link"><p>EL SERVIDOR isc-dhcp-server</p>
</a>
          </summary>
        <div>
          <div class="md-toc-link-wrapper" style="padding:0;;display:list-item;list-style:square;margin-left:42px">
          <a href="#instalación" class="md-toc-link">
            <p>Instalación</p>

          </a></div><div class="md-toc-link-wrapper" style="padding:0;;display:list-item;list-style:square;margin-left:42px">
          <a href="#interfaces-del-servidor-dhcp" class="md-toc-link">
            <p>Interfaces del servidor DHCP</p>

          </a></div><details style="padding:0;;padding-left:24px;" open="">
        <summary class="md-toc-link-wrapper">
          <a href="#configuración-del-servidor-dhcp" class="md-toc-link"><p>Configuración del servidor DHCP</p>
</a>
          </summary>
        <div>
          <div class="md-toc-link-wrapper" style="padding:0;;display:list-item;list-style:square;margin-left:42px">
          <a href="#elementos-clave-de-configuración" class="md-toc-link">
            <p>Elementos clave de configuración</p>

          </a></div><div class="md-toc-link-wrapper" style="padding:0;;display:list-item;list-style:square;margin-left:42px">
          <a href="#estructura-general-de-las-declaraciones" class="md-toc-link">
            <p>Estructura general de las declaraciones</p>

          </a></div><div class="md-toc-link-wrapper" style="padding:0;;display:list-item;list-style:square;margin-left:42px">
          <a href="#parámetros-usuales" class="md-toc-link">
            <p>Parámetros usuales</p>

          </a></div><div class="md-toc-link-wrapper" style="padding:0;;display:list-item;list-style:square;margin-left:42px">
          <a href="#ejemplos" class="md-toc-link">
            <p>Ejemplos</p>

          </a></div>
        </div>
      </details>
    <div class="md-toc-link-wrapper" style="padding:0;;display:list-item;list-style:square;margin-left:42px">
          <a href="#gestión-de-concesiones-de-direcciones-ip" class="md-toc-link">
            <p>Gestión de concesiones de direcciones IP</p>

          </a></div>
        </div>
      </details>
    <details style="padding:0;;padding-left:0px;" open="">
        <summary class="md-toc-link-wrapper">
          <a href="#clientes-dhcp" class="md-toc-link"><p>Clientes DHCP</p>
</a>
          </summary>
        <div>
          <div class="md-toc-link-wrapper" style="padding:0;;display:list-item;list-style:square;margin-left:42px">
          <a href="#instalación-del-cliente-dhcp" class="md-toc-link">
            <p>Instalación del cliente DHCP</p>

          </a></div><div class="md-toc-link-wrapper" style="padding:0;;display:list-item;list-style:square;margin-left:42px">
          <a href="#uso-básico" class="md-toc-link">
            <p>Uso básico</p>

          </a></div><div class="md-toc-link-wrapper" style="padding:0;;display:list-item;list-style:square;margin-left:42px">
          <a href="#configuración-del-cliente-dhcp" class="md-toc-link">
            <p>Configuración del cliente DHCP</p>

          </a></div><div class="md-toc-link-wrapper" style="padding:0;;display:list-item;list-style:square;margin-left:42px">
          <a href="#almacenamiento-de-concesiones" class="md-toc-link">
            <p>Almacenamiento de concesiones</p>

          </a></div>
        </div>
      </details>
    <details style="padding:0;;padding-left:0px;" open="">
        <summary class="md-toc-link-wrapper">
          <a href="#agentes-de-retransmisión-dhcp-dhcp-relay" class="md-toc-link"><p>Agentes de retransmisión DHCP (DHCP Relay)</p>
</a>
          </summary>
        <div>
          <div class="md-toc-link-wrapper" style="padding:0;;display:list-item;list-style:square;margin-left:42px">
          <a href="#instalación-del-agente-de-retransmisión-dhcp-en-linux" class="md-toc-link">
            <p>Instalación del agente de retransmisión DHCP en Linux</p>

          </a></div><div class="md-toc-link-wrapper" style="padding:0;;display:list-item;list-style:square;margin-left:42px">
          <a href="#configuración-del-dhcp-relay" class="md-toc-link">
            <p>Configuración del DHCP Relay</p>

          </a></div>
        </div>
      </details>
    
</div>
</div>
<div style="page-break-after:always;"></div>
<h2 id="instalación-y-configuración-de-un-servidor-dhcp">INSTALACIÓN Y CONFIGURACIÓN DE UN SERVIDOR DHCP </h2>
<p>En los sistemas Linux básicamente tenemos dos opciones para instalar un servidor DHCP:</p>
<ul>
<li>Servidor DHCP proporcionado por el paquete <code>isc-dhcp-server</code>.</li>
<li>Servidor DHCP proporcionado por el paquete <code>dnsmasq</code>.</li>
</ul>
<p>En este documento nos centraremos en el servidor DHCP del ISC (Internet Systems Consortium).</p>
<h2 id="el-servidor-isc-dhcp-server">EL SERVIDOR isc-dhcp-server </h2>
<p>El servidor DHCP del ISC permite hacer configuraciones muy complejas del servicio DHCP. Nosotros nos centraremos en las configuraciones elementales.</p>
<h3 id="instalación">Instalación </h3>
<p>Lo primero que debemos hacer es instalar el paquete <strong><code>isc-dhcp-server</code></strong>. En distribuciones basadas en Debian, podemos hacerlo con cualquiera de los siguientes comandos:</p>
<pre data-role="codeBlock" data-info="text" class="language-text text"><code>apt install isc-dhcp-server
</code></pre><pre data-role="codeBlock" data-info="text" class="language-text text"><code>apt-get install isc-dhcp-server
</code></pre><h3 id="interfaces-del-servidor-dhcp">Interfaces del servidor DHCP </h3>
<p>En el archivo <strong><code>/etc/default/isc-dhcp-server</code></strong> se especifica por qué interfaces de red el servidor DHCP acepta peticiones (en caso de tener más de una). En versiones más modernas, el servidor también puede proporcionar direcciones IPv6.</p>
<p>La siguiente tabla muestra las directivas que se pueden configurar en dicho archivo:</p>
<table>
<thead>
<tr>
<th>Directiva</th>
<th>Descripción</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>INTERFACESv4="&lt;lista-adaptadores-red&gt;"</code></td>
<td>Especificamos los adaptadores de red por los cuales queremos que el servidor DHCP sirva direcciones IPv4.</td>
</tr>
<tr>
<td><code>INTERFACESv6="&lt;lista-adaptadores-red&gt;"</code></td>
<td>Especificamos los adaptadores de red por los cuales queremos que el servidor DHCP sirva direcciones IPv6.</td>
</tr>
<tr>
<td><code>DHCPDv4_CONF="&lt;archivo-configuracion-ipv4&gt;"</code></td>
<td>Especificamos el archivo de configuración del servidor DHCP para servir direcciones IPv4.</td>
</tr>
<tr>
<td><code>DHCPDv6_CONF="&lt;archivo-configuracion-ipv6&gt;"</code></td>
<td>Especificamos el archivo de configuración del servidor DHCP para servir direcciones IPv6.</td>
</tr>
<tr>
<td><code>DHCPDv4_PID="&lt;archivo-pid-ipv4&gt;"</code></td>
<td>Identificador del proceso servidor DHCP de direcciones IPv4.</td>
</tr>
<tr>
<td><code>DHCPDv6_PID="&lt;archivo-pid-ipv6&gt;"</code></td>
<td>Identificador del proceso servidor DHCP de direcciones IPv6.</td>
</tr>
</tbody>
</table>
<p>Por defecto, las directivas <code>DHCPDv4_CONF</code> y <code>DHCPDv6_CONF</code> aparecen comentadas, lo cual significa que hay un único archivo de configuración llamado <code>/etc/dhcp/dhcpd.conf</code>.</p>
<p>Por defecto, las directivas <code>DHCPDv4_PID</code> y <code>DHCPDv6_PID</code> también aparecen comentadas, lo cual indica que hay un único archivo PID que almacena el identificador del proceso, tanto para IPv4 como para IPv6. Este archivo es: <code>/var/run/dhcpd.pid</code>.</p>
<p>Por último, las directivas <code>INTERFACESv4</code> y <code>INTERFACESv6</code> aparecen con listas vacías, lo cual quiere decir que el servidor DHCP servirá direcciones IPv4 y IPv6 por todos los adaptadores de red que tenga. Si queremos que solo sirva direcciones IPv4, necesariamente debemos poner la lista de adaptadores de red en la directiva <code>INTERFACESv4</code> y dejar vacía la lista en <code>INTERFACESv6</code>.</p>
<div class="admonition example">
<p class="admonition-title">Adaptadores de red servidor DHCP</p>
<p>Un servidor DHCP tiene dos tarjetas de red llamadas <code>enp0s3</code> y <code>enp0s8</code>. Vamos a configurar el servidor DHCP de manera que solo sirva direcciones IPv4 por la interfaz <code>enp0s8</code>.</p>
<p><strong>Solución</strong><br>
Editamos el archivo de configuración de opciones por defecto <code>/etc/default/isc-dhcp-server</code> y configuramos las variables tal como se muestra a continuación:</p>
<pre data-role="codeBlock" data-info="text" class="language-text text"><code>INTERFACESv4="enp0s8"
INTERFACESv6=""
</code></pre></div>
<h3 id="configuración-del-servidor-dhcp">Configuración del servidor DHCP </h3>
<p>La configuración del servidor se realiza en el archivo <strong><code>/etc/dhcp/dhcpd.conf</code></strong> (si no hemos cambiado la configuración por defecto). Es un archivo de texto con una serie de entradas, normalmente una por línea. Si una entrada necesita varios parámetros, estos se pueden agrupar mediante llaves <code>{}</code> y cada parámetro va en una línea. Las líneas que empiezan por <code>#</code> son comentarios y son ignoradas.</p>
<p>Las entradas pueden ser:</p>
<ul>
<li><strong>Declaraciones</strong>: Se usan para describir redes, máquinas o grupos de máquinas junto con un rango de direcciones IP que se conceden para cada declaración.</li>
<li><strong>Parámetros</strong>: Describen el comportamiento del servidor DHCP. Pueden ser globales o locales a un conjunto de declaraciones.</li>
</ul>
<p>A continuación se muestra el esquema general del archivo de configuración:</p>
<pre data-role="codeBlock" data-info="text" class="language-text text"><code>Parámetros globales;
Declaración_1 {
    [Parámetros relativos a Declaración_1]
    [Subdeclaración anidada]
}
Declaración_2 {
    [Parámetros relativos a Declaración_2]
    [Subdeclaración anidada]
}
</code></pre><h4 id="elementos-clave-de-configuración">Elementos clave de configuración </h4>
<p>En el archivo de configuración se definen las redes en las que actúa el servidor DHCP y los rangos de direcciones que puede asignar. Las opciones más importantes son:</p>
<ul>
<li><strong>subnet</strong>: Aplica un conjunto de parámetros y/o declaraciones a un conjunto de direcciones que coincidan con los datos de la declaración.</li>
<li><strong>range</strong>: Establece un rango de direcciones IP válidas para asignar a los clientes. Los rangos se definen dentro de la red indicada en la declaración. Puede haber más de una declaración de rango, permitiendo definir rangos discontinuos.</li>
<li><strong>host</strong>: Permite definir reservas, de forma que se asigne siempre la misma IP a un equipo identificado por su dirección MAC.</li>
</ul>
<h4 id="estructura-general-de-las-declaraciones">Estructura general de las declaraciones </h4>
<div class="row">
<div class="col-sm-6 my-auto">
<pre data-role="codeBlock" data-info="text" class="language-text text"><code>subnet &lt;ip-red&gt; netmask &lt;máscara-red&gt; {
    range &lt;ip-inicial&gt; &lt;ip-final&gt;;
    [range &lt;ip-inicial&gt; &lt;ip-final&gt;;]
    [parámetros]
    [subdeclaraciones anidades]
}
</code></pre></div>
<div class="col-sm-6 my-auto">
<pre data-role="codeBlock" data-info="text" class="language-text text"><code>host &lt;nombre-equipo&gt; {
    hardware ethernet &lt;mac-equipo&gt;;
    [parámetros]
    fixed-address &lt;ip-fija&gt;;
}
</code></pre></div>
</div>
<p>Los parámetros que comienzan con <strong><code>option</code></strong> describen datos que el servidor proporciona al cliente como parte de la configuración IP. Los que no comienzan con <code>option</code> describen características del servidor DHCP.</p>
<p>Los parámetros definidos de manera global se aplican a todas las declaraciones definidas en el archivo. Por ejemplo, se puede definir un servidor DNS globalmente, de modo que si en una declaración subnet no se especifica ninguna opción DNS, se asignará a los clientes el DNS definido globalmente. Un parámetro dentro de una declaración, como por ejemplo subnet, sobrescribe el valor del mismo parámetro si este está definido de forma global.</p>
<p>En cuanto a las declaraciones host, hay que tener en cuenta que si reservamos una IP que está dentro de un rango definido por una cláusula <code>range</code> en una declaración <code>subnet</code>, esa IP puede ser asignada a cualquier cliente. Por tanto, en estos casos lo recomendable es utilizar direcciones IP que pertenezcan a una de las redes definidas en una declaración subnet, pero que no estén incluidas dentro del rango de direcciones especificado en la cláusula range.</p>
<p>Otro aspecto importante es que el tiempo de concesión asignado a la reserva no es ilimitado, sino que corresponde al tiempo definido en la declaración subnet, de forma global o por defecto. Este inconveniente se puede solucionar estableciendo el tiempo mínimo de concesión como infinito mediante una opción dentro de la declaración host.</p>
<h4 id="parámetros-usuales">Parámetros usuales </h4>
<p>Los parámetros de configuración general del servidor DHCP tinen la siguiente sintaxis:</p>
<pre data-role="codeBlock" data-info="text" class="language-text text"><code>parámetro [&lt;valor&gt;]
</code></pre><p>La siguiente tabla recoge los parámetros de configuración del servidor más comunes.</p>
<table>
<thead>
<tr>
<th>Parámetro</th>
<th>Descripción</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>authoritative</code></td>
<td>Marca el servidor como autoritativo. Esto evita que otros servidores DHCP puedan funcionar en la misma red.</td>
</tr>
<tr>
<td><code>default-lease-time &lt;segundos&gt;</code></td>
<td>Tiempo de concesión por defecto que se asignará a un cliente si no se especifica otro valor.</td>
</tr>
<tr>
<td><code>max-lease-time &lt;segundos&gt;</code></td>
<td>Tiempo máximo de concesión que podrá asignar el servidor.</td>
</tr>
<tr>
<td><code>min-lease-time &lt;segundos&gt;</code></td>
<td>Tiempo mínimo de concesión que podrá asignar el servidor. Se puede usar el valor <code>infinite</code>.</td>
</tr>
<tr>
<td><code>db-time-format &lt;default | local&gt;</code></td>
<td>Especifica cuál es el formato de las fechas relativas a las concesiones de direcciones que aparecen en el archivo de concesiones (<code>/var/lib/dhcp/dhcpd.leases</code>). Hay dos formas de configurar el formato de las fechas: por defecto (con formato <code>&lt;día-semana&gt; &lt;año&gt;/&lt;mes&gt;/&lt;día&gt; &lt;hora&gt;:&lt;minutos&gt;:&lt;segundos&gt;</code>) y local (con formato <code>epoch &lt;unix-time&gt;; #&lt;nombre-día&gt; &lt;nombre-mes&gt; &lt;día&gt; &lt;hora&gt;:&lt;minutos&gt;:&lt;segundos&gt; &lt;año&gt;</code>).</td>
</tr>
<tr>
<td><code>ddns-update-style &lt;none|ad-hoc|interim&gt;</code></td>
<td>El parámetro <code>ddns-update-style</code> indica el método que utiliza el servidor DHCP para actualizar de forma dinámica los registros del servidor DNS con las direcciones IP asignadas mediante DHCP. En nuestro caso, como no vamos a trabajar con DNS, se recomienda establecer el valor en <code>none</code>. Si se activa esta opción, el servidor DHCP actualizará automáticamente los registros DNS con las direcciones asignadas a los clientes. Además, mediante la opción <code>option domain-name</code>, se puede especificar el dominio en el que se realizarán estas actualizaciones DNS.</td>
</tr>
</tbody>
</table>
<p>La siguiente tabla recoge los parámetros opcionales más comunes ofrecidos a los clientes por el servidor DHCP.</p>
<table>
<thead>
<tr>
<th>Parámetro</th>
<th>Descripción</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>option routers &lt;ip&gt;</code></td>
<td>Indica la puerta de enlace predeterminada que se asignará a los clientes.</td>
</tr>
<tr>
<td><code>option domain-name-servers &lt;lista&gt;</code></td>
<td>Lista de servidores DNS que se asignarán a los clientes.</td>
</tr>
<tr>
<td><code>option domain-name &lt;nombre-dominio&gt;</code></td>
<td>Nombre del dominio que se asignará a los clientes.</td>
</tr>
</tbody>
</table>
<h4 id="ejemplos">Ejemplos </h4>
<div class="admonition example">
<p class="admonition-title">Configuración básica servidor DHCP</p>
<p>Vamos a configurar un servidor DHCP en un equipo con un único adaptador y sistema operativo Debian.<br>
Para llevar a cabo la configuración tendremos en cuenta las siguientes características:</p>
<ul>
<li><strong>IP servidor:</strong> <code>192.168.1.2</code></li>
<li><strong>Red:</strong> <code>192.168.1.0/24</code></li>
<li><strong>Rango de IPs:</strong> <code>192.168.1.128 – 192.168.1.254</code></li>
<li><strong>Router:</strong> <code>192.168.1.1</code></li>
<li><strong>DNS:</strong> <code>192.168.1.3</code>, <code>8.8.8.8</code></li>
<li><strong>Dominio DNS:</strong> <code>smr-ser.ies-balmis.dom</code></li>
<li><strong>Tiempo de concesión por defecto:</strong> 12 horas (<code>43200</code> segundos)</li>
<li><strong>Tiempo de concesión máximo:</strong> 24 horas (<code>86400</code> segundos)</li>
<li><strong>Tiempo de concesión mínimo:</strong> 6 horas (<code>21600</code> segundos)</li>
</ul>
<p><strong>Solución</strong><br>
Editamos el archivo de configuración por defecto <code>/etc/dhcp/dhcpd.conf</code> y añadimos (o modificamos) la siguiente información:</p>
<pre data-role="codeBlock" data-info="text" class="language-text text"><code>authoritative;

max-lease-time 86400;
min-lease-time 21600;

subnet 192.168.1.0 netmask 255.255.255.0 {
    range 192.168.1.128 192.168.1.254;
    option routers 192.168.1.1;
    option domain-name-servers 192.168.1.3, 8.8.8.8;
    option domain-name "smr-ser.ies-balmis.dom";
    default-lease-time 43200;
}
</code></pre></div>
<div class="admonition example">
<p class="admonition-title">Añadir nuevo ámbito al servidor DHCP</p>
<p>Vamos a añadir una tarjeta de red al servidor DHCP del ejemplo anterior para que también pueda servir IP's a los equipos de la red <code>192.168.2.0/24</code>. Para ello hay que tener en cuenta las siguientes características:</p>
<ul>
<li><strong>IP's servidor:</strong> <code>192.168.1.2</code> y <code>192.168.2.2</code>.</li>
<li><strong>Nueva red:</strong> <code>192.168.2.0/24</code></li>
<li><strong>Rangos de IPs:</strong> <code>192.168.2.64–192.168.2.127</code> y <code>192.168.2.192–192.168.2.254</code></li>
<li><strong>Duración de la concesión:</strong> 10 horas (<code>36000</code> segundos)</li>
<li><strong>Router:</strong> <code>192.168.2.1</code></li>
<li><strong>DNS:</strong> <code>8.8.4.4</code></li>
</ul>
<p>Además queremos que el servidor sólo sirva direcciones IPv4.</p>
<p><strong>Solución</strong><br>
Editamos el archivo de configuración por defecto <code>/etc/dhcp/dhcpd.conf</code> y añadimos la siguiente información:</p>
<pre data-role="codeBlock" data-info="text" class="language-text text"><code>subnet 192.168.2.0 netmask 255.255.255.0 {
    range 192.168.2.64 192.168.2.127;
    range 192.168.2.192 192.168.2.254;
    option routers 192.168.2.1;
    option domain-name-servers 8.8.4.4;
    default-lease-time 36000;
}
</code></pre><p>A continuación modificamos el fichero <code>/etc/default/isc-dhcp-server</code> para que sirva ip's a por las dos tarjetas de red y sólo sirva direcciones IPv4.</p>
<pre data-role="codeBlock" data-info="text" class="language-text text"><code>INTERFACESv4="enp0s3 enp0s8"
INTERFACESv6=""
</code></pre></div>
<div class="admonition example">
<p class="admonition-title">Reserva de IP</p>
<p>En el siguiente ejemplo vamos a hacer que el servidor DHCP asigne siempre la misma IP a una impresora de red.</p>
<p>Datos:</p>
<ul>
<li><strong>MAC impresora</strong>: <code>08:00:27:13:31:75</code></li>
<li><strong>IP asignada</strong>: <code>192.168.2.128</code></li>
</ul>
<p>Añadimos al archivo <code>/etc/dhcp/dhcpd.conf</code> la siguiente definición:</p>
<pre data-role="codeBlock" data-info="text" class="language-text text"><code>host Impresora {
    hardware ethernet 08:00:27:13:31:75;
    fixed-address 192.168.2.128;
    min-lease-time infinite;
}
</code></pre></div>
<h3 id="gestión-de-concesiones-de-direcciones-ip">Gestión de concesiones de direcciones IP </h3>
<p>El servidor DHCP utiliza un archivo de texto ASCII como base de datos para controlar qué direcciones IP ha asignado a los diferentes equipos de la red. El nombre del archivo de concesiones se puede especificar usando el parámetro <code>lease-file-name</code> en el archivo de configuración de DHCP. Si no se especifica, el valor por defecto es:</p>
<pre data-role="codeBlock" data-info="" class="language-text"><code>/var/lib/dhcp/dhcpd.leases
</code></pre><p>La estructura general del archivo es la siguiente:</p>
<pre data-role="codeBlock" data-info="plaintext" class="language-plaintext plaintext"><code>lease &lt;ip-cliente1&gt; {
    starts &lt;fecha-hora&gt;;
    ends &lt;fecha-hora&gt;;
    binding state active;
    hardware ethernet &lt;mac-cliente1&gt;;
    client-hostname "&lt;nombre&gt;";
}

lease &lt;ip-cliente2&gt; {
    starts &lt;fecha-hora&gt;;
    ends &lt;fecha-hora&gt;;
    binding state active;
    hardware ethernet &lt;mac-cliente2&gt;;
    client-hostname "&lt;nombre&gt;";
}

...
</code></pre><p>Este archivo almacena todas las concesiones de direcciones IP que ha realizado el servidor DHCP a los distintos equipos de la red. Cada concesión, activa o inactiva, se registra como un bloque que comienza con la palabra reservada <code>lease</code> seguida de la dirección IP asignada al cliente. Dentro de cada bloque se incluyen varias sentencias con información relevante sobre la concesión, de las cuales destacamos las que aparecen en la siguiente tabla:</p>
<table>
<thead>
<tr>
<th>Sentencia</th>
<th>Descripción</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>starts &lt;fecha-hora&gt;</code></td>
<td>Indica la fecha y hora en la que se inicia la concesión de la dirección IP al cliente. Este valor se registra automáticamente por el servidor DHCP y su formato depende del parámetro <code>db-time-format</code> configurado en el servidor.</td>
</tr>
<tr>
<td><code>ends &lt;fecha-hora&gt;</code></td>
<td>Fecha y hora en la que finaliza la concesión.</td>
</tr>
<tr>
<td><code>binding state &lt;estado&gt;</code></td>
<td>Estado de la concesión. Puede ser <code>active</code> (activa), <code>free</code> (libre) o <code>abandoned</code> (abandonada).</td>
</tr>
<tr>
<td><code>hardware ethernet &lt;mac-cliente&gt;</code></td>
<td>Dirección MAC del cliente al que se le ha asignado la dirección IP.</td>
</tr>
<tr>
<td><code>client-hostname "&lt;nombre&gt;"</code></td>
<td>Nombre del cliente al que se le ha asignado la dirección IP.</td>
</tr>
<tr>
<td><code>next-binding state &lt;estado&gt;</code></td>
<td>Estado de la concesión en el siguiente ciclo de concesión. Puede ser <code>active</code>, <code>free</code> o <code>abandoned</code>.</td>
</tr>
</tbody>
</table>
<p>El archivo de concesiones se reescribe periódicamente para evitar que crezca demasiado. Para ello, se crea un archivo temporal con el contenido actualizado de las concesiones. El archivo anterior se renombra añadiendo el sufijo ~ (por ejemplo, <code>/var/lib/dhcp/dhcpd.leases~</code>) y, a continuación, el archivo temporal pasa a tener el nombre del archivo de concesiones configurado.</p>
<p>Puedes encontrar más información en las páginas del manual del sistema operativo ejecutando el comando <code>man dhcpd.leases</code> en la terminal.</p>
<p>Este archivo puede consultarse con un editor de texto o utilizando la utilidad <code>dhcp-lease-list</code>, que muestra la información de forma más legible.<br>
El comando <code>dhcp-lease-list</code> permite consultar de forma sencilla y legible las concesiones de direcciones IP gestionadas por el servidor DHCP. Muestra información relevante como la dirección IP asignada, la dirección MAC del cliente, el estado de la concesión y el tiempo restante, entre otros datos. Es especialmente útil para obtener un resumen rápido de las concesiones activas o históricas sin necesidad de revisar manualmente el archivo de concesiones.<br>
La sintaxis general del comando es:</p>
<pre data-role="codeBlock" data-info="text" class="language-text text"><code>dhcp-lease-list [opciones]
</code></pre><p>Entre las opciones más comunes se encuentran:</p>
<ul>
<li>
<p><code>--all</code><br>
Muestra todas las concesiones, tanto activas como inactivas.</p>
</li>
<li>
<p><code>--parsable</code><br>
Muestra la salida en un formato más legible y fácil de procesar.</p>
</li>
<li>
<p><code>--help</code><br>
Muestra la ayuda del comando con todas las opciones disponibles.</p>
</li>
</ul>
<div class="admonition example">
<p class="admonition-title">Consulta concesiones DHCP activas</p>
<pre data-role="codeBlock" data-info="text" class="language-text text"><code>root@DHCP:~# dhcp-lease-list
Reading leases from /var/lib/dhcp/dhcpleases     
MAC                IP              hostname           valid until          manufacturer
=========================================================================================
08:00:27:0d:f2:57  192.168.1.130   PC3-X1             2023-11-02 19:43:27 -NA-
08:00:27:0d:e7:32  192.168.2.64    PC1-X2             2023-11-02 22:02:13 -NA-
</code></pre><p>En el siguiente se observa, por un lado, que el host PC1-X2 tiene una concesión activa de la dirección IP 192.168.2.64 hasta el 2 de noviembre de 2023 a las 22:02:13 y por otro lado, que el host PC3-X1 tiene una concesión activa de la dirección IP 192.168.2.130 hasta el 2 de noviembre de 2023 a las 19:43:27.</p>
</div>
<h2 id="clientes-dhcp">Clientes DHCP </h2>
<p>Para que un equipo pueda obtener una dirección IP de forma dinámica en una red, es necesario que tenga instalado un cliente DHCP. Este cliente se encarga de solicitar la configuración de red al servidor DHCP. El cliente DHCP más común en sistemas Linux es <strong><code>dhclient</code></strong>, incluido en el paquete <code>isc-dhcp-client</code>.</p>
<h3 id="instalación-del-cliente-dhcp">Instalación del cliente DHCP </h3>
<p>El cliente DHCP suele venir preinstalado en la mayoría de las distribuciones Linux. Sin embargo, si no está instalado, se puede instalar fácilmente utilizando el gestor de paquetes correspondiente. Para instalar el cliente DHCP en sistemas basados en Debian/Ubuntu:</p>
<pre data-role="codeBlock" data-info="text" class="language-text text"><code>apt install isc-dhcp-client
</code></pre><h3 id="uso-básico">Uso básico </h3>
<p>El cliente DHCP suele ejecutarse automáticamente al iniciar el sistema o al conectar un adaptador de red. Sin embargo, también puede ejecutarse manualmente para renovar o liberar una concesión de dirección IP:</p>
<pre data-role="codeBlock" data-info="bash" class="language-bash bash"><code>dhclient <span class="token punctuation">[</span>interfaz<span class="token punctuation">]</span>         <span class="token comment"># Solicita o renueva una dirección IP para la interfaz indicada</span>
dhclient <span class="token parameter variable">-r</span> <span class="token punctuation">[</span>interfaz<span class="token punctuation">]</span>      <span class="token comment"># Libera la concesión de la dirección IP de la interfaz indicada</span>
</code></pre><h3 id="configuración-del-cliente-dhcp">Configuración del cliente DHCP </h3>
<p>La configuración principal del cliente DHCP se realiza en el archivo <code>/etc/dhcp/dhclient.conf</code>. En este archivo se pueden personalizar aspectos como las opciones que solicita el cliente al servidor o el comportamiento ante las concesiones de direcciones IP. Algunos parámetros habituales en <code>dhclient.conf</code> son:</p>
<ul>
<li><code>request &lt;opciones&gt;</code>: Especifica una lista de opciones que el cliente solicita al servidor. El servidor puede proporcionarlas o no.</li>
<li><code>require &lt;opciones&gt;</code>: Indica opciones que el cliente considera obligatorias. Si el servidor no las proporciona, el cliente rechaza la IP ofrecida.</li>
<li><code>send &lt;opción&gt; &lt;valor&gt;</code>: Permite enviar una opción concreta con un valor determinado al servidor DHCP.</li>
</ul>
<p>Por defecto, <code>dhclient</code> funciona con una configuración estándar, pero puede adaptarse a las necesidades del usuario modificando este archivo.</p>
<h3 id="almacenamiento-de-concesiones">Almacenamiento de concesiones </h3>
<p>El cliente almacena la información de las concesiones recibidas del servidor DHCP en archivos similares a los del propio servidor. Los archivos habituales son:</p>
<ul>
<li><code>/var/lib/dhcp/dhclient.leases</code> (archivo general)</li>
<li><code>/var/lib/dhcp/dhclient.&lt;adaptador&gt;.leases</code> (uno por cada interfaz de red)</li>
</ul>
<p>Cada archivo contiene una serie de bloques <code>lease</code>, uno por cada concesión obtenida o renovada, ordenados cronológicamente (la última concesión aparece al final). En cada bloque se incluye información como:</p>
<ul>
<li><code>interface "&lt;adaptador&gt;"</code>: Nombre de la interfaz de red.</li>
<li><code>renew &lt;tiempo&gt;</code>: Momento en que debe renovarse la concesión.</li>
<li><code>rebind &lt;tiempo&gt;</code>: Momento en que debe intentar reasociarse.</li>
<li><code>expire &lt;tiempo&gt;</code>: Momento en que expira la concesión.</li>
<li>Opciones recibidas del servidor, indicadas con la palabra <code>option</code>.</li>
</ul>
<p>La configuración avanzada del cliente DHCP puede ser compleja y está fuera del alcance de este curso, pero con estos conceptos básicos es posible gestionar la obtención dinámica de direcciones IP en sistemas Linux.</p>
<h2 id="agentes-de-retransmisión-dhcp-dhcp-relay">Agentes de retransmisión DHCP (DHCP Relay) </h2>
<p>Un agente de retransmisión DHCP permite transmitir peticiones DHCP entre diferentes subredes, facilitando que los clientes puedan obtener una dirección IP aunque el servidor DHCP no esté en su misma red.<br>
En sistemas Linux, la instalación y configuración de un agente de retransmisión es sencilla gracias al paquete proporcionado por ISC (Internet Software Consortium): <strong>isc-dhcp-relay</strong>.</p>
<h3 id="instalación-del-agente-de-retransmisión-dhcp-en-linux">Instalación del agente de retransmisión DHCP en Linux </h3>
<p>Para instalar el agente de retransmisión DHCP en sistemas basados en Debian/Ubuntu, puedes utilizar el siguiente comando:</p>
<pre data-role="codeBlock" data-info="text" class="language-text text"><code>apt install isc-dhcp-relay
</code></pre><h3 id="configuración-del-dhcp-relay">Configuración del DHCP Relay </h3>
<p>Una vez instalado, el agente de retransmisión DHCP se configura principalmente editando el archivo <code>/etc/default/isc-dhcp-relay</code>. Durante la instalación se solicitarán los siguientes datos:</p>
<ul>
<li><strong>Dirección IP del servidor DHCP</strong>: Una o varias direcciones IP de los servidores a los que el relay enviará las peticiones.</li>
<li><strong>Interfaces de red</strong>: Interfaces por las que el agente gestionará las peticiones DHCP.</li>
<li><strong>Otras opciones</strong>: Opcionalmente, se pueden añadir parámetros adicionales.</li>
</ul>
<p>Las principales directivas de configuración en este archivo son:</p>
<table>
<thead>
<tr>
<th>Directiva</th>
<th>Descripción</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>SERVERS</code></td>
<td>Direcciones IP de los servidores DHCP a los que se reenviarán las peticiones.</td>
</tr>
<tr>
<td><code>INTERFACES</code></td>
<td>Nombres de las interfaces de red implicadas en la retransmisión.</td>
</tr>
<tr>
<td><code>OPTIONS</code></td>
<td>Opciones adicionales reconocidas por el servicio <code>dhcprelay</code> (opcional).</td>
</tr>
</tbody>
</table>
<div class="admonition example">
<p class="admonition-title">Configuración del agente de retransmisión DHCP</p>
<p>Supongamos que partimos del servidor DHCP configurado en el segundo ejemplo y queremos que también asigne direcciones IP a los equipos de la segunda red (<code>192.168.2.0/24</code>). Para ello, es necesario instalar un agente DHCP Relay en la segunda red. Este agente se encargará de recibir las peticiones DHCP de los clientes de esa red y reenviarlas al servidor DHCP principal. Supongamos que el equipo donde instalamos el DHCP Relay tiene la IP <code>192.168.2.4</code>.</p>
<p><strong>Solución</strong><br>
Durante la instalación del servicio, se nos solicitarán los siguientes datos:</p>
<ul>
<li>
<p><strong>En la primera pantalla:</strong> Introducimos la IP del servidor DHCP.<br>
<img src="./assets/dhcp-relay-linux-srv.png" alt="DHCP Relay: IP Servidor DHCP"></p>
</li>
<li>
<p><strong>En la segunda pantalla:</strong> Indicamos el nombre de la interfaz de red del equipo.<br>
<img src="./assets/dhcp-relay-linux-adaptador.png" alt="DHCP Relay: Tarjeta de red"></p>
</li>
<li>
<p><strong>En la tercera pantalla:</strong> Dejamos el campo vacío.<br>
<img src="./assets/dhcp-relay-linux-opciones.png" alt="DHCP Relay: Opciones"></p>
</li>
</ul>
<p>Si hemos introducido correctamente todos los datos, el archivo de configuración del DHCP Relay debe contener los siguientes valores para sus parámetros:</p>
<pre data-role="codeBlock" data-info="text" class="language-text text"><code># What servers should the DHCP relay forward requests to?
SERVERS="192.168.1.2"

# On what interfaces should the DHCP relay (dhrelay) serve DHCP requests?
# Hemos supuesto que el nombre del adaptador de red es enp0s3
INTERFACES="enp0s3"

# Additional options that are passed to the DHCP relay daemon?
OPTIONS=""
</code></pre></div>

      </div>
      
      
    
    
    
    
    
    
  
    </body></html>