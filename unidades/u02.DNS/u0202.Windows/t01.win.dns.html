<!DOCTYPE html><html><head>
      <title>SER</title>
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      
      <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.25/dist/katex.min.css">
      
      
      
      
      
      <style>
      @import url(https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css);
code[class*=language-],pre[class*=language-]{color:#333;background:0 0;font-family:Consolas,"Liberation Mono",Menlo,Courier,monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.4;-moz-tab-size:8;-o-tab-size:8;tab-size:8;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none}pre[class*=language-]{padding:.8em;overflow:auto;border-radius:3px;background:#f5f5f5}:not(pre)>code[class*=language-]{padding:.1em;border-radius:.3em;white-space:normal;background:#f5f5f5}.token.blockquote,.token.comment{color:#969896}.token.cdata{color:#183691}.token.doctype,.token.macro.property,.token.punctuation,.token.variable{color:#333}.token.builtin,.token.important,.token.keyword,.token.operator,.token.rule{color:#a71d5d}.token.attr-value,.token.regex,.token.string,.token.url{color:#183691}.token.atrule,.token.boolean,.token.code,.token.command,.token.constant,.token.entity,.token.number,.token.property,.token.symbol{color:#0086b3}.token.prolog,.token.selector,.token.tag{color:#63a35c}.token.attr-name,.token.class,.token.class-name,.token.function,.token.id,.token.namespace,.token.pseudo-class,.token.pseudo-element,.token.url-reference .token.variable{color:#795da3}.token.entity{cursor:help}.token.title,.token.title .token.punctuation{font-weight:700;color:#1d3e81}.token.list{color:#ed6a43}.token.inserted{background-color:#eaffea;color:#55a532}.token.deleted{background-color:#ffecec;color:#bd2c00}.token.bold{font-weight:700}.token.italic{font-style:italic}.language-json .token.property{color:#183691}.language-markup .token.tag .token.punctuation{color:#333}.language-css .token.function,code.language-css{color:#0086b3}.language-yaml .token.atrule{color:#63a35c}code.language-yaml{color:#183691}.language-ruby .token.function{color:#333}.language-markdown .token.url{color:#795da3}.language-makefile .token.symbol{color:#795da3}.language-makefile .token.variable{color:#183691}.language-makefile .token.builtin{color:#0086b3}.language-bash .token.keyword{color:#0086b3}pre[data-line]{position:relative;padding:1em 0 1em 3em}pre[data-line] .line-highlight-wrapper{position:absolute;top:0;left:0;background-color:transparent;display:block;width:100%}pre[data-line] .line-highlight{position:absolute;left:0;right:0;padding:inherit 0;margin-top:1em;background:hsla(24,20%,50%,.08);background:linear-gradient(to right,hsla(24,20%,50%,.1) 70%,hsla(24,20%,50%,0));pointer-events:none;line-height:inherit;white-space:pre}pre[data-line] .line-highlight:before,pre[data-line] .line-highlight[data-end]:after{content:attr(data-start);position:absolute;top:.4em;left:.6em;min-width:1em;padding:0 .5em;background-color:hsla(24,20%,50%,.4);color:#f4f1ef;font:bold 65%/1.5 sans-serif;text-align:center;vertical-align:.3em;border-radius:999px;text-shadow:none;box-shadow:0 1px #fff}pre[data-line] .line-highlight[data-end]:after{content:attr(data-end);top:auto;bottom:.4em}html body{font-family:'Helvetica Neue',Helvetica,'Segoe UI',Arial,freesans,sans-serif;font-size:16px;line-height:1.6;color:#333;background-color:#fff;overflow:initial;box-sizing:border-box;word-wrap:break-word}html body>:first-child{margin-top:0}html body h1,html body h2,html body h3,html body h4,html body h5,html body h6{line-height:1.2;margin-top:1em;margin-bottom:16px;color:#000}html body h1{font-size:2.25em;font-weight:300;padding-bottom:.3em}html body h2{font-size:1.75em;font-weight:400;padding-bottom:.3em}html body h3{font-size:1.5em;font-weight:500}html body h4{font-size:1.25em;font-weight:600}html body h5{font-size:1.1em;font-weight:600}html body h6{font-size:1em;font-weight:600}html body h1,html body h2,html body h3,html body h4,html body h5{font-weight:600}html body h5{font-size:1em}html body h6{color:#5c5c5c}html body strong{color:#000}html body del{color:#5c5c5c}html body a:not([href]){color:inherit;text-decoration:none}html body a{color:#08c;text-decoration:none}html body a:hover{color:#00a3f5;text-decoration:none}html body img{max-width:100%}html body>p{margin-top:0;margin-bottom:16px;word-wrap:break-word}html body>ol,html body>ul{margin-bottom:16px}html body ol,html body ul{padding-left:2em}html body ol.no-list,html body ul.no-list{padding:0;list-style-type:none}html body ol ol,html body ol ul,html body ul ol,html body ul ul{margin-top:0;margin-bottom:0}html body li{margin-bottom:0}html body li.task-list-item{list-style:none}html body li>p{margin-top:0;margin-bottom:0}html body .task-list-item-checkbox{margin:0 .2em .25em -1.8em;vertical-align:middle}html body .task-list-item-checkbox:hover{cursor:pointer}html body blockquote{margin:16px 0;font-size:inherit;padding:0 15px;color:#5c5c5c;background-color:#f0f0f0;border-left:4px solid #d6d6d6}html body blockquote>:first-child{margin-top:0}html body blockquote>:last-child{margin-bottom:0}html body hr{height:4px;margin:32px 0;background-color:#d6d6d6;border:0 none}html body table{margin:10px 0 15px 0;border-collapse:collapse;border-spacing:0;display:block;width:100%;overflow:auto;word-break:normal;word-break:keep-all}html body table th{font-weight:700;color:#000}html body table td,html body table th{border:1px solid #d6d6d6;padding:6px 13px}html body dl{padding:0}html body dl dt{padding:0;margin-top:16px;font-size:1em;font-style:italic;font-weight:700}html body dl dd{padding:0 16px;margin-bottom:16px}html body code{font-family:Menlo,Monaco,Consolas,'Courier New',monospace;font-size:.85em;color:#000;background-color:#f0f0f0;border-radius:3px;padding:.2em 0}html body code::after,html body code::before{letter-spacing:-.2em;content:'\00a0'}html body pre>code{padding:0;margin:0;word-break:normal;white-space:pre;background:0 0;border:0}html body .highlight{margin-bottom:16px}html body .highlight pre,html body pre{padding:1em;overflow:auto;line-height:1.45;border:#d6d6d6;border-radius:3px}html body .highlight pre{margin-bottom:0;word-break:normal}html body pre code,html body pre tt{display:inline;max-width:initial;padding:0;margin:0;overflow:initial;line-height:inherit;word-wrap:normal;background-color:transparent;border:0}html body pre code:after,html body pre code:before,html body pre tt:after,html body pre tt:before{content:normal}html body blockquote,html body dl,html body ol,html body p,html body pre,html body ul{margin-top:0;margin-bottom:16px}html body kbd{color:#000;border:1px solid #d6d6d6;border-bottom:2px solid #c7c7c7;padding:2px 4px;background-color:#f0f0f0;border-radius:3px}@media print{html body{background-color:#fff}html body h1,html body h2,html body h3,html body h4,html body h5,html body h6{color:#000;page-break-after:avoid}html body blockquote{color:#5c5c5c}html body pre{page-break-inside:avoid}html body table{display:table}html body img{display:block;max-width:100%;max-height:100%}html body code,html body pre{word-wrap:break-word;white-space:pre}}.markdown-preview{width:100%;height:100%;box-sizing:border-box}.markdown-preview ul{list-style:disc}.markdown-preview ul ul{list-style:circle}.markdown-preview ul ul ul{list-style:square}.markdown-preview ol{list-style:decimal}.markdown-preview ol ol,.markdown-preview ul ol{list-style-type:lower-roman}.markdown-preview ol ol ol,.markdown-preview ol ul ol,.markdown-preview ul ol ol,.markdown-preview ul ul ol{list-style-type:lower-alpha}.markdown-preview .newpage,.markdown-preview .pagebreak{page-break-before:always}.markdown-preview pre.line-numbers{position:relative;padding-left:3.8em;counter-reset:linenumber}.markdown-preview pre.line-numbers>code{position:relative}.markdown-preview pre.line-numbers .line-numbers-rows{position:absolute;pointer-events:none;top:1em;font-size:100%;left:0;width:3em;letter-spacing:-1px;border-right:1px solid #999;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.markdown-preview pre.line-numbers .line-numbers-rows>span{pointer-events:none;display:block;counter-increment:linenumber}.markdown-preview pre.line-numbers .line-numbers-rows>span:before{content:counter(linenumber);color:#999;display:block;padding-right:.8em;text-align:right}.markdown-preview .mathjax-exps .MathJax_Display{text-align:center!important}.markdown-preview:not([data-for=preview]) .code-chunk .code-chunk-btn-group{display:none}.markdown-preview:not([data-for=preview]) .code-chunk .status{display:none}.markdown-preview:not([data-for=preview]) .code-chunk .output-div{margin-bottom:16px}.markdown-preview .md-toc{padding:0}.markdown-preview .md-toc .md-toc-link-wrapper .md-toc-link{display:inline;padding:.25rem 0}.markdown-preview .md-toc .md-toc-link-wrapper .md-toc-link div,.markdown-preview .md-toc .md-toc-link-wrapper .md-toc-link p{display:inline}.markdown-preview .md-toc .md-toc-link-wrapper.highlighted .md-toc-link{font-weight:800}.scrollbar-style::-webkit-scrollbar{width:8px}.scrollbar-style::-webkit-scrollbar-track{border-radius:10px;background-color:transparent}.scrollbar-style::-webkit-scrollbar-thumb{border-radius:5px;background-color:rgba(150,150,150,.66);border:4px solid rgba(150,150,150,.66);background-clip:content-box}html body[for=html-export]:not([data-presentation-mode]){position:relative;width:100%;height:100%;top:0;left:0;margin:0;padding:0;overflow:auto}html body[for=html-export]:not([data-presentation-mode]) .markdown-preview{position:relative;top:0;min-height:100vh}@media screen and (min-width:914px){html body[for=html-export]:not([data-presentation-mode]) .markdown-preview{padding:2em calc(50% - 457px + 2em)}}@media screen and (max-width:914px){html body[for=html-export]:not([data-presentation-mode]) .markdown-preview{padding:2em}}@media screen and (max-width:450px){html body[for=html-export]:not([data-presentation-mode]) .markdown-preview{font-size:14px!important;padding:1em}}@media print{html body[for=html-export]:not([data-presentation-mode]) #sidebar-toc-btn{display:none}}html body[for=html-export]:not([data-presentation-mode]) #sidebar-toc-btn{position:fixed;bottom:8px;left:8px;font-size:28px;cursor:pointer;color:inherit;z-index:99;width:32px;text-align:center;opacity:.4}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] #sidebar-toc-btn{opacity:1}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc{position:fixed;top:0;left:0;width:300px;height:100%;padding:32px 0 48px 0;font-size:14px;box-shadow:0 0 4px rgba(150,150,150,.33);box-sizing:border-box;overflow:auto;background-color:inherit}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc::-webkit-scrollbar{width:8px}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc::-webkit-scrollbar-track{border-radius:10px;background-color:transparent}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc::-webkit-scrollbar-thumb{border-radius:5px;background-color:rgba(150,150,150,.66);border:4px solid rgba(150,150,150,.66);background-clip:content-box}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc a{text-decoration:none}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc .md-toc{padding:0 16px}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc .md-toc .md-toc-link-wrapper .md-toc-link{display:inline;padding:.25rem 0}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc .md-toc .md-toc-link-wrapper .md-toc-link div,html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc .md-toc .md-toc-link-wrapper .md-toc-link p{display:inline}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc .md-toc .md-toc-link-wrapper.highlighted .md-toc-link{font-weight:800}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .markdown-preview{left:300px;width:calc(100% - 300px);padding:2em calc(50% - 457px - 300px / 2);margin:0;box-sizing:border-box}@media screen and (max-width:1274px){html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .markdown-preview{padding:2em}}@media screen and (max-width:450px){html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .markdown-preview{width:100%}}html body[for=html-export]:not([data-presentation-mode]):not([html-show-sidebar-toc]) .markdown-preview{left:50%;transform:translateX(-50%)}html body[for=html-export]:not([data-presentation-mode]):not([html-show-sidebar-toc]) .md-sidebar-toc{display:none}@font-face{font-family:"Material Icons";font-style:normal;font-weight:400;src:local("Material Icons"),local("MaterialIcons-Regular"),url("data:application/x-font-woff;charset=utf-8;base64,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") format("woff")}.admonition{box-shadow:0 2px 2px 0 rgba(0,0,0,.14),0 1px 5px 0 rgba(0,0,0,.12),0 3px 1px -2px rgba(0,0,0,.2);position:relative;margin:1.5625em 0;padding:0 1.2rem;border-left:.4rem solid rgba(68,138,255,.8);border-radius:.2rem;background-color:rgba(255,255,255,.05);overflow:auto}.admonition>p{margin-top:.8rem}.admonition>.admonition-title{margin:0 -1.2rem;padding:.8rem 1.2rem .8rem 3.6rem;border-bottom:1px solid rgba(68,138,255,.2);background-color:rgba(68,138,255,.1);font-weight:700}.admonition>.admonition-title:before{position:absolute;left:1.2rem;font-size:1.5rem;color:rgba(68,138,255,.8);content:"\E3C9"}.admonition>.admonition-title:before{font-family:Material Icons;font-style:normal;font-variant:normal;font-weight:400;line-height:2rem;text-transform:none;white-space:nowrap;speak:none;word-wrap:normal;direction:ltr}.admonition.abstract,.admonition.summary,.admonition.tldr{border-left-color:rgba(0,176,255,.8)}.admonition.abstract>.admonition-title,.admonition.summary>.admonition-title,.admonition.tldr>.admonition-title{background-color:rgba(0,176,255,.1);border-bottom-color:rgba(0,176,255,.2)}.admonition.abstract>.admonition-title:before,.admonition.summary>.admonition-title:before,.admonition.tldr>.admonition-title:before{color:#00b0ff;content:"\E8D2"}.admonition.hint,.admonition.tip{border-left-color:rgba(0,191,165,.8)}.admonition.hint>.admonition-title,.admonition.tip>.admonition-title{background-color:rgba(0,191,165,.1);border-bottom-color:rgba(0,191,165,.2)}.admonition.hint>.admonition-title:before,.admonition.tip>.admonition-title:before{color:#00bfa5;content:"\E80E"}.admonition.info,.admonition.todo{border-left-color:rgba(0,184,212,.8)}.admonition.info>.admonition-title,.admonition.todo>.admonition-title{background-color:rgba(0,184,212,.1);border-bottom-color:rgba(0,184,212,.2)}.admonition.info>.admonition-title:before,.admonition.todo>.admonition-title:before{color:#00b8d4;content:"\E88E"}.admonition.check,.admonition.done,.admonition.success{border-left-color:rgba(0,200,83,.8)}.admonition.check>.admonition-title,.admonition.done>.admonition-title,.admonition.success>.admonition-title{background-color:rgba(0,200,83,.1);border-bottom-color:rgba(0,200,83,.2)}.admonition.check>.admonition-title:before,.admonition.done>.admonition-title:before,.admonition.success>.admonition-title:before{color:#00c853;content:"\E876"}.admonition.faq,.admonition.help,.admonition.question{border-left-color:rgba(100,221,23,.8)}.admonition.faq>.admonition-title,.admonition.help>.admonition-title,.admonition.question>.admonition-title{background-color:rgba(100,221,23,.1);border-bottom-color:rgba(100,221,23,.2)}.admonition.faq>.admonition-title:before,.admonition.help>.admonition-title:before,.admonition.question>.admonition-title:before{color:#64dd17;content:"\E887"}.admonition.attention,.admonition.caution,.admonition.warning{border-left-color:rgba(255,145,0,.8)}.admonition.attention>.admonition-title,.admonition.caution>.admonition-title,.admonition.warning>.admonition-title{background-color:rgba(255,145,0,.1);border-bottom-color:rgba(255,145,0,.2)}.admonition.attention>.admonition-title:before{color:#ff9100;content:"\E417"}.admonition.caution>.admonition-title:before,.admonition.warning>.admonition-title:before{color:#ff9100;content:"\E002"}.admonition.fail,.admonition.failure,.admonition.missing{border-left-color:rgba(255,82,82,.8)}.admonition.fail>.admonition-title,.admonition.failure>.admonition-title,.admonition.missing>.admonition-title{background-color:rgba(255,82,82,.1);border-bottom-color:rgba(255,82,82,.2)}.admonition.fail>.admonition-title:before,.admonition.failure>.admonition-title:before,.admonition.missing>.admonition-title:before{color:#ff5252;content:"\E14C"}.admonition.bug,.admonition.danger,.admonition.error{border-left-color:rgba(255,23,68,.8)}.admonition.bug>.admonition-title,.admonition.danger>.admonition-title,.admonition.error>.admonition-title{background-color:rgba(255,23,68,.1);border-bottom-color:rgba(255,23,68,.2)}.admonition.danger>.admonition-title:before{color:#ff1744;content:"\E3E7"}.admonition.error>.admonition-title:before{color:#ff1744;content:"\E14C"}.admonition.bug>.admonition-title:before{color:#ff1744;content:"\E868"}.admonition.example,.admonition.snippet{border-left-color:rgba(0,184,212,.8)}.admonition.example>.admonition-title,.admonition.snippet>.admonition-title{background-color:rgba(0,184,212,.1);border-bottom-color:rgba(0,184,212,.2)}.admonition.example>.admonition-title:before,.admonition.snippet>.admonition-title:before{color:#00b8d4;content:"\E242"}.admonition.cite,.admonition.quote{border-left-color:rgba(158,158,158,.8)}.admonition.cite>.admonition-title,.admonition.quote>.admonition-title{background-color:rgba(158,158,158,.1);border-bottom-color:rgba(158,158,158,.2)}.admonition.cite>.admonition-title:before,.admonition.quote>.admonition-title:before{color:#9e9e9e;content:"\E244"}
/* Please visit the URL below for more information: */
/*   https://shd101wyy.github.io/markdown-preview-enhanced/#/customize-css */
/* Please visit the URL below for more information: */
/*   https://shd101wyy.github.io/markdown-preview-enhanced/#/customize-css */

@font-face {
  font-family: 'Catamaran';
  font-style: normal;
  font-weight: 400;
  src: url(https://fonts.gstatic.com/s/catamaran/v28/o-0bIpQoyXQa2RxT7-5B6Ryxs2E_6n1iPHjd5a7dvg.ttf) format('truetype');
}
.markdown-preview.markdown-preview {
  font-family: Verdana, Arial, "Times New Roman", sans-serif;
  font-size: 14px;
}
.markdown-preview.markdown-preview .box_bg_lightgray {
  background-color: #f5f5f5;
  border: 2px solid #969696;
  padding: 15px;
  margin-top: 15px;
  margin-bottom: 15px;
  border-radius: 5px;
  box-shadow: 0 0 7px 0 rgba(78, 120, 158, 0.1);
}
.markdown-preview.markdown-preview .box_bg_lightgreen {
  background-color: #f5faf5;
  border: 2px solid #969b96;
  padding-left: 15px;
  padding-right: 15px;
  margin-top: 15px;
  margin-bottom: 15px;
  border-radius: 5px;
  box-shadow: 0 0 7px 0 rgba(78, 120, 158, 0.1);
}
.markdown-preview.markdown-preview .contenedor {
  display: flex;
  justify-content: center;
  margin: 30px auto 30px auto;
}
.markdown-preview.markdown-preview .fondo {
  background: url(https://ser.smr2.iesdoctorbalmis.info/assets/fondo.png);
  background-size: cover;
  width: 75%;
  height: 160px;
  border-radius: 10px;
  position: relative;
}
.markdown-preview.markdown-preview .cita {
  font-family: Arial;
  font-style: italic;
  font-weight: 600;
  text-align: justify;
  line-height: 1.5rem;
  opacity: 0.6;
  color: white;
  padding: 5rem;
  position: relative;
  top: 50%;
  left: 50%;
  font-size: 1.3rem;
  transform: translate(-50%, -50%);
}
.markdown-preview.markdown-preview .abre_comilla {
  font-family: "Catamaran";
  font-weight: 600;
  color: white;
  padding-left: 30px;
  position: absolute;
  font-size: 6rem;
  transform: translate(0%, -15%);
}
.markdown-preview.markdown-preview .cierra_comilla {
  font-family: "Catamaran";
  font-weight: 600;
  color: white;
  padding-right: 30px;
  right: 0%;
  position: absolute;
  font-size: 6rem;
  transform: translate(0%, 55%);
}
.markdown-preview.markdown-preview .autor {
  font-family: Arial;
  color: white;
  margin: 0px;
  padding-left: 30px;
  position: absolute;
  top: 83%;
  font-size: 1rem;
}
.markdown-preview.markdown-preview .flotante {
  display: flex;
  margin-top: 15px;
  margin-bottom: 15px;
}
@media (max-width: 550px) {
  .markdown-preview.markdown-preview .flotante {
    justify-content: center;
  }
}
@media (min-width: 550px) {
  .markdown-preview.markdown-preview .flotante {
    justify-content: space-between;
  }
}
@media (max-width: 550px) {
  .markdown-preview.markdown-preview .flotante {
    flex-direction: column;
  }
}
@media (min-width: 550px) {
  .markdown-preview.markdown-preview .flotante {
    flex-direction: row;
  }
}
.markdown-preview.markdown-preview .flotante_izq {
  margin-right: 15px;
}
@media (max-width: 550px) {
  .markdown-preview.markdown-preview .flotante_izq {
    width: 100%;
  }
}
@media (min-width: 550px) {
  .markdown-preview.markdown-preview .flotante_izq {
    width: auto;
  }
}
@media (max-width: 550px) {
  .markdown-preview.markdown-preview .flotante_der {
    width: 100%;
  }
}
@media (min-width: 550px) {
  .markdown-preview.markdown-preview .flotante_der {
    width: auto;
  }
}
.markdown-preview.markdown-preview .galeria_imagenes {
  display: flex;
  justify-content: space-evenly;
  align-items: center;
  margin-top: 15px;
  margin-bottom: 15px;
}
@media (max-width: 550px) {
  .markdown-preview.markdown-preview .galeria_imagenes {
    flex-direction: column;
  }
}
@media (min-width: 550px) {
  .markdown-preview.markdown-preview .galeria_imagenes {
    flex-direction: row;
  }
}
.markdown-preview.markdown-preview table {
  table-layout: auto !important;
  width: fit-content !important;
  max-width: none !important;
  border-collapse: collapse !important;
}
.markdown-preview.markdown-preview .style-normal {
  text-indent: 0.5cm;
  text-align: justify;
}
.markdown-preview.markdown-preview .style-example {
  text-align: justify;
  font-size: small;
}
.markdown-preview.markdown-preview .style-title {
  text-indent: 0cm;
  text-align: center;
}
.markdown-preview.markdown-preview .style-list {
  text-indent: 0cm;
  text-align: justify;
}
.markdown-preview.markdown-preview .style-table-content table {
  background-color: #f0f9ff !important;
  border-style: none !important;
  width: 100% !important;
  table-layout: fixed !important;
}
.markdown-preview.markdown-preview .style-table-content th,
.markdown-preview.markdown-preview .style-table-content td {
  border-style: none !important;
  vertical-align: top !important;
}
.markdown-preview.markdown-preview .style-table-content th:first-child,
.markdown-preview.markdown-preview .style-table-content td:first-child {
  width: 200px !important;
}
.markdown-preview.markdown-preview .md-toc {
  background-color: rgba(173, 216, 230, 0.4) !important;
}

      </style>
      <!-- The content below will be included at the end of the <head> element. --><script type="text/javascript">
  const configureMermaidIconPacks = () => {
    window["mermaid"].registerIconPacks([
      {
        name: "logos",
        loader: () =>
          fetch("https://unpkg.com/@iconify-json/logos@1/icons.json").then(
            (res) => res.json()
          ),
      },
    ]);
  };

  if (document.readyState !== 'loading') {
    configureMermaidIconPacks();
  } else {
    document.addEventListener("DOMContentLoaded", () => {
      configureMermaidIconPacks();
    });
  }
</script></head><body for="html-export">
    
    
      <div class="crossnote markdown-preview  ">
      
<div class="style-title">
<p><img src="../../../assets/img-BalmisHeader.png" alt="BALMIS"></p>
<h1 id="dns-windows">DNS WINDOWS </h1>
</div>
<p>游닃<a href="./t01.win.dns.pdf">Descargar PDF</a><br>

</p><div class="md-toc">
<details style="padding:0;;padding-left:0px;" open="">
        <summary class="md-toc-link-wrapper">
          <a href="#dns-windows" class="md-toc-link"><p>DNS WINDOWS</p>
</a>
          </summary>
        <div>
          <div class="md-toc-link-wrapper" style="padding:0;;display:list-item;list-style:square;margin-left:42px">
          <a href="#instalaci칩n-del-servicio-dns" class="md-toc-link">
            <p>INSTALACI칍N DEL SERVICIO DNS</p>

          </a></div><div class="md-toc-link-wrapper" style="padding:0;;display:list-item;list-style:square;margin-left:42px">
          <a href="#gesti칩n-de-zonas" class="md-toc-link">
            <p>GESTI칍N DE ZONAS</p>

          </a></div><div class="md-toc-link-wrapper" style="padding:0;;display:list-item;list-style:square;margin-left:42px">
          <a href="#gesti칩n-de-registros-de-recursos" class="md-toc-link">
            <p>GESTI칍N DE REGISTROS DE RECURSOS</p>

          </a></div><details style="padding:0;;padding-left:24px;" open="">
        <summary class="md-toc-link-wrapper">
          <a href="#configuraciones-avanzadas" class="md-toc-link"><p>CONFIGURACIONES AVANZADAS</p>
</a>
          </summary>
        <div>
          <div class="md-toc-link-wrapper" style="padding:0;;display:list-item;list-style:square;margin-left:42px">
          <a href="#servicio-dns-en-windows-nano-server" class="md-toc-link">
            <p>SERVICIO DNS EN WINDOWS NANO SERVER</p>

          </a></div><div class="md-toc-link-wrapper" style="padding:0;;display:list-item;list-style:square;margin-left:42px">
          <a href="#reenviadores-y-zonas-de-reenv칤o" class="md-toc-link">
            <p>REENVIADORES Y ZONAS DE REENV칈O</p>

          </a></div><div class="md-toc-link-wrapper" style="padding:0;;display:list-item;list-style:square;margin-left:42px">
          <a href="#configuraci칩n-de-registros-ns-y-soa" class="md-toc-link">
            <p>CONFIGURACI칍N DE REGISTROS NS Y SOA</p>

          </a></div><div class="md-toc-link-wrapper" style="padding:0;;display:list-item;list-style:square;margin-left:42px">
          <a href="#subdominios-y-delegaciones-de-zonas" class="md-toc-link">
            <p>SUBDOMINIOS Y DELEGACIONES DE ZONAS</p>

          </a></div><div class="md-toc-link-wrapper" style="padding:0;;display:list-item;list-style:square;margin-left:42px">
          <a href="#servidores-secundarios-y-transferencias-de-zona" class="md-toc-link">
            <p>SERVIDORES SECUNDARIOS Y TRANSFERENCIAS DE ZONA</p>

          </a></div>
        </div>
      </details>
    
        </div>
      </details>
    
</div>
<div style="page-break-after:always;"></div>
<div class="style-normal">
<p>En este documento se describen los <strong>comandos PowerShell m치s habituales para la instalaci칩n y configuraci칩n del servicio DNS</strong> en Windows Server. No se incluye la configuraci칩n mediante la consola gr치fica (DNS Manager), aunque es posible realizar todas las tareas desde esa interfaz.</p>
<p>Para direccionar a un equipo en una red interna o en Internet resulta dif칤cil usar solo la IP. Cuando la red crece (o en el caso de Internet) esta tarea se vuelve impracticable. Por eso existe el servicio DNS, que no es m치s que una base de datos distribuida que permite localizar la IP de cualquier equipo en una red o en Internet mediante un nombre. Este proceso se conoce como resoluci칩n directa. Tambi칠n es posible localizar un nombre dado la IP; a esto se le llama resoluci칩n inversa.</p>
<p>Un servidor DNS consiste en un conjunto de zonas que contienen archivos utilizados para la resoluci칩n directa de nombres y la resoluci칩n inversa de IPs.</p>
<p>En las versiones Server de Windows (por ejemplo Windows Server 2019), disponemos de la caracter칤stica o rol de servidor DNS. A continuaci칩n se muestran tablas y comandos habituales para la instalaci칩n y configuraci칩n b치sica del servicio DNS mediante PowerShell.</p>
</div>
<h2 id="instalaci칩n-del-servicio-dns">INSTALACI칍N DEL SERVICIO DNS </h2>
<div class="style-normal">
<p>Los comandos relacionados con la instalaci칩n y gesti칩n del rol del servidor DNS son los siguientes:</p>
</div>
<div class="style-list">
<ul>
<li>
<p><code>Install-WindowsFeature &lt;rol&gt; [-IncludeManagementTools]</code><br>
Instala la caracter칤stica o rol especificado. Opcionalmente se puede indicar que se instalen las herramientas de administraci칩n.</p>
<div class="admonition example">
<p class="admonition-title">Instalar servidor DNS</p>
<p>Instalaci칩n del rol de servidor DNS sin herramientas de administraci칩n.</p>
<pre data-role="codeBlock" data-info="text" class="language-text text"><code>PS C:\&gt; Install-WindowsFeature DNS
Success Restart Needed Exit Code             Feature Result
------- -------------- ---------             --------------
True    No             Success               {Servidor DNS}
</code></pre></div>
</li>
<li>
<p><code>Get-WindowsFeature [&lt;rol&gt;]</code><br>
Muestra informaci칩n de un rol o caracter칤stica dada; indica si est치 instalado o no y si est치 disponible. Si no se pasa ning칰n par치metro muestra el estado de todos los roles o caracter칤sticas de Windows.</p>
<div class="admonition example">
<p class="admonition-title">Verificar instalaci칩n DNS</p>
<p>Verificar si el rol de DNS est치 instalado.</p>
<pre data-role="codeBlock" data-info="text" class="language-text text"><code>PS C:\&gt; Get-WindowsFeature DNS
Display Name                                  Name                         Install State
------------                                  ----                         -------------
[X] Servidor DNS                              DNS
</code></pre></div>
</li>
<li>
<p><code>Remove-WindowsFeature &lt;rol&gt;</code><br>
Desinstala la caracter칤stica o rol especificado.</p>
</li>
</ul>
</div>
<h2 id="gesti칩n-de-zonas">GESTI칍N DE ZONAS </h2>
<div class="style-normal">
<p>Los comandos para la gesti칩n de zonas DNS son los siguientes:</p>
</div>
<div class="style-list">
<ul>
<li>
<p><code>Add-DnsServerPrimaryZone -Name &lt;nombre-zona&gt; -ZoneFile &lt;nombre-archivo-resoluci칩n-zona&gt;</code><br>
A침ade una zona primaria de resoluci칩n directa con un nombre de zona y un archivo de zona dados.</p>
<div class="admonition example">
<p class="admonition-title">Crear zona primaria directa</p>
<p>Crear la zona primaria para el dominio <code>midominio.dom</code> con el archivo de zona <code>midominio.dom.dns</code>.</p>
<pre data-role="codeBlock" data-info="text" class="language-text text"><code>PS C:\&gt; Add-DnsServerPrimaryZone -Name "midominio.dom" -ZoneFile "midominio.dom.dns"
</code></pre></div>
</li>
<li>
<p><code>Add-DnsServerPrimaryZone -NetworkID &lt;ip-red/prefijo-red&gt; -ZoneFile &lt;nombre-archivo-resoluci칩n-zona&gt;</code><br>
A침ade una zona primaria de resoluci칩n inversa para una red y un nombre de archivo de resoluci칩n dados.</p>
<div class="admonition example">
<p class="admonition-title">Crear zona primaria inversa</p>
<p>Crear la zona primaria de resoluci칩n inversa para la red <code>192.168.1.0/24</code>.</p>
<pre data-role="codeBlock" data-info="text" class="language-text text"><code>PS C:\&gt; Add-DnsServerPrimaryZone -NetworkId 192.168.1.0/24 -ZoneFile "1.168.192.in-addr.arpa.dns"
</code></pre></div>
</li>
<li>
<p><code>Get-DnsServerZone</code><br>
Muestra todas las zonas existentes en el servidor DNS. Tambi칠n indica si la zona se cre칩 manualmente o autom치ticamente.</p>
<div class="admonition example">
<p class="admonition-title">Mostrar zonas creadas</p>
<p>Mostrar todas las zonas de resoluci칩n creadas.</p>
<pre data-role="codeBlock" data-info="text" class="language-text text"><code>PS C:\&gt; Get-DnsServerZone | Format-Table -AutoSize

 ZoneName                 ZoneType IsAutoCreated IsDsIntegrated IsReverseLookupZone IsSigned
 --------                 -------- ------------- -------------- ------------------- --------
 0.in-addr.arpa           Primary True           False          True                False
 1.168.192.in-addr.arpa   Primary False          False          True                False
 127.in-addr.arpa         Primary True           False          True                False
 255.in-addr.arpa         Primary True           False          True                False
 midominio.dom            Primary False          False          False               False
</code></pre></div>
</li>
<li>
<p><code>Remove-DnsServerZone -Name &lt;nombre-zona&gt;</code><br>
Elimina la zona especificada.</p>
</li>
</ul>
</div>
<h2 id="gesti칩n-de-registros-de-recursos">GESTI칍N DE REGISTROS DE RECURSOS </h2>
<div class="style-normal">
<p>Los comandos para la gesti칩n de los registros de recursos en las zonas DNS son los siguientes:</p>
</div>
<div class="style-list">
<ul>
<li>
<p><code>Add-DnsServerResourceRecordA -Name &lt;nombre-dns&gt; -ZoneName &lt;zona&gt; -Ipv4Address &lt;ip&gt; [-CreatePtr]</code><br>
A침ade un <strong>registro de recurso tipo A</strong> (host address) a una zona directa. Se especifica el nombre DNS corto (no FQDN) y la IP asociada. El par치metro opcional <code>-CreatePtr</code> hace que el servidor DNS cree autom치ticamente el <strong>registro PTR</strong> correspondiente en la zona inversa.</p>
<div class="admonition example">
<p class="admonition-title">A침adir registro A</p>
<p>A침adir registro A <code>www</code> para <code>midominio.dom</code> con IP <code>192.168.1.4</code> y crear autom치ticamente el registro PTR.</p>
<pre data-role="codeBlock" data-info="text" class="language-text text"><code>PS C:\&gt; Add-DnsServerResourceRecordA -Name www -ZoneName "midominio.dom" -IPv4Address 192.168.1.4 -CreatePtr
</code></pre></div>
</li>
<li>
<p><code>Add-DnsServerResourceRecordAAAA -Name &lt;nombre-dns&gt; -ZoneName &lt;nombre-zona&gt; -Ipv6Address &lt;ip&gt; [-CreatePtr]</code><br>
A침ade un <strong>registro AAAA</strong> (IPv6) a una zona directa. Opcionalmente crea el PTR en la zona inversa.</p>
</li>
<li>
<p><code>Add-DnsServerResourceRecordCNAME -Name &lt;nombre-dns&gt; -HostNameAlias &lt;nombre-dns-fqdn&gt; -ZoneName &lt;nombre-zona&gt;</code><br>
A침ade un <strong>registro CNAME</strong> (alias). Se especifica el nombre del alias y el FQDN del host can칩nico.</p>
<div class="admonition example">
<p class="admonition-title">A침adir registro CNAME</p>
<p>A침adir alias <code>w3</code> apuntando a <code>www.midominio.dom</code>.</p>
<pre data-role="codeBlock" data-info="text" class="language-text text"><code>PS C:\&gt; Add-DnsServerResourceRecordCName -Name w3 -HostNameAlias "www.midominio.dom" -ZoneName "midominio.dom"
</code></pre></div>
</li>
<li>
<p><code>Add-DnsServerResourceRecordPtr -Name &lt;ip-parte-host&gt; -ZoneName &lt;zona-inversa&gt; -PtrDomainName &lt;nombre-dns-fqdn&gt;</code><br>
A침ade un <strong>registro PTR</strong> en una zona inversa. En PTR se indica la parte host de la IP y el FQDN correspondiente.</p>
</li>
<li>
<p><code>Add-DnsServerResourceRecordMX -Name &lt;nombre-serv-correo&gt; -MailExchange &lt;nombre-dns-fqdn&gt; -ZoneName &lt;nombre-zona&gt; -Preference &lt;valor&gt;</code><br>
A침ade un <strong>registro MX</strong> (Mail Exchanger). <code>-Preference</code> indica la prioridad (por defecto 10). <code>-MailExchange</code> debe corresponder a un nombre que tenga un registro A.</p>
<div class="admonition example">
<p class="admonition-title">A침adir registro MX</p>
<p>A침adir un servidor de correo <code>correo</code> para <code>midominio.dom</code> con prioridad 15.</p>
<pre data-role="codeBlock" data-info="text" class="language-text text"><code>PS C:\&gt; Add-DnsServerResourceRecordMX -Name correo -ZoneName "midominio.dom" -MailExchange "correo.midominio.dom"  -Preference 15
</code></pre></div>
</li>
<li>
<p><code>Add-DnsServerResourceRecord -Name &lt;nombre&gt; -ZoneName &lt;nombre-zona&gt; -&lt;tipo-registro&gt; [&lt;opci칩n1&gt; ...]</code></p>
<p>Comando general para a침adir registros de distintos tipos (NS, TXT, etc.).</p>
<div class="admonition example">
<p class="admonition-title">A침adir registro NS</p>
<p>A침adir otro servidor de nombres <code>dns2</code> para <code>midominio.dom</code> con IP <code>192.168.1.5</code>.</p>
<pre data-role="codeBlock" data-info="text" class="language-text text"><code>PS C:\&gt; Add-DnsServerResourceRecord -Name dns2 -ZoneName "midominio.dom" -NS -NameServer "dns2.midominio.dom"
</code></pre></div>
</li>
<li>
<p><code>Get-DnsServerResourceRecord -ZoneName &lt;nombre-zona&gt; [-Name &lt;nombre&gt;] [-RRType &lt;tipo-registro&gt;]</code><br>
Muestra los registros de una zona; se puede filtrar por nombre o tipo.</p>
<div class="admonition example">
<p class="admonition-title">Mostrar registros de una zona</p>
<p>Mostrar todos los registros A de la zona <code>midominio.dom</code>.</p>
<pre data-role="codeBlock" data-info="text" class="language-text text"><code>PS C:\&gt; Get-DnsServerResourceRecord -Zonename "midominio.dom" -RRType A | Format-Table -AutoSize
HostName RecordType Type Timestamp TimeToLive RecordData
-------- ---------- ---- --------- ---------- ----------
dhcp     A          1    0         01:00:00   192.168.1.2
dns      A          1    0         01:00:00   192.168.1.3
www      A          1    0         01:00:00   192.168.1.4
ftp      A          1    0         01:00:00   192.168.1.5
correo   A          1    0         01:00:00   192.168.1.6
dns2     A          1    0         01:00:00   192.168.1.13
</code></pre></div>
<div class="admonition example">
<p class="admonition-title">Mostrar registros de una zona</p>
<p>Mostrar todos los registros PTR de la zona inversa <code>1.168.192.in-addr.arpa</code>.</p>
<pre data-role="codeBlock" data-info="text" class="language-text text"><code>PS C:\&gt; Get-DnsServerResourceRecord -Zonename "1.168.192.in-addr.arpa" -RRType Ptr | Format-Table -AutoSize
HostName RecordType Type Timestamp TimeToLive RecordData
-------- ---------- ---- --------- ---------- ----------
13       PTR        12   0         01:00:00   dns2.midominio.dom.
6        PTR        12   0         01:00:00   correo.midominio.dom.
5        PTR        12   0         01:00:00   ftp.midominio.dom.
4        PTR        12   0         01:00:00   www.midominio.dom.
3        PTR        12   0         01:00:00   dns.midominio.dom.
2        PTR        12   0         01:00:00   dhcp.midominio.dom.
</code></pre></div>
</li>
<li>
<p><code>Set-DnsServerResourceRecord -Zonename &lt;nombre-zona&gt; -OldInputObject &lt;$RRantic&gt; -NewInputObject &lt;$RRnou&gt;</code><br>
Modifica un registro de recurso reemplazando el objeto antiguo por uno nuevo. Se usa habitualmente para par치metros del SOA.</p>
<div class="admonition example">
<p class="admonition-title">Modificar un registro</p>
<p>Modificar un registro suponiendo que los valores antiguos est치n en la variable <code>$rro</code> y los valores nuevos en <code>$rrn</code>.</p>
<pre data-role="codeBlock" data-info="text" class="language-text text"><code>PS C:\&gt; Set-DnsServerResourceRecord -ZoneName "midominio.dom" -OldInputObject $rro -NewInputObject $rrn
</code></pre></div>
</li>
<li>
<p><code>Remove-DnsServerResourceRecord -ZoneName &lt;nombre-zona&gt; -RRType &lt;tipo-registro&gt; -Name &lt;nombre&gt; [-RecordData &lt;lista-datos-registro&gt;]</code><br>
Elimina uno o varios registros de un tipo dado en una zona. El valor de <code>-RecordData</code> depende del tipo de registro.</p>
<div class="admonition example">
<p class="admonition-title">Eliminar un registro</p>
<p>Eliminar el registro A <code>ftp</code> de <code>midominio.dom</code>.</p>
<pre data-role="codeBlock" data-info="text" class="language-text text"><code>PS C:\&gt; Remove-DnsServerResourceRecord -ZoneName "midominio.dom" -RRType A -Name ftp -RecordData 192.168.1.5
</code></pre></div>
</li>
</ul>
</div>
<h2 id="configuraciones-avanzadas">CONFIGURACIONES AVANZADAS </h2>
<div class="style-normal">
<p>A continuaci칩n se muestran configuraciones avanzadas y casos especiales del servicio DNS en Windows Server.</p>
</div>
<h3 id="servicio-dns-en-windows-nano-server">SERVICIO DNS EN WINDOWS NANO SERVER </h3>
<div class="style-normal">
<p>Las ediciones Nano Server se usan en m치quinas virtuales de Hyper-V y en contenedores Windows. En Nano Server el servicio DNS se instala de forma diferente: se instala el SO y se preconfigura para luego instalar el servicio DNS de forma remota mediante WinRM desde otro equipo.</p>
</div>
<div class="style-list">
<p>Comandos relevantes:</p>
<ul>
<li>
<p><code>Enable-WindowsOptionalFeature -Online -FeatureName DNS-Server-Full-Role</code><br>
Desempaqueta/instala el servicio DNS.</p>
<div class="admonition example">
<p class="admonition-title">Instalaci칩n DNS en Nano Server</p>
<p>Instalar/extraer el paquete DNS en una m치quina remota (ejemplo de uso con WinRM).<br>
Tras conectarse a la m치quina remota (WinRM), ejecutar el siguiente c칩digo:</p>
<pre data-role="codeBlock" data-info="text" class="language-text text"><code>[192.168.1.100]: PS C:\&gt; Enable-WindowsOptionalFeature -Online -FeatureName DNS-Server-Full-Role
</code></pre></div>
</li>
<li>
<p><code>Import-Module DnsServer</code><br>
Carga el m칩dulo con los comandos de configuraci칩n del servicio DNS.</p>
</li>
<li>
<p><code>Get-Command -Module DnsServer</code><br>
Lista los comandos disponibles del m칩dulo.</p>
</li>
</ul>
</div>
<h3 id="reenviadores-y-zonas-de-reenv칤o">REENVIADORES Y ZONAS DE REENV칈O </h3>
<div class="style-normal">
<p>Un servidor DNS puede actuar de forma h칤brida, realizando tanto resoluciones recursivas como autoritativas. Se puede configurar para reenviar peticiones a otros servidores si el nombre solicitado no est치 en sus zonas autoritativas. Los <strong>reenviadores (forwarders)</strong> se pueden definir a <strong>nivel de servidor</strong> o a <strong>nivel de zona</strong> (zonas de reenviamiento condicional).</p>
</div>
<div class="style-list">
<p>Los comandos relevantes son:</p>
<ul>
<li>
<p><code>Add-DnsServerForwarder -IPAddress &lt;ip&gt;</code><br>
A침ade un servidor DNS p칰blico/privado a la lista de reenviadores a nivel de servidor.</p>
<div class="admonition example">
<p class="admonition-title">Forwarders a nivel de servidor</p>
<p>A침adir el reenviador p칰blico de Google <code>8.8.8.8</code>.</p>
<pre data-role="codeBlock" data-info="text" class="language-text text"><code>PS C:\&gt; Add-DnsServerForwarder -IPAddress 8.8.8.8
</code></pre></div>
</li>
<li>
<p><code>Get-DnsServerForwarder</code><br>
Muestra los reenviadores definidos (a nivel de servidor).</p>
</li>
<li>
<p><code>Remove-DnsServerForwarder -IPAddress &lt;ip&gt;</code><br>
Elimina el reenviador indicado (a nivel de servidor).</p>
</li>
<li>
<p><code>Add-DnsServerConditionalForwarderZone -Name &lt;nombre-zona&gt; -MasterServers &lt;lista-ip&gt;</code><br>
A침ade una zona de reenv칤o condicional que reenv칤a consultas para un dominio a servidores espec칤ficos.</p>
<div class="admonition example">
<p class="admonition-title">Forwarding condicional</p>
<p>A침adir una zona de reenv칤o condicional para <code>otrodominio.dom</code> cuyo servidor que conoce ese dominio es <code>192.168.2.252</code>.</p>
<pre data-role="codeBlock" data-info="text" class="language-text text"><code>PS C:&gt; Add-DnsServerConditionalForwarderZone -Name otrodominio.dom -MasterServers 192.168.2.252 -Passthru
ZoneName          ZoneType  IsAutoCreated IsDsIntegrated IsReverseLookupZone IsSigned
--------          --------  ------------  -------------- ------------------- --------
otrodominio.dom   Forwarder False         False          False
</code></pre><p>El par치metro <code>-Passthru</code> hace que se muestre informaci칩n adicional sobre la zona creada.</p>
</div>
<div class="admonition example">
<p class="admonition-title">Forwarding condicional</p>
<p>A침adir una zona de reenv칤o condicional inversa para la red <code>192.168.2.0/24</code>.</p>
<pre data-role="codeBlock" data-info="text" class="language-text text"><code>PS C:\&gt; Add-DnsServerConditionalForwarderZone -Name 2.168.192.in-addr.arpa -MasterServers 192.168.2.252 -Passthru
ZoneName               ZoneType  IsAutoCreated IsDsIntegrated   IsReverseLookupZone   IsSigned
--------               --------  ------------  --------------   -------------------   --------
2.168.192.in-addr.arpa Forwarder False         False            True
</code></pre></div>
</li>
</ul>
<div class="style-normal">
<p>Las zonas de reenviamiento se eliminan con el mismo comando que se utiliza para eliminar cualquier zona (<code>Remove-DnsServerZone -Name &lt;zona&gt;</code>).</p>
</div>
<h3 id="configuraci칩n-de-registros-ns-y-soa">CONFIGURACI칍N DE REGISTROS NS Y SOA </h3>
<div class="style-normal">
<p>Al crear una zona autom치ticamente se crean los registros NS y SOA con valores por defecto en la secci칩n <code>RecordData</code>. Es habitual modificar algunos de esos valores (por ejemplo servidor primario, responsable, intervalos de refresh/retry/expire). El proceso general para modificar estos campos es:</p>
</div>
<div class="style-list">
<ol>
<li>Cargar en una variable el objeto del registro que queremos modificar.</li>
<li>Clonar/copiar ese objeto en otra variable.</li>
<li>Modificar los valores en la nueva variable.</li>
<li>Actualizar el registro con el cmdlet <code>Set-DnsServerResourceRecord</code>.</li>
</ol>
<div class="admonition example">
<p class="admonition-title">Modificar registro NS</p>
<p>Cambiar el nombre del servidor DNS en el registro NS de <code>midominio.dom</code>.</p>
<pre data-role="codeBlock" data-info="text" class="language-text text"><code># Paso 1: obtener registro de recurso NS
PS C:\&gt; $RRnsOld = Get-DnsServerResourceRecord -ZoneName "midominio.dom" -RRType Ns

# Paso 2: clonar registro
PS C:\&gt; $RRnsNew = [ciminstance]::new($RRnsOld)
# (en Windows 2019+ se puede usar Clone)
PS C:\&gt; $RRnsNew = $RRnsOld.Clone()

# Paso 3: modificar nombre del servidor al RecordData
PS C:\&gt; $RRnsNew.RecordData.NameServer = "dns.midominio.dom"

# Paso 4: actualizar registro NS
PS C:\&gt; Set-DnsServerResourceRecord -ZoneName "midominio.dom" -OldInputObject $RRnsOld -NewInputObject $RRnsNew
</code></pre></div>
<div class="admonition example">
<p class="admonition-title">Modificar registro SOA</p>
<p>Modificar el registro SOA de la zona de resoluci칩n directa del dominio <code>midominio.dom</code> de manera que el servidor se llame <code>dns</code>, las incidencias de funcionamiento del servicio DNS se env칤en al usuario de correo del dominio <code>admin</code>. Tambi칠n se tiene que configurar para que se hagan transferencias de zona cada dia, que se reintente conectar cada 4 horas y que las zonas secundarias consideren que la zona ha caducado despues de 7 dias sin actualizarse.</p>
<pre data-role="codeBlock" data-info="text" class="language-text text"><code># Paso 1: obtener registro de recurso SOA
PS C:\&gt; $RRsoaOld = Get-DnsServerResourceRecord -ZoneName "midominio.dom" -RRType Soa

# Paso 2: clonar registro
PS C:\&gt; $RRsoaNew = [ciminstance]::new($RRsoaOld)

# Paso 3: modificar valores del RecordData
PS C:\&gt; $RRsoaNew.RecordData.PrimaryServer = "dns.midominio.dom"
PS C:\&gt; $RRsoaNew.RecordData.ResponsiblePerson = "admin.midominio.dom"
PS C:\&gt; $RRsoaNew.RecordData.RefreshInterval = New-TimeSpan -Days 1
PS C:\&gt; $RRsoaNew.RecordData.RetryDelay = New-TimeSpan -Hours 4
PS C:\&gt; $RRsoaNew.RecordData.ExpireLimit = New-TimeSpan -Days 7

# Paso 4: actualizar registro SOA
PS C:\&gt; Set-DnsServerResourceRecord -ZoneName "midominio.dom" -OldInputObject $RRsoaOld -NewInputObject $RRsoaNew
</code></pre></div>
</div>
<h3 id="subdominios-y-delegaciones-de-zonas">SUBDOMINIOS Y DELEGACIONES DE ZONAS </h3>
<div class="style-normal">
<p>Un servidor autoritativo de un dominio puede delegar la resoluci칩n de nombres de uno de sus subdominios a otro servidor DNS. Esto se consigue a침adiendo una delegaci칩n de zona (registro de delegaci칩n) que apunta al servidor DNS del subdominio (normalmente un par: un NS y un registro A <strong>glue</strong>) en el servidor del dominio padre.</p>
<p>En Windows Server no es necesario crear manualmente los registros glue; se indica la delegaci칩n usando el comando apropiado y el servidor se encarga de crear lo necesario (si procede). Los servidores DNS del subdominio deben estar configurados correctamente.</p>
</div>
<div class="style-list">
<p>Comandos:</p>
<ul>
<li>
<p><code>Add-DnsServerZoneDelegation -Name &lt;zona-dominio&gt; -ChildZoneName &lt;zona-subdominio&gt; -NameServer &lt;fqdn-dns-subdominio&gt; -IPAddress &lt;ip-dns-subdominio&gt;</code><br>
Delegar la administraci칩n de un subdominio en el servidor DNS especificado por su FQDN e IP.</p>
<div class="admonition example">
<p class="admonition-title">Delegaci칩n de subdominios</p>
<p>Delegar <code>grupo1.midominio.dom</code> y <code>grupo2.midominio.dom</code>. Los servidores DNS de los subdominios son <code>dnsG1.grupo1.midominio.dom</code> (IP <code>192.168.1.23</code>) y <code>dnsG2.grupo2.midominio.dom</code> (IP <code>192.168.1.33</code>).</p>
<pre data-role="codeBlock" data-info="text" class="language-text text"><code>PS C:\&gt; Add-DnsServerZoneDelegation -Name "midominio.dom" `
-ChildZoneName "grupo1" `
-NameServer "dnsG1.grupo1.midominio.dom" `
-IPAddress 192.168.1.23

PS C:\&gt; Add-DnsServerZoneDelegation -Name "midominio.dom" `
-ChildZoneName "grupo2" `
-NameServer "dnsG2.grupo2.midominio.dom" `
-IPAddress 192.168.1.33
</code></pre></div>
</li>
<li>
<p><code>Get-DnsServerZoneDelegation -Name &lt;nombre-zona&gt;</code><br>
Mostrar delegaciones definidas para una zona.</p>
<div class="admonition example">
<p class="admonition-title">Mostrar delegaciones</p>
<p>Mostrar las delegaciones definidas en la zona <code>midominio.dom</code>.</p>
<pre data-role="codeBlock" data-info="text" class="language-text text"><code>PS C:\&gt; Get-DnsServerZoneDelegation -Name "midominio.dom" | Format-Table -AutoSize
ZoneName          ChildZoneName          NameServer                  IPAddress
--------          -------------          ----------                  ---------
midominio.dom     grupo1.midominio.dom   dnsG1.grupo1.midominio.dom  192.168.1.23
midominio.dom     grupo2.midominio.dom   dnsG2.grupo2.midominio.dom  192.168.1.33
</code></pre></div>
</li>
<li>
<p><code>Remove-DnsServerZoneDelegation -Name &lt;zona-dominio&gt; -ChildZoneName &lt;zona-subdominio&gt;</code><br>
Eliminar una delegaci칩n de subdominio.</p>
</li>
</ul>
</div>
<h3 id="servidores-secundarios-y-transferencias-de-zona">SERVIDORES SECUNDARIOS Y TRANSFERENCIAS DE ZONA </h3>
<div class="style-normal">
<p>El servicio DNS debe proveer alta disponibilidad; esto se logra mediante r칠plicas (servidores secundarios) por zona. Las zonas primarias (maestras) y secundarias (esclavas) deben mantenerse sincronizadas. Las transferencias de zona pueden ser completas o incrementales. Los atributos num칠ricos del <code>RecordData</code> del SOA configuran cu치ndo y c칩mo se hacen las transferencias (SerialNumber, RefreshInterval, RetryDelay, ExpireLimit, MinimumTTL).</p>
</div>
<div class="style-list">
<p>Los atributos son:</p>
<ul>
<li><code>SerialNumber</code>: n칰mero de serie de la zona. La zona primaria y secundaria tienen que tener el mismo n칰mero de serie. Si el n칰mero de serie de la zona primaria es mayor que el de la secundaria, entonces se producir치 una transferencia de zona cuando corresponda para actualizar la secundaria.</li>
<li><code>RefreshInterval</code>: intervalo entre comprobaciones de cambios por parte de la secundaria. Por defecto el valor se expresa en segundos (como todos los campos que expresen tiempos). Con el sufijo <em>m</em> el tiempo se expresa en minutos, con <em>h</em> en horas y con el sufijo <em>d</em> en d칤as.</li>
<li><code>RetryDelay</code>: tiempo de reintento si falla la transferencia.</li>
<li><code>ExpireLimit</code>: tiempo tras el cual la secundaria considera que la zona ha caducado si no ha podido actualizarse y por lo tanto deja de responder a consultas.</li>
<li><code>MinimumTTL</code>: TTL m칤nimo para respuestas negativas en cach칠; es decir, el tiempo que un cliente debe esperar antes de volver a consultar por un nombre que no existe.</li>
</ul>
</div>
<div class="style-normal">
<p>Para forzar una transferencia incremental o completa se incrementa el <code>SerialNumber</code> en la zona primaria (y opcionalmente se configuran notificaciones a secundarias).</p>
</div>
<div class="style-list">
<p>Comandos relevantes para configurar zonas secundarias y transferencias de zona:</p>
<ul>
<li>
<p><code>Set-DnsServerPrimaryZone -Name "&lt;zona&gt;" -Notify NotifyServers -NotifyServers &lt;ips&gt; -SecondaryServers &lt;ips&gt; -SecureSecondaries TransferToSecureServers</code><br>
Configurar el servidor primario para que notifique a los servidores secundarios especificados cuando haya cambios en la zona. El par치metro <code>-SecureSecondaries</code> indica que solo se permiten transferencias a servidores seguros (autenticados).</p>
<div class="admonition example">
<p class="admonition-title">Configurar notificaciones y transferencias de zona</p>
<p>Configurar el servidor primario de la zona midominio.dom para que notifique los cambios de la base de datos de resoluci칩n de la zona al servidor secundario de ip <code>192.168.1.13</code>. Configurar tambi칠n el servidor primario de la zona de resoluci칩n inversa correspondiente a la red <code>192.168.1.0/24</code>.</p>
<pre data-role="codeBlock" data-info="text" class="language-text text"><code>PS C:\&gt; Set-DnsServerPrimaryZone -Name "midominio.dom" `
-Notify NotifyServers -NotifyServers 192.168.1.13 `
-SecondaryServers 192.168.1.13 -SecureSecondaries TransferToSecureServers

PS C:\&gt; Set-DnsServerPrimaryZone -Name "1.168.192.in-addr.arpa" `
-Notify NotifyServers -NotifyServers 192.168.1.13 `
-SecondaryServers 192.168.1.13 -SecureSecondaries TransferToSecureServers
</code></pre></div>
</li>
<li>
<p><code>Add-DnsServerSecondaryZone -Name &lt;nombre-zona&gt; -ZoneFile &lt;archivo-resoluci칩n-zona&gt; -MasterServers &lt;lista-dns-primarios&gt;</code><br>
A침adir una zona secundaria de resoluci칩n directa.</p>
<div class="admonition example">
<p class="admonition-title">Crear zonas secundarias directas</p>
<p>Crear la zona secundaria para el dominio <code>midominio.dom</code>.</p>
<pre data-role="codeBlock" data-info="text" class="language-text text"><code>PS C:\&gt; Add-DnsServerSecondaryZone -Name "midominio.dom" `
-ZoneFile "midominio.dom.dns" `
-MasterServers 192.168.1.3
</code></pre></div>
</li>
<li>
<p><code>Add-DnsServerSecondaryZone -NetworkId &lt;red&gt; -ZoneFile &lt;archivo&gt; -MasterServers &lt;lista-dns-primarios&gt;</code><br>
A침adir una zona secundaria de resoluci칩n inversa.</p>
<div class="admonition example">
<p class="admonition-title">Crear zonas secundarias inversas</p>
<p>Crear la zona secundaria de resoluci칩n inversa para la red <code>192.168.1.0/24</code>.</p>
<pre data-role="codeBlock" data-info="text" class="language-text text"><code>PS C:\&gt; Add-DnsServerSecondaryZone -NetworkId 192.168.1.0/24 `
-ZoneFile "1.168.192.in-addr.arpa.dns" `
-MasterServers 192.168.1.3
</code></pre></div>
</li>
</ul>
</div>
</div>
      </div>
      
      
    
    
    
    
    
    
  
    </body></html>